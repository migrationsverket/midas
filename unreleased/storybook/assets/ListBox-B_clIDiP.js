import{$ as q,a as le,b as re,c as ie,d as de,e as ne,f as z,g as se,h as ce}from"./Collection-Crg7qUQG.js";import{e as G,b as M,c as R,l as ue,$ as J,a as L,f as Q,k as X,m as $e,i as fe}from"./utils-DmmWNkPl.js";import{$ as be,a as U,b as ve,c as Y,d as pe}from"./DragAndDrop-DRGA-Xbq.js";import{$ as ge,a as xe,b as me,c as he}from"./Separator-BeUoo5-i.js";import{b as Pe,$ as De,c as ye}from"./context-CPq6wxib.js";import{$ as Se}from"./Text-Q62xu10P.js";import{c as w,e as Ee,z as Ce,A as Me,$ as Z,B as j,w as Fe,a as ke}from"./useFocusRing-C9G08R9C.js";import{$ as we}from"./inertValue-SsQxQPS1.js";import{r as s,e as n,c as Be}from"./iframe-cV7iWBUq.js";import{d as Ie}from"./SelectionManager-eQYaj-7g.js";import{a as Le}from"./Button-BTIOZgVu.js";import{a as Ve,$ as Oe}from"./useListState-evFMm54p.js";import{a as _e}from"./FocusScope-Cgo8nggm.js";const W=new WeakMap;function He(o){return typeof o=="string"?o.replace(/\s*/g,""):""+o}function Ae(o,e){let l=W.get(o);if(!l)throw new Error("Unknown list");return`${l.id}-option-${He(e)}`}function Ue(o,e,l){let t=w(o,{labelable:!0}),r=o.selectionBehavior||"toggle",i=o.linkBehavior||(r==="replace"?"action":"override");r==="toggle"&&i==="action"&&(i="override");let{listProps:a}=ge({...o,ref:l,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:i}),{focusWithinProps:d}=Ee({onFocusWithin:o.onFocus,onBlurWithin:o.onBlur,onFocusWithinChange:o.onFocusChange}),c=G(o.id);W.set(e,{id:c,shouldUseVirtualFocus:o.shouldUseVirtualFocus,shouldSelectOnPressUp:o.shouldSelectOnPressUp,shouldFocusOnHover:o.shouldFocusOnHover,isVirtualized:o.isVirtualized,onAction:o.onAction,linkBehavior:i});let{labelProps:f,fieldProps:b}=Le({...o,id:c,labelElementType:"span"});return{labelProps:f,listBoxProps:M(t,d,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...M(b,a)})}}function Te(o,e,l){var t,r;let{key:i}=o,a=W.get(e);var d;let c=(d=o.isDisabled)!==null&&d!==void 0?d:e.selectionManager.isDisabled(i);var f;let b=(f=o.isSelected)!==null&&f!==void 0?f:e.selectionManager.isSelected(i);var v;let u=(v=o.shouldSelectOnPressUp)!==null&&v!==void 0?v:a==null?void 0:a.shouldSelectOnPressUp;var m;let g=(m=o.shouldFocusOnHover)!==null&&m!==void 0?m:a==null?void 0:a.shouldFocusOnHover;var x;let p=(x=o.shouldUseVirtualFocus)!==null&&x!==void 0?x:a==null?void 0:a.shouldUseVirtualFocus;var h;let E=(h=o.isVirtualized)!==null&&h!==void 0?h:a==null?void 0:a.isVirtualized,F=R(),P=R(),y={role:"option","aria-disabled":c||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?b:void 0};Ce()&&Me()||(y["aria-label"]=o["aria-label"],y["aria-labelledby"]=F,y["aria-describedby"]=P);let $=e.collection.getItem(i);if(E){let S=Number($==null?void 0:$.index);y["aria-posinset"]=Number.isNaN(S)?void 0:S+1,y["aria-setsize"]=xe(e.collection)}let D=a!=null&&a.onAction?()=>{var S;return a==null||(S=a.onAction)===null||S===void 0?void 0:S.call(a,i)}:void 0,C=Ae(e,i),{itemProps:B,isPressed:O,isFocused:I,hasAction:T,allowsSelection:_}=Ie({selectionManager:e.selectionManager,key:i,ref:l,shouldSelectOnPressUp:u,allowsDifferentPressOrigin:u&&g,isVirtualized:E,shouldUseVirtualFocus:p,isDisabled:c,onAction:D||!($==null||(t=$.props)===null||t===void 0)&&t.onAction?ue($==null||(r=$.props)===null||r===void 0?void 0:r.onAction,D):void 0,linkBehavior:a==null?void 0:a.linkBehavior,id:C}),{hoverProps:H}=Z({isDisabled:c||!g,onHoverStart(){j()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(i))}}),k=w($==null?void 0:$.props);delete k.id;let A=Fe($==null?void 0:$.props);return{optionProps:{...y,...M(k,B,H,A),id:C},labelProps:{id:F},descriptionProps:{id:P},isFocused:I,isFocusVisible:I&&e.selectionManager.isFocused&&j(),isSelected:b,isDisabled:c,isPressed:O,allowsSelection:_,hasAction:T}}function Ne(o){let{heading:e,"aria-label":l}=o,t=G();return{itemProps:{role:"presentation"},headingProps:e?{id:t,role:"presentation"}:{},groupProps:{role:"group","aria-label":l,"aria-labelledby":e?t:void 0}}}const ee=s.createContext(null),V=s.createContext(null),rt=s.forwardRef(function(e,l){[e,l]=J(e,l,ee);let t=s.useContext(V);return t?n.createElement(te,{state:t,props:e,listBoxRef:l}):n.createElement(le,{content:n.createElement(re,e)},r=>n.createElement(ze,{props:e,listBoxRef:l,collection:r}))});function ze({props:o,listBoxRef:e,collection:l}){o={...o,collection:l,children:null,items:null};let{layoutDelegate:t}=s.useContext(z),r=Oe({...o,layoutDelegate:t});return n.createElement(te,{state:r,props:o,listBoxRef:e})}function te({state:o,props:e,listBoxRef:l}){[e,l]=J(e,l,Pe);let{dragAndDropHooks:t,layout:r="stack",orientation:i="vertical",filter:a}=e,d=Ve(o,a),{collection:c,selectionManager:f}=d,b=!!(t!=null&&t.useDraggableCollectionState),v=!!(t!=null&&t.useDroppableCollectionState),{direction:u}=Be(),{disabledBehavior:m,disabledKeys:g}=f,x=De({usage:"search",sensitivity:"base"}),{isVirtualized:p,layoutDelegate:h,dropTargetDelegate:E,CollectionRoot:F}=s.useContext(z),P=s.useMemo(()=>e.keyboardDelegate||new ye({collection:c,collator:x,ref:l,disabledKeys:g,disabledBehavior:m,layout:r,orientation:i,direction:u,layoutDelegate:h}),[c,x,l,m,g,i,u,e.keyboardDelegate,r,h]),{listBoxProps:y}=Ue({...e,shouldSelectOnPressUp:b||e.shouldSelectOnPressUp,keyboardDelegate:P,isVirtualized:p},d,l);s.useRef(b),s.useRef(v),s.useEffect(()=>{},[b,v]);let $,D,C,B=!1,O=null,I=s.useRef(null);if(b&&t){$=t.useDraggableCollectionState({collection:c,selectionManager:f,preview:t.renderDragPreview?I:void 0}),t.useDraggableCollection({},$,l);let N=t.DragPreview;O=t.renderDragPreview?n.createElement(N,{ref:I},t.renderDragPreview):null}if(v&&t){D=t.useDroppableCollectionState({collection:c,selectionManager:f});let N=t.dropTargetDelegate||E||new t.ListDropTargetDelegate(c,l,{orientation:i,layout:r,direction:u});C=t.useDroppableCollection({keyboardDelegate:P,dropTargetDelegate:N},D,l),B=D.isDropTarget({type:"root"})}let{focusProps:T,isFocused:_,isFocusVisible:H}=ke(),k=d.collection.size===0,A={isDropTarget:B,isEmpty:k,isFocused:_,isFocusVisible:H,layout:e.layout||"stack",state:d},S=L({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:A}),K=null;k&&e.renderEmptyState&&(K=n.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(A)));let ae=w(e,{global:!0});return n.createElement(_e,null,n.createElement("div",{...M(ae,S,y,T,C==null?void 0:C.collectionProps),ref:l,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":B||void 0,"data-empty":k||void 0,"data-focused":_||void 0,"data-focus-visible":H||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},n.createElement(X,{values:[[ee,e],[V,d],[U,{dragAndDropHooks:t,dragState:$,dropState:D}],[me,{elementType:"div"}],[ve,{render:We}],[se,{name:"ListBoxSection",render:oe}]]},n.createElement(F,{collection:c,scrollRef:l,persistedKeys:pe(f,t,D),renderDropIndicator:Y(t,D)})),K,O))}function oe(o,e,l,t="react-aria-ListBoxSection"){let r=s.useContext(V),{dragAndDropHooks:i,dropState:a}=s.useContext(U),{CollectionBranch:d}=s.useContext(z),[c,f]=fe();var b;let{headingProps:v,groupProps:u}=Ne({heading:f,"aria-label":(b=o["aria-label"])!==null&&b!==void 0?b:void 0}),m=L({defaultClassName:t,className:o.className,style:o.style,values:{}}),g=w(o,{global:!0});return delete g.id,n.createElement("section",{...M(g,m,u),ref:e},n.createElement(he.Provider,{value:{...v,ref:c}},n.createElement(d,{collection:r.collection,parent:l,renderDropIndicator:Y(i,a)})))}const it=ie(ce,oe),dt=q(ne,function(e,l,t){let r=Q(l),i=s.useContext(V),{dragAndDropHooks:a,dragState:d,dropState:c}=s.useContext(U),{optionProps:f,labelProps:b,descriptionProps:v,...u}=Te({key:t.key,"aria-label":e==null?void 0:e["aria-label"]},i,r),{hoverProps:m,isHovered:g}=Z({isDisabled:!u.allowsSelection&&!u.hasAction,onHoverStart:t.props.onHoverStart,onHoverChange:t.props.onHoverChange,onHoverEnd:t.props.onHoverEnd}),x=null;d&&a&&(x=a.useDraggableItem({key:t.key},d));let p=null;c&&a&&(p=a.useDroppableItem({target:{type:"item",key:t.key,dropPosition:"on"}},c,r));let h=d&&d.isDragging(t.key),E=L({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...u,isHovered:g,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!d,isDragging:h,isDropTarget:p==null?void 0:p.isDropTarget}});s.useEffect(()=>{t.textValue},[t.textValue]);let F=e.href?"a":"div",P=w(e,{global:!0});return delete P.id,delete P.onClick,n.createElement(F,{...M(P,E,f,m,x==null?void 0:x.dragProps,p==null?void 0:p.dropProps),ref:r,"data-allows-dragging":!!d||void 0,"data-selected":u.isSelected||void 0,"data-disabled":u.isDisabled||void 0,"data-hovered":g||void 0,"data-focused":u.isFocused||void 0,"data-focus-visible":u.isFocusVisible||void 0,"data-pressed":u.isPressed||void 0,"data-dragging":h||void 0,"data-drop-target":(p==null?void 0:p.isDropTarget)||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},n.createElement(X,{values:[[Se,{slots:{[$e]:b,label:b,description:v}}]]},E.children))});function We(o,e){e=Q(e);let{dragAndDropHooks:l,dropState:t}=s.useContext(U),{dropIndicatorProps:r,isHidden:i,isDropTarget:a}=l.useDropIndicator(o,t,e);return i?null:n.createElement(Re,{...o,dropIndicatorProps:r,isDropTarget:a,ref:e})}function Ke(o,e){let{dropIndicatorProps:l,isDropTarget:t,...r}=o,i=L({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:t}});return n.createElement("div",{...l,...i,role:"option",ref:e,"data-drop-target":t||void 0})}const Re=s.forwardRef(Ke),nt=q(de,function(e,l,t){let r=s.useContext(V),{isLoading:i,onLoadMore:a,scrollOffset:d,...c}=e,f=s.useRef(null),b=s.useMemo(()=>({onLoadMore:a,collection:r==null?void 0:r.collection,sentinelRef:f,scrollOffset:d}),[a,d,r==null?void 0:r.collection]);be(b,f);let v=L({...c,id:void 0,children:t.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),u={tabIndex:-1};return n.createElement(n.Fragment,null,n.createElement("div",{style:{position:"relative",width:0,height:0},inert:we(!0)},n.createElement("div",{"data-testid":"loadMoreSentinel",ref:f,style:{position:"absolute",height:1,width:1}})),i&&v.children&&n.createElement("div",{...M(w(e,{global:!0}),u),...v,role:"option",ref:l},v.children))});export{rt as $,dt as a,it as b,V as c,W as d,Ae as e,ee as f,nt as g};
