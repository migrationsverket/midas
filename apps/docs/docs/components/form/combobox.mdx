---
title: ComboBox
description: Sökbar version av Select
---

import {
  BasicExample,
  ControlledExample,
  SectionedExample,
  AsyncExample,
} from '@site/src/components/examples/combobox/ComboboxExamples'
import { PropTable } from '@site/src/components/PropsTable'
import { ComponentHeader } from '@site/src/components/getComponentMetaData'

<ComponentHeader
  name='Combobox'
  friendlyName='Flerval med sök, väljare med sök, dropdown med sök'
  overrideHeadlessLink='https://react-spectrum.adobe.com/react-aria/ComboBox.html'
/>

En ComboBox är en sökbar version av Select. Combobox används för att välja **ett** alternativ av fler än fyra (4) alternativ.

```tsx
import { ComboBox, ListBoxItem } from '@midas-ds/components'
```

```tsx
<ComboBox
  label='Välj din favoritfrukt'
  description='Du kan bara välja en'
>
  <ListBoxItem id='Lime'>Lime</ListBoxItem>
  <ListBoxItem id='Äpple'>Äpple</ListBoxItem>
  <ListBoxItem id='Banan'>Banan</ListBoxItem>
  <ListBoxItem id='Kiwi'>Kiwi</ListBoxItem>
  <ListBoxItem id='Apelsin'>Apelsin</ListBoxItem>
</ComboBox>
```

<div className='card'>
  <BasicExample />
</div>

## Riktlinjer

### Val av komponent

- Om det ska gå att välja flera eller inga alternativ är det [Checkbox](/components/form/checkbox) eller [Select](/components/form/select) som ska användas.
- Om det är färre alternativ än fyra (4) används med fördel [Radio](/components/form/radio) istället.

## Kontrollerat val

Använd attributet `id` och eventet `onSelectionChange` för att använda controlled value på ComboBox.
Den valda ListBoxItems värde skickas till callbacken, så kan du använda det för att uppdatera ditt state.

```tsx
import React from 'react'
import { Key } from 'react-aria-components'

const [selectedFruit, setSelectedFruit] = React.useState<Key | null>(null)

return (
  <ComboBox
    label='Välj din favoritfrukt eller grönsak'
    description='Du kan bara välja en'
    selectedKey={selectedFruit}
    onSelectionChange={setSelectedFruit}
  >
    <ListBoxItem id='Lime'>Lime</ListBoxItem>
    <ListBoxItem id='Äpple'>Äpple</ListBoxItem>
    <ListBoxItem id='Banan'>Banan</ListBoxItem>
    <ListBoxItem id='Kiwi'>Kiwi</ListBoxItem>
    <ListBoxItem id='Apelsin'>Apelsin</ListBoxItem>
  </ComboBox>
)
```

<div className='card'>
  <ControlledExample />
</div>

## Flerval

För närvarande stödjer inte ComboBox flerval, vi hänvisar er istället att använda [Midas CSS för react-select](/dev/react-select) för detta.

## Sektioner

Vid många val kan alternativen struktureras i sektioner genom att dela in dem enligt följande:

```tsx
import { ListBoxHeader, ListBoxItem, ListBoxSection } from '@midas-ds/components'
import { Collection } from 'react-aria-components'

const options = [
  {
    name: 'Grönsaker',
    children: [
      { name: 'Morot', id: 2 },
      { name: 'Broccoli', id: 3 },
      { name: 'Spenat', id: 4 },
      { name: 'Potatis', id: 5 },
      { name: 'Tomat', id: 6 },
    ],
  },
  {
    name: 'Frukter',
    children: [
      { name: 'Äpple', id: 11 },
      { name: 'Banan', id: 12 },
      { name: 'Kiwi', id: 13 },
      { name: 'Fläder', id: 14 },
      { name: 'Nektarin', id: 15 },
    ],
  },
]

return (
  <ComboBox
    label='Välj din favoritfrukt eller grönsak'
    description='Du kan bara välja en'
    items={options}
  >
    {section => (
      <ListBoxSection id={section.name}>
        <ListBoxHeader>{section.name}</ListBoxHeader>
        <Collection items={section.children}>
          {item => {
            return <ListBoxItem id={item.id}>{item.name}</ListBoxItem>
          }}
        </Collection>
      </ListBoxSection>
    )}
  </ComboBox>
)
```

<div className='card'>
  <SectionedExample />
</div>

## Asynkron laddning

Om data finns på en server kan en laddningsindikator visas med en `ListBoxLoadMoreItem`-komponent.

Använd `allowsEmptyCollection` hos `ComboBox` och rendera bara `ListBoxLoadMoreItem` vid laddning för att visa ett "inga-träffar"-meddelande om sökfrågan inte gav något resultat.

```tsx
import { useAsyncList } from 'react-stately'
import { Collection } from 'react-aria-components'
import { ComboBox, ListBoxItem, ListBoxLoadMoreItem } from '@midas-ds/components'

const list = useAsyncList<{ name: string }>({
  async load({ signal, cursor, filterText }) {
    if (cursor) {
      cursor = cursor.replace(/^http:\/\//i, 'https://')
    }

    const res = await fetch(cursor || `https://swapi.py4e.com/api/people/?search=${filterText}`, { signal })

    const { results, next } = await res.json()

    return {
      items: results,
      cursor: next,
    }
  },
})

return (
  <ComboBox
    label='Star Wars Character Lookup'
    placeholder='Välj eller sök karaktär'
    description='Anropar ett externt API'
    inputValue={list.filterText}
    onInputChange={list.setFilterText}
    // highlight-next-line
    allowsEmptyCollection
  >
    // highlight-start
    <Collection items={list.items}>
      {item => {
        return <ListBoxItem id={item.name}>{item.name}</ListBoxItem>
      }}
    </Collection>
    {list.isLoading && <ListBoxLoadMoreItem isLoading={list.isLoading} />}
    // highlight-end
  </ComboBox>
)
```

Fler exempel med bland annat infinite scroll finns i [React Arias dokumentation för ComboBox](https://react-spectrum.adobe.com/react-aria/ComboBox.html#asynchronous-loading)

<div className='card'>
  <AsyncExample />
</div>

## API

### ComboBox

<PropTable name='ComboBox' />

### ListBoxItem

<PropTable
  name='ListBoxItem'
  defaultOpen={false}
/>
