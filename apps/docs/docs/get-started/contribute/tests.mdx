---
sidebar_label: 'Tester'
---

# Tester

## √ñversikt

Tester i Midas utg√∂rs fr√§mst av _komponenttester_ med hj√§lp av [Vitest Component Testing](https://vitest.dev/guide/browser/component-testing).
Vi g√∂r ocks√• automatiska [_tillg√§nglighetstester_ i Storybook](https://storybook.js.org/docs/writing-tests/accessibility-testing). V√•ra _snapshottester_ k√∂rs i Chromatic.

## Skriva tester

Vi str√§var efter en h√∂g testt√§ckning, vi tror att en v√§ltestad kodbas √∂kar f√∂rvaltningsbarheten och ger utvecklaren trygghet att f√∂rb√§ttra befintlig kod.

Bidrag till kodbasen ska kompletteras med √•tminstone ett test.

## üß© Komponenttester

Midas anv√§nder [Storybook](https://storybook.js.org) f√∂r att presentera komponenter, med hj√§lp av [portable stories](https://storybook.js.org/docs/api/portable-stories/portable-stories-vitest#composestories) kan vi anv√§nda en renderad story som utg√•ngspunkt f√∂r v√•ra tester.
Testerna k√∂rs sedan via en riktig browser. L√§s g√§rna mer om komponenttestning hos [Vitest](https://vitest.dev/guide/browser/component-testing)

### K√∂r komponenttester

```bash
nx test components
```

## üß™ Enhetstester

F√∂r att testa JavaScriptmoduler i nodemilj√∂ anv√§nds [vitest](https://vitest.dev/guide/).

### L√§gg till konfiguration f√∂r enhetstester

Alla paket och appar i Midas har inte enhetstester konfigurerade. [@nx/vitest](https://nx.dev/docs/technologies/test-tools/vitest/introduction) kommer automatiskt att skapa kommandot `nx test <package>` om paketet har en konfigurationsfil f√∂r vitest (`vitest.config.*`)

```ts title="vitest.config.ts"
import { defineProject } from 'vitest/config'

export default defineProject({
  test: {
    name: 'unit',
  },
})
```

## ‚ôø Tillg√§nglighetstester

Med [@storybook/addon-a11y](https://storybook.js.org/docs/writing-tests/accessibility-testing) utf√∂rs tillg√§nglighetstester med [axe](https://www.deque.com/axe/) p√• varje komponent, dessa testas i v√•ra workfows med kommandot:

```bash
nx a11y storybook
```

Automatiserade tillg√§nglighetstester f√•ngar upp en stor del av brister gentemot [WCAG](https://www.w3.org/WAI/standards-guidelines/wcag/)-standarden men kan sj√§lvklart kompletteras.

F√∂r att kontrollera tillg√§ngligheten i dark-mode eller forced-colors, k√∂r: `nx run storybook:a11y-dark-mode` respektive `nx run storybook:a11y-forced-colors`.

## üëÄ Snapshottester

Vi anv√§nder [Chromatic](https://chromatic.com) f√∂r att k√∂ra snapshottester som j√§mf√∂r visuella √§ndringar i komponenter.
Chromatic utg√•r fr√•n v√•r Storybook och tar snapshots p√• samtliga stories.

### Trigga snapshottester

Snapshottester k√∂rs automatiskt vid push till f√∂ljande brancher:

- `main`
- brancher som startar med `feature`
- brancher som startar med `feat`
- brancher som startar med `fix`
- brancher som startar med `bugfix`

### Hoppa √∂ver stories

F√∂r att reducera antalet snapshots b√∂r vi bara ta en snap per tillst√•nd i en komponent, v√§nligen anv√§nd f√∂ljande kod om du vill att chromatic ska hoppa √∂ver din story:

```tsx
export const PrimaryWithAnotherLabel: Story = {
  args: {
    label: 'Just another label',
  },
  parameters: {
    chromatic: {
      disableSnapshot: true,
    },
  },
  // ...
}
```
