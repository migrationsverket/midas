name: 'Publish'

permissions:
  contents: write
  pages: write
  id-token: write

on:
  push:
    tags:
      - '*@v*.*.*'

jobs:
  publish-to-npm:
    uses: migrationsverket/midas/.github/workflows/publish-to-npm.yml@main
    with:
      projects: ${{ contains(github.ref, 'components') && contains(github.ref, 'theme') && contains(github.ref, 'table-styles') && contains(github.ref, 'datepicker-styles') && 'all' || (contains(github.ref, 'components') && 'components') || (contains(github.ref, 'theme') && 'theme') || (contains(github.ref, 'table-styles') && 'table-styles') || (contains(github.ref, 'datepicker-styles') && 'datepicker-styles') || '' }}
    secrets:
      NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
  publish-docs:
    if: ${{ contains(github.ref_name, 'components@') }}
    uses: migrationsverket/midas/.github/workflows/publish-docs.yml@main
