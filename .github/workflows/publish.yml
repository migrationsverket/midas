name: 'Publish'

permissions:
  contents: write
  pages: write
  id-token: write

on:
  push:
    tags:
      - '*@v*.*.*'

env:
  NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
  NPM_CONFIG_PROVENANCE: true

jobs:
  publish-to-npm:
    uses: migrationsverket/midas/.github/workflows/publish-to-npm.yml@main
  publish-docs:
    if: ${{ contains(github.ref_name, 'components@') }}
    uses: migrationsverket/midas/.github/workflows/publish-docs.yml@main
