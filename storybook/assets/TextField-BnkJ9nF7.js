import{j as t}from"./jsx-runtime-DtgEGaVE.js";import{r as f,R}from"./index-BbAIUH2N.js";import{a as q,b as S,c as V}from"./Form-DXGSlahV.js";import{$ as E,a as k,T as r,b as D}from"./TextField.module-Cp8R-C_q.js";import{$ as _,a as A}from"./useField-BphT9t-O.js";import{$ as O,a as F}from"./Text-BeLJy-LL.js";import{$ as g,a as W,b as z,c as j,d as N,y as M,z as G,A as J,o as K,B as Q}from"./useFocusable-DG2xZKJq.js";import{c as U}from"./clsx-B-dksMZM.js";import{B as X}from"./Button-CYeqw5FN.js";const I=f.createContext({});let Y=i=>{let{onHoverStart:e,onHoverChange:a,onHoverEnd:n,...d}=i;return d};const $e=f.forwardRef(function(e,a){[e,a]=g(e,a,I);let{hoverProps:n,isHovered:d}=W(e),{isFocused:s,isFocusVisible:$,focusProps:o}=z({isTextInput:!0,autoFocus:e.autoFocus}),c=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",u=j({...e,values:{isHovered:d,isFocused:s,isFocusVisible:$,isDisabled:e.disabled||!1,isInvalid:c},defaultClassName:"react-aria-TextArea"});return R.createElement("textarea",{...N(Y(e),o,n),...u,ref:a,"data-focused":s||void 0,"data-disabled":e.disabled||void 0,"data-hovered":d||void 0,"data-focus-visible":$||void 0,"data-invalid":c||void 0})}),Z=f.createContext(null),L=f.forwardRef(function(e,a){[e,a]=g(e,a,Z);let{validationBehavior:n}=M(q)||{};var d,s;let $=(s=(d=e.validationBehavior)!==null&&d!==void 0?d:n)!==null&&s!==void 0?s:"native",o=f.useRef(null),[c,u]=g({},o,E),[p,b]=G(),[x,l]=f.useState("input"),{labelProps:m,inputProps:y,descriptionProps:B,errorMessageProps:H,...v}=k({...J(e),inputElementType:x,label:b,validationBehavior:$},u),w=f.useCallback(h=>{u.current=h,h&&l(h instanceof HTMLTextAreaElement?"textarea":"input")},[u]),P=j({...e,values:{isDisabled:e.isDisabled||!1,isInvalid:v.isInvalid,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-TextField"}),T=K(e);return delete T.id,R.createElement("div",{...T,...P,ref:a,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":v.isInvalid||void 0,"data-readonly":e.isReadOnly||void 0,"data-required":e.isRequired||void 0},R.createElement(Q,{values:[[_,{...m,ref:p}],[E,{...N(y,c),ref:w}],[I,{...y,ref:w}],[O,{slots:{description:B,errorMessage:H}}],[S,v]]},P.children))}),ee=({label:i,description:e,errorMessage:a,validationType:n,validate:d,maxLength:s,showCounter:$,...o})=>{const[c,u]=f.useState(o.defaultValue??o.value??""),p=l=>{const m=l.target.value;u(m)},b=l=>n==="ssn"?te.test(l)?null:"Felaktigt personnummer":n==="dossnr"?se.test(l)?null:"Felaktigt dossiernummer":n instanceof RegExp?new RegExp(n).test(l)?null:a==null?void 0:a.toString():s?s&&l.length>s?`Du har angett ${l.length-s} tecken för mycket. Fältet är begränsat till ${s} tecken.`:null:d?d(l):!0,x=()=>s?t.jsxs("span",{className:U(r.count,c.length>s&&r.countExceeded),children:[c.length," / ",s]}):$?t.jsx("span",{className:r.count,children:c.length}):null;return t.jsx(L,{className:r.inputField,validate:b,...o,children:t.jsxs(C,{label:i,description:e,errorMessage:a,children:[t.jsx(x,{}),t.jsxs("div",{className:r.wrap,children:[t.jsx(D,{type:o.type,className:r.input,onChange:p,onBlur:p}),t.jsx(ae,{type:o.type,input:c})]})]})})},ae=({type:i,input:e})=>{const[a,n]=f.useState(!1);return i==="password"?t.jsxs(t.Fragment,{children:[a&&t.jsx(F,{slot:"description",className:r.passwordText,children:e}),t.jsx(X,{variant:"tertiary",onPress:()=>n(!a),className:r.passwordButton,children:a?"Dölj":"Visa"})]}):null},C=({label:i,description:e,errorMessage:a,children:n})=>t.jsxs("div",{className:r.inputWrapper,children:[i&&t.jsx(A,{className:r.label,children:i}),e&&t.jsx(F,{slot:"description",className:r.text,children:e}),t.jsx(V,{className:r.fieldError,children:a}),n]}),te=new RegExp("^(?:(?:19|20)?\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])(?:[-+ ]?\\d{4})?|\\d{4}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])(?:[-+ ]?\\d{4}))$"),se=new RegExp("\\d{1,2}[-+]?\\d{6}(/\\d{1,2})?$");ee.__docgenInfo={description:"",methods:[],displayName:"TextField",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},label:{required:!1,tsType:{name:"string"},description:"Specify label displayed above the TextField"},description:{required:!1,tsType:{name:"string"},description:"Specify description displayed below the label"},errorMessage:{required:!1,tsType:{name:"union",raw:"string | ((validation: ValidationResult) => string) | undefined",elements:[{name:"string"},{name:"unknown"},{name:"undefined"}]},description:"Custom error messages"},validationType:{required:!1,tsType:{name:"union",raw:"'ssn' | 'dossnr' | RegExp",elements:[{name:"literal",value:"'ssn'"},{name:"literal",value:"'dossnr'"},{name:"RegExp"}]},description:"Enable validations or add your own regex"},showCounter:{required:!1,tsType:{name:"boolean"},description:`Whether to show the character counter or not
@default
false`}},composes:["AriaTextFieldProps"]};C.__docgenInfo={description:"",methods:[],displayName:"InputWrapper"};export{L as $,C as I,ee as T,$e as a};
