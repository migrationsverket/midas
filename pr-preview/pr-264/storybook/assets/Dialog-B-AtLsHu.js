import{j as y,d as P,$ as v,c as E,g as O,z as h,A as g}from"./useFocusable-CHclY7qY.js";import{$ as w,a as D,b as N}from"./OverlayArrow-BL2x7DB4.js";import{a as I}from"./Button-OpOVPQEK.js";import{$ as S}from"./RSPContexts-CeCCo7XS.js";import{r as c,R as n}from"./index-BbAIUH2N.js";import{$ as A,a as M,b as B,c as H}from"./useDialog-C9CG0j5b.js";import{$ as K}from"./Hidden-DgLkUl0S.js";import{a as _,$ as z}from"./useOverlayTriggerState-DUrERALe.js";import{$ as L,a as x}from"./DismissButton-BpDDjnBb.js";function W(i,e){let{triggerRef:r,popoverRef:a,isNonModal:t,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:l,...d}=i,{overlayProps:s,underlayProps:b}=L({isOpen:e.isOpen&&!d["data-react-aria-top-layer"],onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!t,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:l},a),{overlayProps:u,arrowProps:f,placement:$}=_({...d,targetRef:r,overlayRef:a,isOpen:e.isOpen,onClose:t?e.close:null});return A({isDisabled:t||!e.isOpen}),y(()=>{if(e.isOpen&&!t&&a.current)return M([a.current])},[t,e.isOpen,a]),{popoverProps:P(s,u),arrowProps:f,underlayProps:b,placement:$}}const j=c.createContext(null),Z=c.forwardRef(function(e,r){[e,r]=v(e,r,j);let a=c.useContext(C),t=z(e),o=e.isOpen!=null||e.defaultOpen!=null||!a?t:a,l=w(r,o.isOpen)||e.isExiting||!1;if(K()){let s=e.children;return typeof s=="function"&&(s=s({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),n.createElement(n.Fragment,null,s)}return o&&!o.isOpen&&!l?null:n.createElement(F,{...e,triggerRef:e.triggerRef,state:o,popoverRef:r,isExiting:l})});function F({state:i,isExiting:e,UNSTABLE_portalContainer:r,...a}){let t=c.useRef(null),[o,l]=c.useState(0);y(()=>{t.current&&i.isOpen&&l(t.current.getBoundingClientRect().width)},[i.isOpen,t]);var d;let{popoverProps:s,underlayProps:b,arrowProps:u,placement:f}=W({...a,offset:(d=a.offset)!==null&&d!==void 0?d:8,arrowSize:o},i),$=a.popoverRef,p=D($,!!f)||a.isEntering||!1,m=E({...a,defaultClassName:"react-aria-Popover",values:{trigger:a.trigger||null,placement:f,isEntering:p,isExiting:e}}),R={...s.style,...m.style};return n.createElement(B,{...a,isExiting:e,portalContainer:r},!a.isNonModal&&i.isOpen&&n.createElement("div",{"data-testid":"underlay",...b,style:{position:"fixed",inset:0}}),n.createElement("div",{...P(O(a),s),...m,ref:$,slot:a.slot||void 0,style:R,"data-trigger":a.trigger,"data-placement":f,"data-entering":p||void 0,"data-exiting":e||void 0},!a.isNonModal&&n.createElement(x,{onDismiss:i.close}),n.createElement(N.Provider,{value:{...u,placement:f,ref:t}},m.children),n.createElement(x,{onDismiss:i.close})))}const T=c.createContext(null),C=c.createContext(null),ee=c.forwardRef(function(e,r){let a=e["aria-labelledby"];[e,r]=v(e,r,T);let{dialogProps:t,titleProps:o}=H({...e,"aria-labelledby":a},r),l=c.useContext(C);!t["aria-label"]&&!t["aria-labelledby"]&&(e["aria-labelledby"]?t["aria-labelledby"]=e["aria-labelledby"]:console.warn('If a Dialog does not contain a <Heading slot="title">, it must have an aria-label or aria-labelledby attribute for accessibility.'));let d=E({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:(l==null?void 0:l.close)||(()=>{})}});return n.createElement("section",{...O(e),...t,...d,ref:r,slot:e.slot||void 0},n.createElement(h,{values:[[S,{slots:{[g]:{},title:{...o,level:2}}}],[I,{slots:{[g]:{},close:{onPress:()=>l==null?void 0:l.close()}}}]]},d.children))});export{C as $,j as a,Z as b,T as c,ee as d};
