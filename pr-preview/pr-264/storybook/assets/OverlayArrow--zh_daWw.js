import{g as o,$ as f,c as d}from"./useFocusable-DMGkbK-i.js";import{r as u}from"./index-i7ZvCR4f.js";import{r as c,R as m}from"./index-BbAIUH2N.js";function g(n,t=!0){let[r,e]=c.useState(!0),i=r&&t;return o(()=>{if(i&&n.current&&"getAnimations"in n.current)for(let a of n.current.getAnimations())a instanceof CSSTransition&&a.cancel()},[n,i]),l(n,i,c.useCallback(()=>e(!1),[])),i}function y(n,t){let[r,e]=c.useState(t?"open":"closed");switch(r){case"open":t||e("exiting");break;case"closed":case"exiting":t&&e("open");break}let i=r==="exiting";return l(n,i,c.useCallback(()=>{e(a=>a==="exiting"?"closed":a)},[])),i}function l(n,t,r){o(()=>{if(t&&n.current){if(!("getAnimations"in n.current)){r();return}let e=n.current.getAnimations();if(e.length===0){r();return}let i=!1;return Promise.all(e.map(a=>a.finished)).then(()=>{i||u.flushSync(()=>{r()})}).catch(()=>{}),()=>{i=!0}}},[n,t,r])}const $=c.createContext({placement:"bottom"}),h=c.forwardRef(function(t,r){[t,r]=f(t,r,$);let e=t.placement,i={position:"absolute",transform:e==="top"||e==="bottom"?"translateX(-50%)":"translateY(-50%)"};e!=null&&(i[e]="100%");let a=d({...t,defaultClassName:"react-aria-OverlayArrow",values:{placement:e}});return a.style&&Object.keys(a.style).forEach(s=>a.style[s]===void 0&&delete a.style[s]),m.createElement("div",{...t,...a,style:{...i,...a.style},ref:r,"data-placement":e})});export{y as $,g as a,$ as b,h as c};
