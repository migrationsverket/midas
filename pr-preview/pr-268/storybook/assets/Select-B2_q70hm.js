import{j as v}from"./jsx-runtime-CBDCb4rg.js";import{r as b,R as $}from"./index-B-o1Wr-g.js";import{a as H,$ as U}from"./Button-BeKNHBLF.js";import{$ as A,a as L,b as G,c as J}from"./ListBox-Bqd_jMsd.js";import{d as Q,e as X,f as Y,g as Z,h as ee,a as ae}from"./Dialog-BjTCWXX6.js";import{o as q,d as k,j as te,G as le,D as ie,$ as T,y as j,c as N,b as oe,z as se,A as re,B as ne}from"./useFocusable-BFvoMS9y.js";import{e as de,f as ce,d as fe,a as ue,b as be}from"./Form-DKIud6kt.js";import{$ as $e}from"./intlStrings-ZMTSFH_M.js";import{b as me,$ as pe}from"./useField-BVKRIrPf.js";import{$ as V}from"./Text-BvZdlzFi.js";import{$ as ve}from"./Collection-BhSMiv7E.js";import{$ as xe}from"./useLocalizedStringFormatter-CABpxIsR.js";import{$ as ye}from"./useSingleSelectListState-SN9L5I06.js";import{$ as ge,a as he}from"./ListKeyboardDelegate-Lv1vouSK.js";import{g as Pe}from"./SelectionManager-DRRiPKTi.js";import{$ as Re}from"./VisuallyHidden-Bqo5Lliv.js";import{C as De}from"./chevron-down-DOK0m5UE.js";import{I as Ie}from"./TextField-CEBpLkqm.js";const O=new WeakMap;function Se(e,a,r){let{keyboardDelegate:o,isDisabled:l,isRequired:s,name:d,validationBehavior:t="aria"}=e,i=ge({usage:"search",sensitivity:"base"}),c=b.useMemo(()=>o||new he(a.collection,a.disabledKeys,r,i),[o,a.collection,a.disabledKeys,i]),{menuTriggerProps:n,menuProps:f}=Q({isDisabled:l,type:"listbox"},a,r),x=u=>{switch(u.key){case"ArrowLeft":{var h,P;u.preventDefault();let I=a.selectedKey!=null?(h=c.getKeyAbove)===null||h===void 0?void 0:h.call(c,a.selectedKey):(P=c.getFirstKey)===null||P===void 0?void 0:P.call(c);I&&a.setSelectedKey(I);break}case"ArrowRight":{var _,E;u.preventDefault();let I=a.selectedKey!=null?(_=c.getKeyBelow)===null||_===void 0?void 0:_.call(c,a.selectedKey):(E=c.getFirstKey)===null||E===void 0?void 0:E.call(c);I&&a.setSelectedKey(I);break}}},{typeSelectProps:p}=Pe({keyboardDelegate:c,selectionManager:a.selectionManager,onTypeSelect(u){a.setSelectedKey(u)}}),{isInvalid:y,validationErrors:R,validationDetails:F}=a.displayValidation,{labelProps:B,fieldProps:D,descriptionProps:g,errorMessageProps:K}=me({...e,labelElementType:"span",isInvalid:y,errorMessage:e.errorMessage||R});p.onKeyDown=p.onKeyDownCapture,delete p.onKeyDownCapture;let w=q(e,{labelable:!0}),m=k(p,n,D),C=te();return O.set(a,{isDisabled:l,isRequired:s,name:d,validationBehavior:t}),{labelProps:{...B,onClick:()=>{if(!e.isDisabled){var u;(u=r.current)===null||u===void 0||u.focus(),ie("keyboard")}}},triggerProps:k(w,{...m,isDisabled:l,onKeyDown:le(m.onKeyDown,x,e.onKeyDown),onKeyUp:e.onKeyUp,"aria-labelledby":[C,m["aria-labelledby"],m["aria-label"]&&!m["aria-labelledby"]?m.id:null].filter(Boolean).join(" "),onFocus(u){a.isFocused||(e.onFocus&&e.onFocus(u),e.onFocusChange&&e.onFocusChange(!0),a.setFocused(!0))},onBlur(u){a.isOpen||(e.onBlur&&e.onBlur(u),e.onFocusChange&&e.onFocusChange(!1),a.setFocused(!1))}}),valueProps:{id:C},menuProps:{...f,autoFocus:a.focusStrategy||!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,disallowEmptySelection:!0,linkBehavior:"selection",onBlur:u=>{u.currentTarget.contains(u.relatedTarget)||(e.onBlur&&e.onBlur(u),e.onFocusChange&&e.onFocusChange(!1),a.setFocused(!1))},"aria-labelledby":[D["aria-labelledby"],m["aria-label"]&&!D["aria-labelledby"]?m.id:null].filter(Boolean).join(" ")},descriptionProps:g,errorMessageProps:K,isInvalid:y,validationErrors:R,validationDetails:F}}function Ce(e,a,r){let o=O.get(a)||{},{autoComplete:l,name:s=o.name,isDisabled:d=o.isDisabled}=e,{validationBehavior:t,isRequired:i}=o,{visuallyHiddenProps:c}=Re();de(e.selectRef,a.selectedKey,a.setSelectedKey),ce({validationBehavior:t,focus:()=>{var f;return(f=r.current)===null||f===void 0?void 0:f.focus()}},a,e.selectRef);var n;return{containerProps:{...c,"aria-hidden":!0,"data-react-aria-prevent-focus":!0,"data-a11y-ignore":"aria-hidden-focus"},inputProps:{style:{display:"none"}},selectProps:{tabIndex:-1,autoComplete:l,disabled:d,required:t==="native"&&i,name:s,value:(n=a.selectedKey)!==null&&n!==void 0?n:"",onChange:f=>a.setSelectedKey(f.target.value)}}}function Fe(e){let{state:a,triggerRef:r,label:o,name:l,isDisabled:s}=e,d=b.useRef(null),{containerProps:t,selectProps:i}=Ce({...e,selectRef:d},a,r);var c;return a.collection.size<=300?$.createElement("div",{...t,"data-testid":"hidden-select-container"},$.createElement("label",null,o,$.createElement("select",{...i,ref:d},$.createElement("option",null),[...a.collection.getKeys()].map(n=>{let f=a.collection.getItem(n);if(f&&f.type==="item")return $.createElement("option",{key:f.key,value:f.key},f.textValue)})))):l?$.createElement("input",{type:"hidden",autoComplete:i.autoComplete,name:l,disabled:s,value:(c=a.selectedKey)!==null&&c!==void 0?c:""}):null}function Be(e){let a=X(e),[r,o]=b.useState(null),l=ye({...e,onSelectionChange:i=>{e.onSelectionChange!=null&&e.onSelectionChange(i),a.close(),s.commitValidation()}}),s=fe({...e,value:l.selectedKey}),[d,t]=b.useState(!1);return{...s,...l,...a,focusStrategy:r,open(i=null){l.collection.size!==0&&(o(i),a.open())},toggle(i=null){l.collection.size!==0&&(o(i),a.toggle())},isFocused:d,setFocused:t}}function Ke(e){return e&&e.__esModule?e.default:e}const M=b.createContext(null),z=b.createContext(null),we=b.forwardRef(function(a,r){[a,r]=T(a,r,M);let{children:o,isDisabled:l=!1,isInvalid:s=!1,isRequired:d=!1}=a,t=b.useMemo(()=>typeof o=="function"?o({isOpen:!1,isDisabled:l,isInvalid:s,isRequired:d,isFocused:!1,isFocusVisible:!1,defaultChildren:null}):o,[o,l,s,d]);return $.createElement(ve,{content:t},i=>$.createElement(_e,{props:a,collection:i,selectRef:r}))});function _e({props:e,selectRef:a,collection:r}){let{validationBehavior:o}=j(ue)||{};var l,s;let d=(s=(l=e.validationBehavior)!==null&&l!==void 0?l:o)!==null&&s!==void 0?s:"native",t=Be({...e,collection:r,children:void 0,validationBehavior:d}),{isFocusVisible:i,focusProps:c}=oe({within:!0}),n=b.useRef(null),[f,x]=se(),{labelProps:p,triggerProps:y,valueProps:R,menuProps:F,descriptionProps:B,errorMessageProps:D,...g}=Se({...re(e),label:x,validationBehavior:d},t,n),[K,w]=b.useState(null),m=b.useCallback(()=>{n.current&&w(n.current.offsetWidth+"px")},[n]);Y({ref:n,onResize:m});let C=b.useMemo(()=>({isOpen:t.isOpen,isFocused:t.isFocused,isFocusVisible:i,isDisabled:e.isDisabled||!1,isInvalid:g.isInvalid||!1,isRequired:e.isRequired||!1}),[t.isOpen,t.isFocused,i,e.isDisabled,g.isInvalid,e.isRequired]),u=N({...e,values:C,defaultClassName:"react-aria-Select"}),h=q(e);delete h.id;let P=b.useRef(null);return $.createElement(ne,{values:[[M,e],[z,t],[W,R],[pe,{...p,ref:f,elementType:"span"}],[H,{...y,ref:n,isPressed:t.isOpen}],[Z,t],[ee,{trigger:"Select",triggerRef:n,scrollRef:P,placement:"bottom start",style:{"--trigger-width":K}}],[A,{...F,ref:P}],[L,t],[V,{slots:{description:B,errorMessage:D}}],[be,g]]},$.createElement("div",{...h,...u,...c,ref:a,slot:e.slot||void 0,"data-focused":t.isFocused||void 0,"data-focus-visible":i||void 0,"data-open":t.isOpen||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":g.isInvalid||void 0,"data-required":e.isRequired||void 0}),$.createElement(Fe,{autoComplete:e.autoComplete,state:t,triggerRef:n,label:x,name:e.name,isDisabled:e.isDisabled}))}const W=b.createContext(null),Ee=b.forwardRef(function(a,r){var o,l;[a,r]=T(a,r,W);let s=b.useContext(z),{placeholder:d}=j(M),t=s.selectedKey!=null?s.collection.getItem(s.selectedKey):null,i=t==null?void 0:t.props.children;typeof i=="function"&&(i=i({isHovered:!1,isPressed:!1,isSelected:!1,isFocused:!1,isFocusVisible:!1,isDisabled:!1,selectionMode:"single",selectionBehavior:"toggle"}));let c=xe(Ke($e),"react-aria-components");var n,f,x;let p=N({...a,defaultChildren:(n=i??d)!==null&&n!==void 0?n:c.format("selectPlaceholder"),defaultClassName:"react-aria-SelectValue",values:{selectedItem:(f=(o=s.selectedItem)===null||o===void 0?void 0:o.value)!==null&&f!==void 0?f:null,selectedText:(x=(l=s.selectedItem)===null||l===void 0?void 0:l.textValue)!==null&&x!==void 0?x:null,isPlaceholder:!t}}),y=q(a);return $.createElement("span",{ref:r,...y,...p,"data-placeholder":!t||void 0},$.createElement(V.Provider,{value:void 0},p.children))}),qe="_button_1n8ts_4",Me="_select_1n8ts_41",ke="_popover_1n8ts_57",Te="_listBoxItem_1n8ts_65",je="_icon_1n8ts_87",S={button:qe,select:Me,popover:ke,listBoxItem:Te,icon:je};function Ne({label:e,description:a,errorMessage:r,children:o,items:l,...s}){const d=$.useRef(null);return v.jsxs(we,{className:S.select,ref:d,...s,children:[v.jsx(Ie,{label:e,description:a,errorMessage:r,children:v.jsxs(U,{className:S.button,children:[v.jsx(Ee,{}),v.jsx("div",{className:S.icon,"aria-hidden":"true",children:v.jsx(De,{size:20,"aria-hidden":!0})})]})}),v.jsx(ae,{className:S.popover,offset:0,UNSTABLE_portalContainer:d.current||void 0,children:v.jsx(G,{items:l,children:o})})]})}function Ve(e){return v.jsx(J,{className:S.listBoxItem,...e})}Ne.__docgenInfo={description:"",methods:[],displayName:"Select",props:{label:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},errorMessage:{required:!1,tsType:{name:"union",raw:"string | ((validation: ValidationResult) => string)",elements:[{name:"string"},{name:"unknown"}]},description:""},items:{required:!1,tsType:{name:"Iterable",elements:[{name:"T"}],raw:"Iterable<T>"},description:""},children:{required:!0,tsType:{name:"union",raw:"React.ReactNode | ((item: T) => React.ReactNode)",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"unknown"}]},description:""}},composes:["Omit"]};Ve.__docgenInfo={description:"",methods:[],displayName:"Item"};export{Ve as I,Ne as S};
