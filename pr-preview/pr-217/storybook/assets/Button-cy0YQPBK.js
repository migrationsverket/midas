import{m as I,l as w,d as y,n as A,$ as F,b as N,a as O,c as R,k as L}from"./useFocusable-CqyV9KfR.js";import{r as v,R as C}from"./index-v7USjxUg.js";import{$ as S}from"./Hidden-UyBzn3h3.js";function V(t,e){let{elementType:n="button",isDisabled:d,onPress:i,onPressStart:s,onPressEnd:r,onPressUp:g,onPressChange:l,preventFocusOnPress:$,allowFocusWhenDisabled:m,onClick:f,href:h,target:P,rel:u,type:c="button"}=t,o;n==="button"?o={type:c,disabled:d}:o={role:"button",tabIndex:d?void 0:0,href:n==="a"&&!d?h:void 0,target:n==="a"?P:void 0,type:n==="input"?c:void 0,disabled:n==="input"?d:void 0,"aria-disabled":!d||n==="input"?void 0:d,rel:n==="a"?u:void 0};let{pressProps:b,isPressed:p}=I({onPressStart:s,onPressEnd:r,onPressChange:l,onPress:i,onPressUp:g,isDisabled:d,preventFocusOnPress:$,ref:e}),{focusableProps:x}=w(t,e);m&&(x.tabIndex=d?-1:x.tabIndex);let _=y(x,b,A(t,{labelable:!0}));return{isPressed:p,buttonProps:y(o,_,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],onClick:D=>{f&&(f(D),console.warn("onClick is deprecated, please use onPress"))}})}}const T=7e3;let a=null;function E(t,e="assertive",n=T){a?a.announce(t,e,n):(a=new M,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?a.announce(t,e,n):setTimeout(()=>{a!=null&&a.isAttached()&&(a==null||a.announce(t,e,n))},100))}function G(t){a&&a.clear(t)}class M{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",d=T){var i,s;if(!this.node)return;let r=document.createElement("div");typeof e=="object"?(r.setAttribute("role","img"),r.setAttribute("aria-labelledby",e["aria-labelledby"])):r.textContent=e,n==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(r):(s=this.politeLog)===null||s===void 0||s.appendChild(r),e!==""&&setTimeout(()=>{r.remove()},d)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const k=v.createContext(null),H=new Set(["form","formAction","formEncType","formMethod","formNoValidate","formTarget","name","value"]),U=v.createContext({}),Y=S(function(e,n){[e,n]=F(e,n,U),e=j(e);let d=e,{isPending:i}=d,{buttonProps:s,isPressed:r}=V(e,n),{focusProps:g,isFocused:l,isFocusVisible:$}=N(e),{hoverProps:m,isHovered:f}=O({...e,isDisabled:e.isDisabled||i}),h={isHovered:f,isPressed:(d.isPressed||r)&&!i,isFocused:l,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:i??!1},P=R({...e,values:h,defaultClassName:"react-aria-Button"}),u=L(s.id),c=L(),o=s["aria-labelledby"];i&&(o?o=`${o} ${c}`:s["aria-label"]&&(o=`${u} ${c}`));let b=v.useRef(i);return v.useEffect(()=>{let p={"aria-labelledby":o||u};(!b.current&&l&&i||b.current&&l&&!i)&&E(p,"assertive"),b.current=i},[i,l,o,u]),C.createElement("button",{...A(e,{propNames:H}),...y(s,g,m),...P,type:s.type==="submit"&&i?"button":s.type,id:u,ref:n,"aria-labelledby":o,slot:e.slot||void 0,"aria-disabled":i?"true":s["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":h.isPressed||void 0,"data-hovered":f||void 0,"data-focused":l||void 0,"data-pending":i||void 0,"data-focus-visible":$||void 0},C.createElement(k.Provider,{value:{id:c}},P.children))});function j(t){return t.isPending&&(t.onPress=void 0,t.onPressStart=void 0,t.onPressEnd=void 0,t.onPressChange=void 0,t.onPressUp=void 0,t.onKeyDown=void 0,t.onKeyUp=void 0,t.onClick=void 0,t.href=void 0),t}export{Y as $,U as a,E as b,V as c,G as d};
