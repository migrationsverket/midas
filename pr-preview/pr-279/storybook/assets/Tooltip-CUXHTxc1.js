import{j as E}from"./jsx-runtime-DtgEGaVE.js";import{c as H}from"./clsx-B-dksMZM.js";import{$ as I,b as N,c as j,d as B,e as k,f as F}from"./OverlayArrow-DDHmBEKE.js";import{e as W,o as A,a as S,d as y,j as q,m as K,x as U,H as V,B as z,K as Y,$ as G,l as J,c as Q}from"./useFocusable-DG2xZKJq.js";import{R as s,r as a}from"./index-BbAIUH2N.js";import{M as X}from"./index-i7ZvCR4f.js";const T=s.createContext(null);function Z(t){let{children:r}=t,e=a.useContext(T),[n,i]=a.useState(0),c=a.useMemo(()=>({parent:e,modalCount:n,addModal(){i(l=>l+1),e&&e.addModal()},removeModal(){i(l=>l-1),e&&e.removeModal()}}),[e,n]);return s.createElement(T.Provider,{value:c},r)}function ee(){let t=a.useContext(T);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:void 0}}}function te(t){let{modalProviderProps:r}=ee();return s.createElement("div",{"data-overlay-container":!0,...t,...r})}function re(t){return s.createElement(Z,null,s.createElement(te,t))}function oe(t){let r=W(),{portalContainer:e=r?null:document.body,...n}=t;if(s.useEffect(()=>{if(e!=null&&e.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[e]),!e)return null;let i=s.createElement(re,n);return X.createPortal(i,e)}function ne(t,r){let e=A(t,{labelable:!0}),{hoverProps:n}=S({onHoverStart:()=>r==null?void 0:r.open(!0),onHoverEnd:()=>r==null?void 0:r.close()});return{tooltipProps:y(e,n,{role:"tooltip"})}}function le(t,r,e){let{isDisabled:n,trigger:i}=t,c=q(),l=a.useRef(!1),o=a.useRef(!1),u=()=>{(l.current||o.current)&&r.open(o.current)},d=g=>{!l.current&&!o.current&&r.close(g)};a.useEffect(()=>{let g=O=>{e&&e.current&&O.key==="Escape"&&(O.stopPropagation(),r.close(!0))};if(r.isOpen)return document.addEventListener("keydown",g,!0),()=>{document.removeEventListener("keydown",g,!0)}},[e,r]);let b=()=>{i!=="focus"&&(U()==="pointer"?l.current=!0:l.current=!1,u())},x=()=>{i!=="focus"&&(o.current=!1,l.current=!1,d())},v=()=>{o.current=!1,l.current=!1,d(!0)},P=()=>{V()&&(o.current=!0,u())},f=()=>{o.current=!1,l.current=!1,d(!0)},{hoverProps:M}=S({isDisabled:n,onHoverStart:b,onHoverEnd:x}),{focusableProps:L}=K({isDisabled:n,onFocus:P,onBlur:f},e);return{triggerProps:{"aria-describedby":r.isOpen?c:void 0,...y(L,M,{onPointerDown:v,onKeyDown:v})},tooltipProps:{id:c}}}const ae=1500,C=500;let p={},ie=0,h=!1,$=null,m=null;function _(t={}){let{delay:r=ae,closeDelay:e=C}=t,{isOpen:n,open:i,close:c}=I(t),l=a.useMemo(()=>`${++ie}`,[]),o=a.useRef(null),u=a.useRef(c),d=()=>{p[l]=v},b=()=>{for(let f in p)f!==l&&(p[f](!0),delete p[f])},x=()=>{o.current&&clearTimeout(o.current),o.current=null,b(),d(),h=!0,i(),$&&(clearTimeout($),$=null),m&&(clearTimeout(m),m=null)},v=f=>{f||e<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},e)),$&&(clearTimeout($),$=null),h&&(m&&clearTimeout(m),m=setTimeout(()=>{delete p[l],m=null,h=!1},Math.max(C,e)))},P=()=>{b(),d(),!n&&!$&&!h?$=setTimeout(()=>{$=null,h=!0,x()},r):n||x()};return a.useEffect(()=>{u.current=c},[c]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),p[l]&&delete p[l]},[l]),{isOpen:n,open:f=>{!f&&r>0&&!o.current?P():x()},close:v}}const w=a.createContext(null),D=a.createContext(null);function ce(t){let r=_(t),e=a.useRef(null),{triggerProps:n,tooltipProps:i}=le(t,r,e);return s.createElement(z,{values:[[w,r],[D,{...i,triggerRef:e}]]},s.createElement(Y,{...n,ref:e},t.children))}const se=a.forwardRef(function({UNSTABLE_portalContainer:r,...e},n){[e,n]=G(e,n,D);let i=a.useContext(w),c=_(e),l=e.isOpen!=null||e.defaultOpen!=null||!i?c:i,o=N(n,l.isOpen)||e.isExiting||!1;return!l.isOpen&&!o?null:s.createElement(oe,{portalContainer:r},s.createElement(de,{...e,tooltipRef:n,isExiting:o}))});function de(t){let r=a.useContext(w),e=a.useRef(null),[n,i]=a.useState(0);J(()=>{e.current&&r.isOpen&&i(e.current.getBoundingClientRect().width)},[r.isOpen,e]);let{overlayProps:c,arrowProps:l,placement:o}=j({placement:t.placement||"top",targetRef:t.triggerRef,overlayRef:t.tooltipRef,offset:t.offset,crossOffset:t.crossOffset,isOpen:r.isOpen,arrowSize:n,arrowBoundaryOffset:t.arrowBoundaryOffset,shouldFlip:t.shouldFlip,onClose:()=>r.close(!0)}),u=B(t.tooltipRef,!!o)||t.isEntering||!1,d=Q({...t,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:t.isExiting,state:r}});t=y(t,c);let{tooltipProps:b}=ne(t,r);return s.createElement("div",{...b,ref:t.tooltipRef,...d,style:{...c.style,...d.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":t.isExiting||void 0},s.createElement(k.Provider,{value:{...l,placement:o,ref:e}},d.children))}const fe='"../theme/tokens.css"',ue='"Inter", sans-serif',$e="#1f1f1f",pe="_tooltip_m1a8t_4",me="_arrow_m1a8t_17",R={tokens:fe,display:ue,gray150:$e,tooltip:pe,arrow:me};function be({children:t,placement:r,className:e,...n}){return E.jsxs(se,{className:H(R.tooltip,e),placement:r,...n,children:[E.jsx(F,{className:R.arrow,children:E.jsx("svg",{width:8,height:8,viewBox:"0 0 8 8",children:E.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),t]})}function xe({children:t,delay:r=0,...e}){return E.jsx(ce,{delay:r,...e,children:t})}be.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},placement:{required:!1,tsType:{name:"union",raw:"'top' | 'right' | 'bottom' | 'left'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'left'"}]},description:""}},composes:["Omit"]};xe.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger",props:{delay:{defaultValue:{value:"0",computed:!1},required:!1}}};export{be as T,xe as a};
