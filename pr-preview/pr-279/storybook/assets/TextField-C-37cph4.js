import{j as t}from"./jsx-runtime-DtgEGaVE.js";import{r as c,R as g}from"./index-BbAIUH2N.js";import{a as S,b as V,c as k}from"./Form-DXGSlahV.js";import{$ as E,a as D,T as r,b as _}from"./TextField.module-Cp8R-C_q.js";import{$ as A,a as O}from"./useField-BphT9t-O.js";import{$ as W,a as j}from"./Text-BeLJy-LL.js";import{$ as y,a as z,b as M,c as N,d as I,y as G,z as J,A as K,o as Q,B as U}from"./useFocusable-DG2xZKJq.js";import{c as F}from"./clsx-B-dksMZM.js";import{B as X}from"./Button-CYeqw5FN.js";const C=c.createContext({});let Y=i=>{let{onHoverStart:e,onHoverChange:a,onHoverEnd:n,...d}=i;return d};const $e=c.forwardRef(function(e,a){[e,a]=y(e,a,C);let{hoverProps:n,isHovered:d}=z(e),{isFocused:s,isFocusVisible:u,focusProps:$}=M({isTextInput:!0,autoFocus:e.autoFocus}),f=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",o=N({...e,values:{isHovered:d,isFocused:s,isFocusVisible:u,isDisabled:e.disabled||!1,isInvalid:f},defaultClassName:"react-aria-TextArea"});return g.createElement("textarea",{...I(Y(e),$,n),...o,ref:a,"data-focused":s||void 0,"data-disabled":e.disabled||void 0,"data-hovered":d||void 0,"data-focus-visible":u||void 0,"data-invalid":f||void 0})}),Z=c.createContext(null),L=c.forwardRef(function(e,a){[e,a]=y(e,a,Z);let{validationBehavior:n}=G(S)||{};var d,s;let u=(s=(d=e.validationBehavior)!==null&&d!==void 0?d:n)!==null&&s!==void 0?s:"native",$=c.useRef(null),[f,o]=y({},$,E),[x,p]=J(),[m,v]=c.useState("input"),{labelProps:l,inputProps:b,descriptionProps:H,errorMessageProps:q,...h}=D({...K(e),inputElementType:m,label:p,validationBehavior:u},o),w=c.useCallback(R=>{o.current=R,R&&v(R instanceof HTMLTextAreaElement?"textarea":"input")},[o]),P=N({...e,values:{isDisabled:e.isDisabled||!1,isInvalid:h.isInvalid,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-TextField"}),T=Q(e);return delete T.id,g.createElement("div",{...T,...P,ref:a,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":h.isInvalid||void 0,"data-readonly":e.isReadOnly||void 0,"data-required":e.isRequired||void 0},g.createElement(U,{values:[[A,{...l,ref:x}],[E,{...I(b,f),ref:w}],[C,{...b,ref:w}],[W,{slots:{description:H,errorMessage:q}}],[V,h]]},P.children))}),ee=({label:i,description:e,errorMessage:a,validationType:n,validate:d,maxLength:s,showCounter:u,className:$,...f})=>{const[o,x]=c.useState(""),p=l=>{const b=l.target.value;x(b)},m=l=>n==="ssn"?te.test(l)?null:"Felaktigt personnummer":n==="dossnr"?se.test(l)?null:"Felaktigt dossiernummer":n instanceof RegExp?new RegExp(n).test(l)?null:a==null?void 0:a.toString():s?s&&l.length>s?`Du har angett ${l.length-s} tecken för mycket. Fältet är begränsat till ${s} tecken.`:null:d?d(l):!0,v=()=>s?t.jsxs("span",{className:F(r.count,o.length>s&&r.countExceeded),children:[o.length," / ",s]}):u?t.jsx("span",{className:r.count,children:o.length}):null;return t.jsx(L,{className:F(r.inputField,$),validate:m,...f,children:t.jsxs(B,{label:i,description:e,errorMessage:a,children:[t.jsx(v,{}),t.jsxs("div",{className:r.wrap,children:[t.jsx(_,{type:f.type,className:r.input,onChange:p,onBlur:p}),t.jsx(ae,{type:f.type,input:o})]})]})})},ae=({type:i,input:e})=>{const[a,n]=c.useState(!1);return i==="password"?t.jsxs(t.Fragment,{children:[a&&t.jsx(j,{slot:"description",className:r.passwordText,children:e}),t.jsx(X,{variant:"tertiary",onPress:()=>n(!a),className:r.passwordButton,children:a?"Dölj":"Visa"})]}):null},B=({label:i,description:e,errorMessage:a,children:n})=>t.jsxs("div",{className:r.inputWrapper,children:[i&&t.jsx(O,{className:r.label,children:i}),e&&t.jsx(j,{slot:"description",className:r.text,children:e}),t.jsx(k,{className:r.fieldError,children:a}),n]}),te=new RegExp("^(?:(?:19|20)?\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])(?:[-+ ]?\\d{4})?|\\d{4}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])(?:[-+ ]?\\d{4}))$"),se=new RegExp("\\d{1,2}[-+]?\\d{6}(/\\d{1,2})?$");ee.__docgenInfo={description:"",methods:[],displayName:"TextField",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},label:{required:!1,tsType:{name:"string"},description:"Specify label displayed above the TextField"},description:{required:!1,tsType:{name:"string"},description:"Specify description displayed below the label"},errorMessage:{required:!1,tsType:{name:"union",raw:"string | ((validation: ValidationResult) => string) | undefined",elements:[{name:"string"},{name:"unknown"},{name:"undefined"}]},description:"Custom error messages"},validationType:{required:!1,tsType:{name:"union",raw:"'ssn' | 'dossnr' | RegExp",elements:[{name:"literal",value:"'ssn'"},{name:"literal",value:"'dossnr'"},{name:"RegExp"}]},description:"Enable validations or add your own regex"},showCounter:{required:!1,tsType:{name:"boolean"},description:`Whether to show the character counter or not
@default
false`}},composes:["AriaTextFieldProps"]};B.__docgenInfo={description:"",methods:[],displayName:"InputWrapper"};export{L as $,B as I,ee as T,$e as a};
