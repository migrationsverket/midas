import{j as h}from"./jsx-runtime-DtgEGaVE.js";import{$ as S,a as N,b as B,c as H}from"./OverlayArrow--zh_daWw.js";import{o as j,a as _,d as E,h as k,m as F,B as W,I as q,w as A,L as M,$ as U,g as V,c as K}from"./useFocusable-DMGkbK-i.js";import{r as a,R as m}from"./index-BbAIUH2N.js";import{$ as z,a as Y}from"./useOverlayTriggerState-BINPOdl7.js";import{$ as G}from"./useModal-CkSuJKTr.js";function J(e,t){let r=j(e,{labelable:!0}),{hoverProps:n}=_({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:E(r,n,{role:"tooltip"})}}function Q(e,t,r){let{isDisabled:n,trigger:i}=e,s=k(),l=a.useRef(!1),o=a.useRef(!1),u=()=>{(l.current||o.current)&&t.open(o.current)},c=v=>{!l.current&&!o.current&&t.close(v)};a.useEffect(()=>{let v=P=>{r&&r.current&&P.key==="Escape"&&(P.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}},[r,t]);let b=()=>{i!=="focus"&&(W()==="pointer"?l.current=!0:l.current=!1,u())},x=()=>{i!=="focus"&&(o.current=!1,l.current=!1,c())},g=()=>{o.current=!1,l.current=!1,c(!0)},y=()=>{q()&&(o.current=!0,u())},f=()=>{o.current=!1,l.current=!1,c(!0)},{hoverProps:I}=_({isDisabled:n,onHoverStart:b,onHoverEnd:x}),{focusableProps:L}=F({isDisabled:n,onFocus:y,onBlur:f},r);return{triggerProps:{"aria-describedby":t.isOpen?s:void 0,...E(L,I,{onPointerDown:g,onKeyDown:g})},tooltipProps:{id:s}}}const X=1500,O=500;let $={},Z=0,T=!1,d=null,p=null;function C(e={}){let{delay:t=X,closeDelay:r=O}=e,{isOpen:n,open:i,close:s}=z(e),l=a.useMemo(()=>`${++Z}`,[]),o=a.useRef(null),u=a.useRef(s),c=()=>{$[l]=g},b=()=>{for(let f in $)f!==l&&($[f](!0),delete $[f])},x=()=>{o.current&&clearTimeout(o.current),o.current=null,b(),c(),T=!0,i(),d&&(clearTimeout(d),d=null),p&&(clearTimeout(p),p=null)},g=f=>{f||r<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},r)),d&&(clearTimeout(d),d=null),T&&(p&&clearTimeout(p),p=setTimeout(()=>{delete $[l],p=null,T=!1},Math.max(O,r)))},y=()=>{b(),c(),!n&&!d&&!T?d=setTimeout(()=>{d=null,T=!0,x()},t):n||x()};return a.useEffect(()=>{u.current=s},[s]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),$[l]&&delete $[l]},[l]),{isOpen:n,open:f=>{!f&&t>0&&!o.current?y():x()},close:g}}const w=a.createContext(null),D=a.createContext(null);function ee(e){let t=C(e),r=a.useRef(null),{triggerProps:n,tooltipProps:i}=Q(e,t,r);return m.createElement(A,{values:[[w,t],[D,{...i,triggerRef:r}]]},m.createElement(M,{...n,ref:r},e.children))}const te=a.forwardRef(function({UNSTABLE_portalContainer:t,...r},n){[r,n]=U(r,n,D);let i=a.useContext(w),s=C(r),l=r.isOpen!=null||r.defaultOpen!=null||!i?s:i,o=S(n,l.isOpen)||r.isExiting||!1;return!l.isOpen&&!o?null:m.createElement(G,{portalContainer:t},m.createElement(re,{...r,tooltipRef:n,isExiting:o}))});function re(e){let t=a.useContext(w),r=a.useRef(null),[n,i]=a.useState(0);V(()=>{r.current&&t.isOpen&&i(r.current.getBoundingClientRect().width)},[t.isOpen,r]);let{overlayProps:s,arrowProps:l,placement:o}=Y({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:t.isOpen,arrowSize:n,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip,onClose:()=>t.close(!0)}),u=N(e.tooltipRef,!!o)||e.isEntering||!1,c=K({...e,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:e.isExiting,state:t}});e=E(e,s);let{tooltipProps:b}=J(e,t);return m.createElement("div",{...b,ref:e.tooltipRef,...c,style:{...s.style,...c.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":e.isExiting||void 0},m.createElement(B.Provider,{value:{...l,placement:o,ref:r}},c.children))}const oe='"../theme/tokens.css"',le='"Inter", sans-serif',ne="#1f1f1f",ae="_tooltip_m1a8t_4",ie="_arrow_m1a8t_17",R={tokens:oe,display:le,gray150:ne,tooltip:ae,arrow:ie};function se({children:e,placement:t,...r}){return h.jsxs(te,{className:R.tooltip,placement:t,...r,children:[h.jsx(H,{className:R.arrow,children:h.jsx("svg",{width:8,height:8,viewBox:"0 0 8 8",children:h.jsx("path",{d:"M0 0 L4 4 L8 0"})})}),e]})}function ce({children:e,delay:t=0,...r}){return h.jsx(ee,{delay:t,...r,children:e})}se.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},placement:{required:!1,tsType:{name:"union",raw:"'top' | 'right' | 'bottom' | 'left'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'left'"}]},description:""}},composes:["Omit"]};ce.__docgenInfo={description:"",methods:[],displayName:"TooltipTrigger",props:{delay:{defaultValue:{value:"0",computed:!1},required:!1}}};export{se as T,ce as a};
