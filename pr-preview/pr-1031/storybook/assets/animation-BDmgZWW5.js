import{e as o}from"./utils-DZrNC9W-.js";import{r as f}from"./index-B4Y469Zs.js";import{r as c}from"./iframe-CzkIVWu3.js";function d(t,n=!0){let[i,a]=c.useState(!0),e=i&&n;return o(()=>{if(e&&t.current&&"getAnimations"in t.current)for(let r of t.current.getAnimations())r instanceof CSSTransition&&r.cancel()},[t,e]),s(t,e,c.useCallback(()=>a(!1),[])),e}function x(t,n){let[i,a]=c.useState(n?"open":"closed");switch(i){case"open":n||a("exiting");break;case"closed":case"exiting":n&&a("open");break}let e=i==="exiting";return s(t,e,c.useCallback(()=>{a(r=>r==="exiting"?"closed":r)},[])),e}function s(t,n,i){o(()=>{if(n&&t.current){if(!("getAnimations"in t.current)){i();return}let a=t.current.getAnimations();if(a.length===0){i();return}let e=!1;return Promise.all(a.map(r=>r.finished)).then(()=>{e||f.flushSync(()=>{i()})}).catch(()=>{}),()=>{e=!0}}},[t,n,i])}export{x as $,d as a};
