import{i as y,d as P,$ as v,c as E,f as O,r as h,F as g}from"./useFocusRing-Dvg3g2cU.js";import{$ as w,a as D,b as N}from"./OverlayArrow-JJIn2pKb.js";import{a as I}from"./Button-BvljoDys.js";import{$ as S}from"./RSPContexts-CeCCo7XS.js";import{r as c,R as i}from"./index-BbAIUH2N.js";import{$ as M,a as A,b as B,c as H}from"./useDialog-NebPq7zq.js";import{a as K}from"./Hidden-ClhOTPkO.js";import{a as _,$ as F}from"./useOverlayTriggerState-yt_HxB-E.js";import{$ as L,a as x}from"./DismissButton-0vAQDsZr.js";function W(n,e){let{triggerRef:r,popoverRef:a,isNonModal:t,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:l,...d}=n,{overlayProps:s,underlayProps:b}=L({isOpen:e.isOpen&&!d["data-react-aria-top-layer"],onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!t,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:l},a),{overlayProps:u,arrowProps:f,placement:$}=_({...d,targetRef:r,overlayRef:a,isOpen:e.isOpen,onClose:t?e.close:null});return M({isDisabled:t||!e.isOpen}),y(()=>{if(e.isOpen&&!t&&a.current)return A([a.current])},[t,e.isOpen,a]),{popoverProps:P(s,u),arrowProps:f,underlayProps:b,placement:$}}const z=c.createContext(null),Z=c.forwardRef(function(e,r){[e,r]=v(e,r,z);let a=c.useContext(C),t=F(e),o=e.isOpen!=null||e.defaultOpen!=null||!a?t:a,l=w(r,o.isOpen)||e.isExiting||!1;if(K()){let s=e.children;return typeof s=="function"&&(s=s({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),i.createElement(i.Fragment,null,s)}return o&&!o.isOpen&&!l?null:i.createElement(T,{...e,triggerRef:e.triggerRef,state:o,popoverRef:r,isExiting:l})});function T({state:n,isExiting:e,UNSTABLE_portalContainer:r,...a}){let t=c.useRef(null),[o,l]=c.useState(0);y(()=>{t.current&&n.isOpen&&l(t.current.getBoundingClientRect().width)},[n.isOpen,t]);var d;let{popoverProps:s,underlayProps:b,arrowProps:u,placement:f}=W({...a,offset:(d=a.offset)!==null&&d!==void 0?d:8,arrowSize:o},n),$=a.popoverRef,p=D($,!!f)||a.isEntering||!1,m=E({...a,defaultClassName:"react-aria-Popover",values:{trigger:a.trigger||null,placement:f,isEntering:p,isExiting:e}}),R={...s.style,...m.style};return i.createElement(B,{...a,isExiting:e,portalContainer:r},!a.isNonModal&&n.isOpen&&i.createElement("div",{"data-testid":"underlay",...b,style:{position:"fixed",inset:0}}),i.createElement("div",{...P(O(a),s),...m,ref:$,slot:a.slot||void 0,style:R,"data-trigger":a.trigger,"data-placement":f,"data-entering":p||void 0,"data-exiting":e||void 0},!a.isNonModal&&i.createElement(x,{onDismiss:n.close}),i.createElement(N.Provider,{value:{...u,placement:f,ref:t}},m.children),i.createElement(x,{onDismiss:n.close})))}const U=c.createContext(null),C=c.createContext(null),ee=c.forwardRef(function(e,r){let a=e["aria-labelledby"];[e,r]=v(e,r,U);let{dialogProps:t,titleProps:o}=H({...e,"aria-labelledby":a},r),l=c.useContext(C);!t["aria-label"]&&!t["aria-labelledby"]&&(e["aria-labelledby"]?t["aria-labelledby"]=e["aria-labelledby"]:console.warn('If a Dialog does not contain a <Heading slot="title">, it must have an aria-label or aria-labelledby attribute for accessibility.'));let d=E({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:(l==null?void 0:l.close)||(()=>{})}});return i.createElement("section",{...O(e),...t,...d,ref:r,slot:e.slot||void 0},i.createElement(h,{values:[[S,{slots:{[g]:{},title:{...o,level:2}}}],[I,{slots:{[g]:{},close:{onPress:()=>l==null?void 0:l.close()}}}]]},d.children))});export{C as $,z as a,U as b,Z as c,ee as d};
