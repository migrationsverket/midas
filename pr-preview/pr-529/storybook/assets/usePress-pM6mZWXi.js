import{u as ve,s as ye,r as G,v as $e,w as re,x as ne,k as C,y as be,z as Te,i as p,n as d,A as he,B as j,C as z,b as B,d as Pe}from"./useFocusRing-CPQALXIu.js";import{r as S,R as ie}from"./index-BbAIUH2N.js";import{_ as Ee}from"./_class_private_field_init-BOtJyCjG.js";import{g as I,$ as ae,m as me}from"./utils-Dv9Ux5aE.js";import{r as Ke}from"./index-cpIEhwLo.js";const se=S.createContext({isNative:!0,open:xe,useHref:t=>t});function Re(t){let{children:n,navigate:i,useHref:s}=t,f=S.useMemo(()=>({isNative:!1,open:(g,v,$,b)=>{le(g,P=>{Se(P,v)?i($,b):w(P,v)})},useHref:s||(g=>g)}),[i,s]);return ie.createElement(se.Provider,{value:f},n)}function oe(){return S.useContext(se)}function Se(t,n){let i=t.getAttribute("target");return(!i||i==="_self")&&t.origin===location.origin&&!t.hasAttribute("download")&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&!n.shiftKey}function w(t,n,i=!0){var s,f;let{metaKey:g,ctrlKey:v,altKey:$,shiftKey:b}=n;ve()&&(!((f=window.event)===null||f===void 0||(s=f.type)===null||s===void 0)&&s.startsWith("key"))&&t.target==="_blank"&&(G()?g=!0:v=!0);let P=ye()&&G()&&!$e()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:g,ctrlKey:v,altKey:$,shiftKey:b}):new MouseEvent("click",{metaKey:g,ctrlKey:v,altKey:$,shiftKey:b,bubbles:!0,cancelable:!0});w.isOpening=i,re(t),t.dispatchEvent(P),w.isOpening=!1}w.isOpening=!1;function le(t,n){if(t instanceof HTMLAnchorElement)n(t);else if(t.hasAttribute("data-href")){let i=document.createElement("a");i.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(i.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(i.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(i.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(i.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(i),n(i),t.removeChild(i)}}function xe(t,n){le(t,i=>w(i,n))}function Fe(t){let n=oe();var i;const s=n.useHref((i=t.href)!==null&&i!==void 0?i:"");return{"data-href":t.href?s:void 0,"data-target":t.target,"data-rel":t.rel,"data-download":t.download,"data-ping":t.ping,"data-referrer-policy":t.referrerPolicy}}function Ge(t){let n=oe();var i;const s=n.useHref((i=t==null?void 0:t.href)!==null&&i!==void 0?i:"");return{href:t!=null&&t.href?s:void 0,target:t==null?void 0:t.target,rel:t==null?void 0:t.rel,download:t==null?void 0:t.download,ping:t==null?void 0:t.ping,referrerPolicy:t==null?void 0:t.referrerPolicy}}let A="default",N="",Y=new WeakMap;function q(t){if(ne()){if(A==="default"){const n=C(t);N=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}A="disabled"}else if(t instanceof HTMLElement||t instanceof SVGElement){let n="userSelect"in t.style?"userSelect":"webkitUserSelect";Y.set(t,t.style[n]),t.style[n]="none"}}function R(t){if(ne()){if(A!=="disabled")return;A="restoring",setTimeout(()=>{be(()=>{if(A==="restoring"){const n=C(t);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=N||""),N="",A="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&Y.has(t)){let n=Y.get(t),i="userSelect"in t.style?"userSelect":"webkitUserSelect";t.style[i]==="none"&&(t.style[i]=n),t.getAttribute("style")===""&&t.removeAttribute("style"),Y.delete(t)}}const fe=ie.createContext({register:()=>{}});fe.displayName="PressResponderContext";function we(t,n){return n.get?n.get.call(t):n.value}function ue(t,n,i){if(!n.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return n.get(t)}function ke(t,n){var i=ue(t,n,"get");return we(t,i)}function Me(t,n,i){if(n.set)n.set.call(t,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}}function J(t,n,i){var s=ue(t,n,"set");return Me(t,s,i),i}function Oe(t){let n=S.useContext(fe);if(n){let{register:i,...s}=n;t=ae(s,t),i()}return Pe(n,t.ref),t}var D=new WeakMap;class X{continuePropagation(){J(this,D,!1)}get shouldStopPropagation(){return ke(this,D)}constructor(n,i,s,f){Ee(this,D,{writable:!0,value:void 0}),J(this,D,!0);var g;let v=(g=f==null?void 0:f.target)!==null&&g!==void 0?g:s.currentTarget;const $=v==null?void 0:v.getBoundingClientRect();let b,P=0,T,L=null;s.clientX!=null&&s.clientY!=null&&(T=s.clientX,L=s.clientY),$&&(T!=null&&L!=null?(b=T-$.left,P=L-$.top):(b=$.width/2,P=$.height/2)),this.type=n,this.pointerType=i,this.target=s.currentTarget,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.x=b,this.y=P}}const Q=Symbol("linkClicked");function Be(t){let{onPress:n,onPressChange:i,onPressStart:s,onPressEnd:f,onPressUp:g,isDisabled:v,isPressed:$,preventFocusOnPress:b,shouldCancelOnPointerExit:P,allowTextSelectionOnPress:T,ref:L,...de}=Oe(t),[pe,W]=S.useState(!1),k=S.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:x,removeAllGlobalListeners:U}=Te(),m=I((e,o)=>{let y=k.current;if(v||y.didFirePressStart)return!1;let a=!0;if(y.isTriggeringEvent=!0,s){let c=new X("pressstart",o,e);s(c),a=c.shouldStopPropagation}return i&&i(!0),y.isTriggeringEvent=!1,y.didFirePressStart=!0,W(!0),a}),E=I((e,o,y=!0)=>{let a=k.current;if(!a.didFirePressStart)return!1;a.didFirePressStart=!1,a.isTriggeringEvent=!0;let c=!0;if(f){let r=new X("pressend",o,e);f(r),c=r.shouldStopPropagation}if(i&&i(!1),W(!1),n&&y&&!v){let r=new X("press",o,e);n(r),c&&(c=r.shouldStopPropagation)}return a.isTriggeringEvent=!1,c}),M=I((e,o)=>{let y=k.current;if(v)return!1;if(g){y.isTriggeringEvent=!0;let a=new X("pressup",o,e);return g(a),y.isTriggeringEvent=!1,a.shouldStopPropagation}return!0}),h=I(e=>{let o=k.current;if(o.isPressed&&o.target){o.didFirePressStart&&o.pointerType!=null&&E(_(o.target,e),o.pointerType,!1),o.isPressed=!1,o.isOverTarget=!1,o.activePointerId=null,o.pointerType=null,U(),T||R(o.target);for(let y of o.disposables)y();o.disposables=[]}}),H=I(e=>{P&&h(e)}),ge=S.useMemo(()=>{let e=k.current,o={onKeyDown(a){if(F(a.nativeEvent,a.currentTarget)&&p(a.currentTarget,d(a.nativeEvent))){var c;te(d(a.nativeEvent),a.key)&&a.preventDefault();let r=!0;if(!e.isPressed&&!a.repeat){e.target=a.currentTarget,e.isPressed=!0,e.pointerType="keyboard",r=m(a,"keyboard");let l=a.currentTarget,u=O=>{F(O,l)&&!O.repeat&&p(l,d(O))&&e.target&&M(_(e.target,O),"keyboard")};x(C(a.currentTarget),"keyup",me(u,y),!0)}r&&a.stopPropagation(),a.metaKey&&G()&&((c=e.metaKeyEvents)===null||c===void 0||c.set(a.key,a.nativeEvent))}else a.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(a){if(!(a&&!p(a.currentTarget,d(a.nativeEvent)))&&a&&a.button===0&&!e.isTriggeringEvent&&!w.isOpening){let c=!0;if(v&&a.preventDefault(),!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||z(a.nativeEvent))){let r=m(a,"virtual"),l=M(a,"virtual"),u=E(a,"virtual");c=r&&l&&u}else if(e.isPressed&&e.pointerType!=="keyboard"){let r=e.pointerType||a.nativeEvent.pointerType||"virtual";c=E(_(a.currentTarget,a),r,!0),e.isOverTarget=!1,h(a)}e.ignoreEmulatedMouseEvents=!1,c&&a.stopPropagation()}}},y=a=>{var c;if(e.isPressed&&e.target&&F(a,e.target)){var r;te(d(a),a.key)&&a.preventDefault();let u=d(a);E(_(e.target,a),"keyboard",p(e.target,d(a))),U(),a.key!=="Enter"&&V(e.target)&&p(e.target,u)&&!a[Q]&&(a[Q]=!0,w(e.target,a,!1)),e.isPressed=!1,(r=e.metaKeyEvents)===null||r===void 0||r.delete(a.key)}else if(a.key==="Meta"&&(!((c=e.metaKeyEvents)===null||c===void 0)&&c.size)){var l;let u=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let O of u.values())(l=e.target)===null||l===void 0||l.dispatchEvent(new KeyboardEvent("keyup",O))}};if(typeof PointerEvent<"u"){o.onPointerDown=r=>{if(r.button!==0||!p(r.currentTarget,d(r.nativeEvent)))return;if(he(r.nativeEvent)){e.pointerType="virtual";return}e.pointerType=r.pointerType;let l=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=r.pointerId,e.target=r.currentTarget,T||q(e.target),l=m(r,e.pointerType);let u=d(r.nativeEvent);"releasePointerCapture"in u&&u.releasePointerCapture(r.pointerId),x(C(r.currentTarget),"pointerup",a,!1),x(C(r.currentTarget),"pointercancel",c,!1)}l&&r.stopPropagation()},o.onMouseDown=r=>{if(p(r.currentTarget,d(r.nativeEvent))&&r.button===0){if(b){let l=j(r.target);l&&e.disposables.push(l)}r.stopPropagation()}},o.onPointerUp=r=>{!p(r.currentTarget,d(r.nativeEvent))||e.pointerType==="virtual"||r.button===0&&M(r,e.pointerType||r.pointerType)},o.onPointerEnter=r=>{r.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,m(_(e.target,r),e.pointerType))},o.onPointerLeave=r=>{r.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,E(_(e.target,r),e.pointerType,!1),H(r))};let a=r=>{if(r.pointerId===e.activePointerId&&e.isPressed&&r.button===0&&e.target){if(p(e.target,d(r))&&e.pointerType!=null){let l=!1,u=setTimeout(()=>{e.isPressed&&e.target instanceof HTMLElement&&(l?h(r):(re(e.target),e.target.click()))},80);x(r.currentTarget,"click",()=>l=!0,!0),e.disposables.push(()=>clearTimeout(u))}else h(r);e.isOverTarget=!1}},c=r=>{h(r)};o.onDragStart=r=>{p(r.currentTarget,d(r.nativeEvent))&&h(r)}}else{o.onMouseDown=r=>{if(r.button!==0||!p(r.currentTarget,d(r.nativeEvent)))return;if(e.ignoreEmulatedMouseEvents){r.stopPropagation();return}if(e.isPressed=!0,e.isOverTarget=!0,e.target=r.currentTarget,e.pointerType=z(r.nativeEvent)?"virtual":"mouse",Ke.flushSync(()=>m(r,e.pointerType))&&r.stopPropagation(),b){let u=j(r.target);u&&e.disposables.push(u)}x(C(r.currentTarget),"mouseup",a,!1)},o.onMouseEnter=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;let l=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,l=m(r,e.pointerType)),l&&r.stopPropagation()},o.onMouseLeave=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;let l=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,l=E(r,e.pointerType,!1),H(r)),l&&r.stopPropagation()},o.onMouseUp=r=>{p(r.currentTarget,d(r.nativeEvent))&&!e.ignoreEmulatedMouseEvents&&r.button===0&&M(r,e.pointerType||"mouse")};let a=r=>{if(r.button===0){if(e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&e.target.contains(r.target)&&e.pointerType!=null||h(r),e.isOverTarget=!1}};o.onTouchStart=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;let l=_e(r.nativeEvent);if(!l)return;e.activePointerId=l.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=r.currentTarget,e.pointerType="touch",T||q(e.target),m(K(e.target,r),e.pointerType)&&r.stopPropagation(),x(B(r.currentTarget),"scroll",c,!0)},o.onTouchMove=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;if(!e.isPressed){r.stopPropagation();return}let l=Z(r.nativeEvent,e.activePointerId),u=!0;l&&ee(l,r.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,u=m(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,u=E(K(e.target,r),e.pointerType,!1),H(K(e.target,r))),u&&r.stopPropagation()},o.onTouchEnd=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;if(!e.isPressed){r.stopPropagation();return}let l=Z(r.nativeEvent,e.activePointerId),u=!0;l&&ee(l,r.currentTarget)&&e.pointerType!=null?(M(K(e.target,r),e.pointerType),u=E(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(u=E(K(e.target,r),e.pointerType,!1)),u&&r.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!T&&R(e.target),U()},o.onTouchCancel=r=>{p(r.currentTarget,d(r.nativeEvent))&&(r.stopPropagation(),e.isPressed&&h(K(e.target,r)))};let c=r=>{e.isPressed&&p(d(r),e.target)&&h({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};o.onDragStart=r=>{p(r.currentTarget,d(r.nativeEvent))&&h(r)}}return o},[x,v,b,U,T,h,H,E,m,M]);return S.useEffect(()=>{let e=k.current;return()=>{var o;T||R((o=e.target)!==null&&o!==void 0?o:void 0);for(let y of e.disposables)y();e.disposables=[]}},[T]),{isPressed:$||pe,pressProps:ae(de,ge)}}function V(t){return t.tagName==="A"&&t.hasAttribute("href")}function F(t,n){const{key:i,code:s}=t,f=n,g=f.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||s==="Space")&&!(f instanceof B(f).HTMLInputElement&&!ce(f,i)||f instanceof B(f).HTMLTextAreaElement||f.isContentEditable)&&!((g==="link"||!g&&V(f))&&i!=="Enter")}function _e(t){const{targetTouches:n}=t;return n.length>0?n[0]:null}function Z(t,n){const i=t.changedTouches;for(let s=0;s<i.length;s++){const f=i[s];if(f.identifier===n)return f}return null}function K(t,n){let i=0,s=0;return n.targetTouches&&n.targetTouches.length===1&&(i=n.targetTouches[0].clientX,s=n.targetTouches[0].clientY),{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:s}}function _(t,n){let i=n.clientX,s=n.clientY;return{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:s}}function Ce(t){let n=0,i=0;return t.width!==void 0?n=t.width/2:t.radiusX!==void 0&&(n=t.radiusX),t.height!==void 0?i=t.height/2:t.radiusY!==void 0&&(i=t.radiusY),{top:t.clientY-i,right:t.clientX+n,bottom:t.clientY+i,left:t.clientX-n}}function Ae(t,n){return!(t.left>n.right||n.left>t.right||t.top>n.bottom||n.top>t.bottom)}function ee(t,n){let i=n.getBoundingClientRect(),s=Ce(t);return Ae(i,s)}function Ie(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!V(t)}function te(t,n){return t instanceof HTMLInputElement?!ce(t,n):Ie(t)}const Le=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ce(t,n){return t.type==="checkbox"||t.type==="radio"?n===" ":Le.has(t.type)}export{Be as $,fe as a,oe as b,Ge as c,Se as d,Re as e,w as f,Fe as g};
