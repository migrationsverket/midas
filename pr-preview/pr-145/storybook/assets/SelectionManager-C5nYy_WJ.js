import{r as p,R as L}from"./index-ClcD9ViR.js";import{r as ue}from"./index-ZuzByk-F.js";import{$ as fe}from"./FocusScope-BSY4Zh8-.js";import{J as de,m as ce,b as X,K as he,G as ye,o as ae,t as Z,L as _,M as ee,N as pe}from"./useFocusable-ByLM5O5C.js";import{a as te,b as ve,c as le}from"./scrollIntoView-D9xnEt38.js";import{$ as ge}from"./context-DDnqLcyX.js";import{$ as me}from"./useDescription-Dw4F0l5g.js";import{$ as be}from"./useControlledState--51_K5zJ.js";const Ke=500;function Se(i){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:s,threshold:o=Ke,accessibilityDescription:c}=i;const f=p.useRef(void 0);let{addGlobalListener:u,removeGlobalListener:g}=de(),{pressProps:y}=ce({isDisabled:e,onPressStart(d){if(d.continuePropagation(),(d.pointerType==="mouse"||d.pointerType==="touch")&&(t&&t({...d,type:"longpressstart"}),f.current=setTimeout(()=>{d.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),s&&s({...d,type:"longpress"}),f.current=void 0},o),d.pointerType==="touch")){let h=F=>{F.preventDefault()};u(d.target,"contextmenu",h,{once:!0}),u(window,"pointerup",()=>{setTimeout(()=>{g(d.target,"contextmenu",h)},30)},{once:!0})}},onPressEnd(d){f.current&&clearTimeout(f.current),l&&(d.pointerType==="mouse"||d.pointerType==="touch")&&l({...d,type:"longpressend"})}}),b=me(s&&!e?c:void 0);return{longPressProps:X(y,b)}}function Q(i){return he()?i.altKey:i.ctrlKey}function U(i){return ye()?i.metaKey:i.ctrlKey}const $e=1e3;function we(i){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=i,s=p.useRef({search:"",timeout:null}).current,o=c=>{let f=xe(c.key);if(!f||c.ctrlKey||c.metaKey||!c.currentTarget.contains(c.target))return;f===" "&&s.search.trim().length>0&&(c.preventDefault(),"continuePropagation"in c||c.stopPropagation()),s.search+=f;let u=e.getKeyForSearch(s.search,t.focusedKey);u==null&&(u=e.getKeyForSearch(s.search)),u!=null&&(t.setFocusedKey(u),l&&l(u)),clearTimeout(s.timeout),s.timeout=setTimeout(()=>{s.search=""},$e)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?o:null}}}function xe(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function Ue(i){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:s=!1,shouldFocusWrap:o=!1,disallowEmptySelection:c=!1,disallowSelectAll:f=!1,selectOnFocus:u=e.selectionBehavior==="replace",disallowTypeAhead:g=!1,shouldUseVirtualFocus:y,allowsTabNavigation:b=!1,isVirtualized:d,scrollRef:h=l,linkBehavior:F="action"}=i,{direction:w}=ge(),v=ae(),D=n=>{if(n.altKey&&n.key==="Tab"&&n.preventDefault(),!l.current.contains(n.target))return;const m=(a,R)=>{if(a!=null){if(e.isLink(a)&&F==="selection"&&u&&!Q(n)){ue.flushSync(()=>{e.setFocusedKey(a,R)});let O=h.current.querySelector(`[data-key="${CSS.escape(a.toString())}"]`),N=e.getItemProps(a);v.open(O,n,N.href,N.routerOptions);return}if(e.setFocusedKey(a,R),e.isLink(a)&&F==="override")return;n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):u&&!Q(n)&&e.replaceSelection(a)}};switch(n.key){case"ArrowDown":if(t.getKeyBelow){var x,$,I;let a=e.focusedKey!=null?(x=t.getKeyBelow)===null||x===void 0?void 0:x.call(t,e.focusedKey):($=t.getFirstKey)===null||$===void 0?void 0:$.call(t);a==null&&o&&(a=(I=t.getFirstKey)===null||I===void 0?void 0:I.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),m(a))}break;case"ArrowUp":if(t.getKeyAbove){var A,z,r;let a=e.focusedKey!=null?(A=t.getKeyAbove)===null||A===void 0?void 0:A.call(t,e.focusedKey):(z=t.getLastKey)===null||z===void 0?void 0:z.call(t);a==null&&o&&(a=(r=t.getLastKey)===null||r===void 0?void 0:r.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),m(a))}break;case"ArrowLeft":if(t.getKeyLeftOf){var k,G,q;let a=(k=t.getKeyLeftOf)===null||k===void 0?void 0:k.call(t,e.focusedKey);a==null&&o&&(a=w==="rtl"?(G=t.getFirstKey)===null||G===void 0?void 0:G.call(t,e.focusedKey):(q=t.getLastKey)===null||q===void 0?void 0:q.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),m(a,w==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var W,H,j;let a=(W=t.getKeyRightOf)===null||W===void 0?void 0:W.call(t,e.focusedKey);a==null&&o&&(a=w==="rtl"?(H=t.getLastKey)===null||H===void 0?void 0:H.call(t,e.focusedKey):(j=t.getFirstKey)===null||j===void 0?void 0:j.call(t,e.focusedKey)),a!=null&&(n.preventDefault(),m(a,w==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){n.preventDefault();let a=t.getFirstKey(e.focusedKey,U(n));e.setFocusedKey(a),U(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):u&&e.replaceSelection(a)}break;case"End":if(t.getLastKey){n.preventDefault();let a=t.getLastKey(e.focusedKey,U(n));e.setFocusedKey(a),U(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):u&&e.replaceSelection(a)}break;case"PageDown":if(t.getKeyPageBelow){let a=t.getKeyPageBelow(e.focusedKey);a!=null&&(n.preventDefault(),m(a))}break;case"PageUp":if(t.getKeyPageAbove){let a=t.getKeyPageAbove(e.focusedKey);a!=null&&(n.preventDefault(),m(a))}break;case"a":U(n)&&e.selectionMode==="multiple"&&f!==!0&&(n.preventDefault(),e.selectAll());break;case"Escape":!c&&e.selectedKeys.size!==0&&(n.stopPropagation(),n.preventDefault(),e.clearSelection());break;case"Tab":if(!b){if(n.shiftKey)l.current.focus();else{let a=fe(l.current,{tabbable:!0}),R,O;do O=a.lastChild(),O&&(R=O);while(O);R&&!R.contains(document.activeElement)&&ee(R)}break}}},K=p.useRef({top:0,left:0});te(h,"scroll",d?null:()=>{K.current={top:h.current.scrollTop,left:h.current.scrollLeft}});let S=n=>{if(e.isFocused){n.currentTarget.contains(n.target)||e.setFocused(!1);return}if(n.currentTarget.contains(n.target)){if(e.setFocused(!0),e.focusedKey==null){let $=A=>{A!=null&&(e.setFocusedKey(A),u&&e.replaceSelection(A))},I=n.relatedTarget;var m,x;I&&n.currentTarget.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING?$((m=e.lastSelectedKey)!==null&&m!==void 0?m:t.getLastKey()):$((x=e.firstSelectedKey)!==null&&x!==void 0?x:t.getFirstKey())}else d||(h.current.scrollTop=K.current.top,h.current.scrollLeft=K.current.left);if(e.focusedKey!=null){let $=h.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);$&&($.contains(document.activeElement)||ee($),_()==="keyboard"&&le($,{containingElement:l.current}))}}},T=n=>{n.currentTarget.contains(n.relatedTarget)||e.setFocused(!1)};const E=p.useRef(s);p.useEffect(()=>{if(E.current){let n=null;s==="first"&&(n=t.getFirstKey()),s==="last"&&(n=t.getLastKey());let m=e.selectedKeys;if(m.size){for(let x of m)if(e.canSelectItem(x)){n=x;break}}e.setFocused(!0),e.setFocusedKey(n),n==null&&!y&&Z(l.current)}},[]);let M=p.useRef(e.focusedKey);p.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==M.current||E.current)&&(h!=null&&h.current)){let n=_(),m=l.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);if(!m)return;(n==="keyboard"||E.current)&&(ve(h.current,m),n!=="virtual"&&le(m,{containingElement:l.current}))}!y&&e.isFocused&&e.focusedKey==null&&M.current!=null&&Z(l.current),M.current=e.focusedKey,E.current=!1}),te(l,"react-aria-focus-scope-restore",n=>{n.preventDefault(),e.setFocused(!0)});let C={onKeyDown:D,onFocus:S,onBlur:T,onMouseDown(n){h.current===n.target&&n.preventDefault()}},{typeSelectProps:V}=we({keyboardDelegate:t,selectionManager:e});g||(C=X(V,C));let B;return y||(B=e.focusedKey==null?0:-1),{collectionProps:{...C,tabIndex:B}}}function ze(i){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:s,shouldUseVirtualFocus:o,focus:c,isDisabled:f,onAction:u,allowsDifferentPressOrigin:g,linkBehavior:y="action"}=i,b=ae(),d=r=>{if(r.pointerType==="keyboard"&&Q(r))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(y==="selection"){let k=e.getItemProps(t);b.open(l.current,r,k.href,k.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(y==="override"||y==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):r&&r.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||r&&(U(r)||r.pointerType==="touch"||r.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};p.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!o&&(c?c():document.activeElement!==l.current&&Z(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,o]),f=f||e.isDisabled(t);let h={};!o&&!f?h={tabIndex:t===e.focusedKey?0:-1,onFocus(r){r.target===l.current&&e.setFocusedKey(t)}}:f&&(h.onMouseDown=r=>{r.preventDefault()});let F=e.isLink(t)&&y==="override",w=e.isLink(t)&&y!=="selection"&&y!=="none",v=!f&&e.canSelectItem(t)&&!F,D=(u||w)&&!f,K=D&&(e.selectionBehavior==="replace"?!v:!v||e.isEmpty),S=D&&v&&e.selectionBehavior==="replace",T=K||S,E=p.useRef(null),M=T&&v,C=p.useRef(!1),V=p.useRef(!1),B=r=>{if(u&&u(),w){let k=e.getItemProps(t);b.open(l.current,r,k.href,k.routerOptions)}},n={};s?(n.onPressStart=r=>{E.current=r.pointerType,C.current=M,r.pointerType==="keyboard"&&(!T||se())&&d(r)},g?(n.onPressUp=K?null:r=>{r.pointerType!=="keyboard"&&v&&d(r)},n.onPress=K?B:null):n.onPress=r=>{if(K||S&&r.pointerType!=="mouse"){if(r.pointerType==="keyboard"&&!ie())return;B(r)}else r.pointerType!=="keyboard"&&v&&d(r)}):(n.onPressStart=r=>{E.current=r.pointerType,C.current=M,V.current=K,v&&(r.pointerType==="mouse"&&!K||r.pointerType==="keyboard"&&(!D||se()))&&d(r)},n.onPress=r=>{(r.pointerType==="touch"||r.pointerType==="pen"||r.pointerType==="virtual"||r.pointerType==="keyboard"&&T&&ie()||r.pointerType==="mouse"&&V.current)&&(T?B(r):v&&d(r))}),h["data-key"]=t,n.preventFocusOnPress=o;let{pressProps:m,isPressed:x}=ce(n),$=S?r=>{E.current==="mouse"&&(r.stopPropagation(),r.preventDefault(),B(r))}:void 0,{longPressProps:I}=Se({isDisabled:!M,onLongPress(r){r.pointerType==="touch"&&(d(r),e.setSelectionBehavior("toggle"))}}),A=r=>{E.current==="touch"&&C.current&&r.preventDefault()},z=e.isLink(t)?r=>{pe.isOpening||r.preventDefault()}:void 0;return{itemProps:X(h,v||K?m:{},M?I:{},{onDoubleClick:$,onDragStartCapture:A,onClick:z}),isPressed:x,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:f,allowsSelection:v,hasAction:T}}function ie(){let i=window.event;return(i==null?void 0:i.key)==="Enter"}function se(){let i=window.event;return(i==null?void 0:i.key)===" "||(i==null?void 0:i.code)==="Space"}class Pe{build(e,t){return this.context=t,ne(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(L.isValidElement(t)&&t.type===L.Fragment)yield*this.iterateCollection({children:t.props.children,items:l});else if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];L.Children.forEach(t,c=>{s.push(c)});let o=0;for(let c of s){let f=this.getFullNode({element:c,index:o},{});for(let u of f)o++,yield u}}}getKey(e,t,l,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let o=t.value;if(o!=null){var c;let f=(c=o.key)!==null&&c!==void 0?c:o.id;if(f==null)throw new Error("No key found for item");return f}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,s){if(L.isValidElement(e.element)&&e.element.type===L.Fragment){let u=[];L.Children.forEach(e.element.props.children,y=>{u.push(y)});let g=e.index;for(const y of u)yield*this.getFullNode({element:y,index:g++},t,l,s);return}let o=e.element;if(!o&&e.value&&t&&t.renderer){let u=this.cache.get(e.value);if(u&&(!u.shouldInvalidate||!u.shouldInvalidate(this.context))){u.index=e.index,u.parentKey=s?s.key:null,yield u;return}o=t.renderer(e.value)}if(L.isValidElement(o)){let u=o.type;if(typeof u!="function"&&typeof u.getCollectionNode!="function"){let d=typeof o.type=="function"?o.type.name:o.type;throw new Error(`Unknown element <${d}> in collection.`)}let g=u.getCollectionNode(o.props,this.context),y=e.index,b=g.next();for(;!b.done&&b.value;){let d=b.value;e.index=y;let h=d.key;h||(h=d.element?null:this.getKey(o,e,t,l));let w=[...this.getFullNode({...d,key:h,index:y,wrapper:Fe(e.wrapper,d.wrapper)},this.getChildState(t,d),l?`${l}${o.key}`:o.key,s)];for(let v of w){if(v.value=d.value||e.value,v.value&&this.cache.set(v.value,v),e.type&&v.type!==e.type)throw new Error(`Unsupported type <${J(v.type)}> in <${J(s.type)}>. Only <${J(e.type)}> is supported.`);y++,yield v}b=g.next(w)}return}if(e.key==null)return;let c=this,f={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:ne(function*(){if(!e.hasChildNodes)return;let u=0;for(let g of e.childNodes()){g.key!=null&&(g.key=`${f.key}${g.key}`),g.index=u;let y=c.getFullNode(g,c.getChildState(t,g),f.key,f);for(let b of y)u++,yield b}})};yield f}constructor(){this.cache=new WeakMap}}function ne(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function Fe(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function J(i){return i[0].toUpperCase()+i.slice(1)}function Ve(i,e,t){let l=p.useMemo(()=>new Pe,[]),{children:s,items:o,collection:c}=i;return p.useMemo(()=>{if(c)return c;let u=l.build({children:s,items:o},t);return e(u)},[l,s,o,c,t,e])}function De(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function Te(i){return Ee(i,0)}function Ee(i,e){if(e<0)return;let t=0;for(let l of i){if(t===e)return l;t++}}function Ge(i){let e;for(let t of i)e=t;return e}function Y(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...re(i,e),e],s=[...re(i,t),t],o=l.slice(0,s.length).findIndex((c,f)=>c!==s[f]);return o!==-1?(e=l[o],t=s[o],e.index-t.index):l.findIndex(c=>c===t)>=0?1:(s.findIndex(c=>c===e)>=0,-1)}function re(i,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=i.getItem(e.parentKey),t.unshift(e);return t}class P extends Set{constructor(e,t,l){super(e),e instanceof P?(this.anchorKey=t??e.anchorKey,this.currentKey=l??e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function Ie(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function qe(i){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:s="toggle",disabledBehavior:o="all"}=i,c=p.useRef(!1),[,f]=p.useState(!1),u=p.useRef(null),g=p.useRef(null),[,y]=p.useState(null),b=p.useMemo(()=>oe(i.selectedKeys),[i.selectedKeys]),d=p.useMemo(()=>oe(i.defaultSelectedKeys,new P),[i.defaultSelectedKeys]),[h,F]=be(b,d,i.onSelectionChange),w=p.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[v,D]=p.useState(s);s==="replace"&&v==="toggle"&&typeof h=="object"&&h.size===0&&D("replace");let K=p.useRef(s);return p.useEffect(()=>{s!==K.current&&(D(s),K.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:v,setSelectionBehavior:D,get isFocused(){return c.current},setFocused(S){c.current=S,f(S)},get focusedKey(){return u.current},get childFocusStrategy(){return g.current},setFocusedKey(S,T="first"){u.current=S,g.current=T,y(S)},selectedKeys:h,setSelectedKeys(S){(l||!Ie(S,h))&&F(S)},disabledKeys:w,disabledBehavior:o}}function oe(i,e){return i?i==="all"?"all":new P(i):e}class We{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&Y(this.collection,l,e)<0)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&Y(this.collection,l,e)>0)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new P([e],e,e);else{let o=this.state.selectedKeys;var l;let c=(l=o.anchorKey)!==null&&l!==void 0?l:e;t=new P(o,c,e);var s;for(let f of this.getKeyRange(c,(s=o.currentKey)!==null&&s!==void 0?s:e))t.delete(f);for(let f of this.getKeyRange(e,c))this.canSelectItem(f)&&t.add(f)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),s=this.collection.getItem(t);return l&&s?Y(this.collection,l,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var l;if(!((l=this.layoutDelegate)===null||l===void 0)&&l.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let s=[],o=e;for(;o!=null;){let c=this.collection.getItem(o);if((c&&c.type==="item"||c.type==="cell"&&this.allowsCellSelection)&&s.push(o),o===t)return s;o=this.collection.getKeyAfter(o)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new P(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new P([e],e,e):new P;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new P;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l!=null;){if(this.canSelectItem(l)){let s=this.collection.getItem(l);s.type==="item"&&e.push(l),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(Te(De(s,this.collection)).key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new P)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let l=this.collection.getItem(e);return!(!l||!(l==null||(t=l.props)===null||t===void 0)&&t.isDisabled||l.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,l;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,l){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=l==null?void 0:l.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null,this.layoutDelegate=(l==null?void 0:l.layoutDelegate)||null}}export{qe as $,Ve as a,We as b,we as c,Ue as d,De as e,ze as f,Se as g,Ge as h,Ee as i,Te as j};
