import{j as g,K as _,G as P,c as L,h as k,C as B,y as T,o as S,$ as A,g as M,w as K,J as R}from"./useFocusable-CD-koIwE.js";import{r as s,R as $}from"./index-BbAIUH2N.js";import{a as V}from"./Button-QjS3GA-B.js";import{$ as q}from"./RSPContexts-CeCCo7XS.js";import{r as J,M as Y}from"./index-i7ZvCR4f.js";import{b as z}from"./Hidden-Dq_nQgIS.js";import{a as G,b as X,$ as j,c as N}from"./useOverlayTriggerState-BhC3EiyM.js";import{a as D}from"./useCollator-D6uckuoG.js";import{$ as U}from"./PressResponder-64CRh0gV.js";import{a as Q}from"./FocusScope-DMgXehbl.js";function Z(t,e=!0){let[r,n]=s.useState(!0),l=r&&e;return g(()=>{if(l&&t.current&&"getAnimations"in t.current)for(let o of t.current.getAnimations())o instanceof CSSTransition&&o.cancel()},[t,l]),F(t,l,s.useCallback(()=>n(!1),[])),l}function ee(t,e){let[r,n]=s.useState(e?"open":"closed");switch(r){case"open":e||n("exiting");break;case"closed":case"exiting":e&&n("open");break}let l=r==="exiting";return F(t,l,s.useCallback(()=>{n(o=>o==="exiting"?"closed":o)},[])),l}function F(t,e,r){g(()=>{if(e&&t.current){if(!("getAnimations"in t.current)){r();return}let n=t.current.getAnimations();if(n.length===0){r();return}let l=!1;return Promise.all(n.map(o=>o.finished)).then(()=>{l||J.flushSync(()=>{r()})}).catch(()=>{}),()=>{l=!0}}},[t,e,r])}const w=typeof document<"u"&&window.visualViewport,te=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let h=0,C;function ne(t={}){let{isDisabled:e}=t;g(()=>{if(!e)return h++,h===1&&(_()?C=le():C=re()),()=>{h--,h===0&&C()}},[e])}function re(){return P(p(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),p(document.documentElement,"overflow","hidden"))}function le(){let t,e,r=c=>{t=D(c.target,!0),!(t===document.documentElement&&t===document.body)&&t instanceof HTMLElement&&window.getComputedStyle(t).overscrollBehavior==="auto"&&(e=p(t,"overscrollBehavior","contain"))},n=c=>{if(!t||t===document.documentElement||t===document.body){c.preventDefault();return}t.scrollHeight===t.clientHeight&&t.scrollWidth===t.clientWidth&&c.preventDefault()},l=()=>{e&&e()},o=c=>{let i=c.target;ae(i)&&(u(),i.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{i.style.transform="",w&&(w.height<window.innerHeight?requestAnimationFrame(()=>{O(i)}):w.addEventListener("resize",()=>O(i),{once:!0}))}))},d=null,u=()=>{if(d)return;let c=()=>{window.scrollTo(0,0)},i=window.pageXOffset,b=window.pageYOffset;d=P(x(window,"scroll",c),p(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),p(document.documentElement,"overflow","hidden"),p(document.body,"marginTop",`-${b}px`),()=>{window.scrollTo(i,b)}),window.scrollTo(0,0)},a=P(x(document,"touchstart",r,{passive:!1,capture:!0}),x(document,"touchmove",n,{passive:!1,capture:!0}),x(document,"touchend",l,{passive:!1,capture:!0}),x(document,"focus",o,!0));return()=>{e==null||e(),d==null||d(),a()}}function p(t,e,r){let n=t.style[e];return t.style[e]=r,()=>{t.style[e]=n}}function x(t,e,r,n){return t.addEventListener(e,r,n),()=>{t.removeEventListener(e,r,n)}}function O(t){let e=document.scrollingElement||document.documentElement,r=t;for(;r&&r!==e;){let n=D(r);if(n!==document.documentElement&&n!==document.body&&n!==r){let l=n.getBoundingClientRect().top,o=r.getBoundingClientRect().top;o>l+r.clientHeight&&(n.scrollTop+=o-l)}r=n.parentElement}}function ae(t){return t instanceof HTMLInputElement&&!te.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}let v=new WeakMap,m=[];function oe(t,e=document.body){let r=new Set(t),n=new Set,l=a=>{for(let f of a.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))r.add(f);let c=f=>{if(r.has(f)||f.parentElement&&n.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let E of r)if(f.contains(E))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},i=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),b=c(a);if(b===NodeFilter.FILTER_ACCEPT&&o(a),b!==NodeFilter.FILTER_REJECT){let f=i.nextNode();for(;f!=null;)o(f),f=i.nextNode()}},o=a=>{var c;let i=(c=v.get(a))!==null&&c!==void 0?c:0;a.getAttribute("aria-hidden")==="true"&&i===0||(i===0&&a.setAttribute("aria-hidden","true"),n.add(a),v.set(a,i+1))};m.length&&m[m.length-1].disconnect(),l(e);let d=new MutationObserver(a=>{for(let c of a)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...r,...n].some(i=>i.contains(c.target))){for(let i of c.removedNodes)i instanceof Element&&(r.delete(i),n.delete(i));for(let i of c.addedNodes)(i instanceof HTMLElement||i instanceof SVGElement)&&(i.dataset.liveAnnouncer==="true"||i.dataset.reactAriaTopLayer==="true")?r.add(i):i instanceof Element&&l(i)}});d.observe(e,{childList:!0,subtree:!0});let u={observe(){d.observe(e,{childList:!0,subtree:!0})},disconnect(){d.disconnect()}};return m.push(u),()=>{d.disconnect();for(let a of n){let c=v.get(a);c!=null&&(c===1?(a.removeAttribute("aria-hidden"),v.delete(a)):v.set(a,c-1))}u===m[m.length-1]?(m.pop(),m.length&&m[m.length-1].observe()):m.splice(m.indexOf(u),1)}}function ie(t,e){let{triggerRef:r,popoverRef:n,isNonModal:l,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:d,...u}=t,{overlayProps:a,underlayProps:c}=G({isOpen:e.isOpen&&!u["data-react-aria-top-layer"],onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!l,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:d},n),{overlayProps:i,arrowProps:b,placement:f}=X({...u,targetRef:r,overlayRef:n,isOpen:e.isOpen,onClose:l?e.close:null});return ne({isDisabled:l||!e.isOpen}),g(()=>{if(e.isOpen&&!l&&n.current)return oe([n.current])},[l,e.isOpen,n]),{popoverProps:L(a,i),arrowProps:b,underlayProps:c,placement:f}}const ce=s.createContext({});function de(){var t;return(t=s.useContext(ce))!==null&&t!==void 0?t:{}}const I=$.createContext(null);function se(t){let e=k(),{portalContainer:r=e?null:document.body,isExiting:n}=t,[l,o]=s.useState(!1),d=s.useMemo(()=>({contain:l,setContain:o}),[l,o]),{getContainer:u}=de();if(!t.portalContainer&&u&&(r=u()),!r)return null;let a=t.children;return t.disableFocusManagement||(a=$.createElement(Q,{restoreFocus:!0,contain:l&&!n},a)),a=$.createElement(I.Provider,{value:d},$.createElement(U,null,a)),Y.createPortal(a,r)}function ue(){let t=s.useContext(I),e=t==null?void 0:t.setContain;g(()=>{e==null||e(!0)},[e])}function fe(t,e){let{role:r="dialog"}=t,n=B();n=t["aria-label"]?void 0:n;let l=s.useRef(!1);return s.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){T(e.current);let o=setTimeout(()=>{document.activeElement===e.current&&(l.current=!0,e.current&&(e.current.blur(),T(e.current)),l.current=!1)},500);return()=>{clearTimeout(o)}}},[e]),ue(),{dialogProps:{...S(t,{labelable:!0}),role:r,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||n,onBlur:o=>{l.current&&o.stopPropagation()}},titleProps:{id:n}}}const $e=s.createContext({placement:"bottom"}),be=s.createContext(null),Te=s.forwardRef(function(e,r){[e,r]=A(e,r,be);let n=s.useContext(H),l=j(e),o=e.isOpen!=null||e.defaultOpen!=null||!n?l:n,d=ee(r,o.isOpen)||e.isExiting||!1;if(z()){let a=e.children;return typeof a=="function"&&(a=a({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),$.createElement($.Fragment,null,a)}return o&&!o.isOpen&&!d?null:$.createElement(me,{...e,triggerRef:e.triggerRef,state:o,popoverRef:r,isExiting:d})});function me({state:t,isExiting:e,UNSTABLE_portalContainer:r,...n}){let l=s.useRef(null),[o,d]=s.useState(0);g(()=>{l.current&&t.isOpen&&d(l.current.getBoundingClientRect().width)},[t.isOpen,l]);var u;let{popoverProps:a,underlayProps:c,arrowProps:i,placement:b}=ie({...n,offset:(u=n.offset)!==null&&u!==void 0?u:8,arrowSize:o},t),f=n.popoverRef,E=Z(f,!!b)||n.isEntering||!1,y=M({...n,defaultClassName:"react-aria-Popover",values:{trigger:n.trigger||null,placement:b,isEntering:E,isExiting:e}}),W={...a.style,...y.style};return $.createElement(se,{...n,isExiting:e,portalContainer:r},!n.isNonModal&&t.isOpen&&$.createElement("div",{"data-testid":"underlay",...c,style:{position:"fixed",inset:0}}),$.createElement("div",{...L(S(n),a),...y,ref:f,slot:n.slot||void 0,style:W,"data-trigger":n.trigger,"data-placement":b,"data-entering":E||void 0,"data-exiting":e||void 0},!n.isNonModal&&$.createElement(N,{onDismiss:t.close}),$.createElement($e.Provider,{value:{...i,placement:b,ref:l}},y.children),$.createElement(N,{onDismiss:t.close})))}const pe=s.createContext(null),H=s.createContext(null),Re=s.forwardRef(function(e,r){let n=e["aria-labelledby"];[e,r]=A(e,r,pe);let{dialogProps:l,titleProps:o}=fe({...e,"aria-labelledby":n},r),d=s.useContext(H);!l["aria-label"]&&!l["aria-labelledby"]&&(e["aria-labelledby"]?l["aria-labelledby"]=e["aria-labelledby"]:console.warn('If a Dialog does not contain a <Heading slot="title">, it must have an aria-label or aria-labelledby attribute for accessibility.'));let u=M({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:(d==null?void 0:d.close)||(()=>{})}});return $.createElement("section",{...S(e),...l,...u,ref:r,slot:e.slot||void 0},$.createElement(K,{values:[[q,{slots:{[R]:{},title:{...o,level:2}}}],[V,{slots:{[R]:{},close:{onPress:()=>d==null?void 0:d.close()}}}]]},u.children))});export{H as $,be as a,Te as b,oe as c,pe as d,Re as e};
