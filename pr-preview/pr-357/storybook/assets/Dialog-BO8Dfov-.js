import{e as E,b as S,$ as N,a as I,k as W,m as h}from"./utils-CyugoGNF.js";import{$ as k,a as q,b as z}from"./OverlayArrow-CBK1XRIu.js";import{a as B}from"./Button-iL9IzHG8.js";import{$ as G}from"./RSPContexts-BT50PPhj.js";import{$ as M}from"./filterDOMProps-CeZl_uWj.js";import{r as o,R as i}from"./index-B-o1Wr-g.js";import{$ as T,a as j,b as A,c as R,d as J}from"./useDialog-BgtKtjEq.js";import{m as Q}from"./useFocusRing-BODiw1iP.js";import{a as V}from"./Hidden-B6il94lO.js";import{a as X,$ as Y}from"./useOverlayTriggerState-_3rNuFLY.js";import{$ as Z}from"./context-BwmME58u.js";import{$ as L,a as D}from"./DismissButton-BaTbkvC9.js";function U(s,e){let{triggerRef:l,popoverRef:t,groupRef:a,isNonModal:r,isKeyboardDismissDisabled:n,shouldCloseOnInteractOutside:c,...f}=s,u=f.trigger==="SubmenuTrigger",{overlayProps:g,underlayProps:v}=L({isOpen:e.isOpen,onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!r||u,isKeyboardDismissDisabled:n,shouldCloseOnInteractOutside:c},a??t),{overlayProps:x,arrowProps:p,placement:b}=X({...f,targetRef:l,overlayRef:t,isOpen:e.isOpen,onClose:r&&!u?e.close:null});return T({isDisabled:r||!e.isOpen}),E(()=>{if(e.isOpen&&t.current){var d,$;return r?j((d=a==null?void 0:a.current)!==null&&d!==void 0?d:t.current):A([($=a==null?void 0:a.current)!==null&&$!==void 0?$:t.current])}},[r,e.isOpen,t,a]),{popoverProps:S(g,x),arrowProps:p,underlayProps:v,placement:b}}const _=o.createContext(null),w=o.createContext(null),$e=o.forwardRef(function(e,l){[e,l]=N(e,l,_);let t=o.useContext(F),a=Y(e),r=e.isOpen!=null||e.defaultOpen!=null||!t?a:t,n=k(l,r.isOpen)||e.isExiting||!1,c=V(),{direction:f}=Z();if(c){let u=e.children;return typeof u=="function"&&(u=u({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),i.createElement(i.Fragment,null,u)}return r&&!r.isOpen&&!n?null:i.createElement(ee,{...e,triggerRef:e.triggerRef,state:r,popoverRef:l,isExiting:n,dir:f})});function ee({state:s,isExiting:e,UNSTABLE_portalContainer:l,...t}){let a=o.useRef(null),[r,n]=o.useState(0),c=o.useRef(null),f=o.useContext(w),u=f&&t.trigger==="SubmenuTrigger";E(()=>{a.current&&s.isOpen&&n(a.current.getBoundingClientRect().width)},[s.isOpen,a]);var g;let{popoverProps:v,underlayProps:x,arrowProps:p,placement:b}=U({...t,offset:(g=t.offset)!==null&&g!==void 0?g:8,arrowSize:r,groupRef:u?f:c},s),d=t.popoverRef,$=q(d,!!b)||t.isEntering||!1,y=I({...t,defaultClassName:"react-aria-Popover",values:{trigger:t.trigger||null,placement:b,isEntering:$,isExiting:e}}),C=!t.isNonModal||t.trigger==="SubmenuTrigger",[m,K]=o.useState(!1);E(()=>{d.current&&K(C&&!d.current.querySelector("[role=dialog]"))},[d,C]),o.useEffect(()=>{m&&d.current&&!d.current.contains(document.activeElement)&&Q(d.current)},[m,d]);let H={...v.style,...y.style},O=i.createElement("div",{...S(M(t),v),...y,role:m?"dialog":void 0,tabIndex:m?-1:void 0,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],ref:d,slot:t.slot||void 0,style:H,dir:t.dir,"data-trigger":t.trigger,"data-placement":b,"data-entering":$||void 0,"data-exiting":e||void 0},!t.isNonModal&&i.createElement(D,{onDismiss:s.close}),i.createElement(z.Provider,{value:{...p,placement:b,ref:a}},y.children),i.createElement(D,{onDismiss:s.close}));if(!u)return i.createElement(R,{...t,shouldContainFocus:m,isExiting:e,portalContainer:l},!t.isNonModal&&s.isOpen&&i.createElement("div",{"data-testid":"underlay",...x,style:{position:"fixed",inset:0}}),i.createElement("div",{ref:c,style:{display:"contents"}},i.createElement(w.Provider,{value:c},O)));var P;return i.createElement(R,{...t,shouldContainFocus:m,isExiting:e,portalContainer:(P=l??(f==null?void 0:f.current))!==null&&P!==void 0?P:void 0},O)}const te=o.createContext(null),F=o.createContext(null),me=o.forwardRef(function(e,l){let t=e["aria-labelledby"];[e,l]=N(e,l,te);let{dialogProps:a,titleProps:r}=J({...e,"aria-labelledby":t},l),n=o.useContext(F);!a["aria-label"]&&!a["aria-labelledby"]&&(e["aria-labelledby"]?a["aria-labelledby"]=e["aria-labelledby"]:console.warn('If a Dialog does not contain a <Heading slot="title">, it must have an aria-label or aria-labelledby attribute for accessibility.'));let c=I({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:(n==null?void 0:n.close)||(()=>{})}});return i.createElement("section",{...M(e),...a,...c,ref:l,slot:e.slot||void 0},i.createElement(W,{values:[[G,{slots:{[h]:{},title:{...r,level:2}}}],[B,{slots:{[h]:{},close:{onPress:()=>n==null?void 0:n.close()}}}]]},c.children))});export{F as $,_ as a,te as b,$e as c,me as d};
