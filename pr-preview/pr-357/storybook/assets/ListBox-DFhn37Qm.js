import{$ as ae,a as re,b as le,c as N,d as ie}from"./Collection-KpeOqn_K.js";import{l as Q,b as H,d as G,n as de,$ as ne,g as R,o as se,a as A,k as X,m as ce,i as ue}from"./utils-CyugoGNF.js";import{$ as T,a as fe,b as Y,c as be}from"./DragAndDrop-Bfvg-Q35.js";import{$ as pe,a as $e,b as ge,c as ve,d as me}from"./Separator-DuTifGF-.js";import{a as he}from"./Text-DnyJpj_W.js";import{$ as _}from"./filterDOMProps-CeZl_uWj.js";import{r as d,R as f}from"./index-B-o1Wr-g.js";import{a as xe,$ as Pe}from"./useListState-DFvoS08W.js";import{$ as De}from"./context-BwmME58u.js";import{$ as ye}from"./useCollator-B0i4hO_n.js";import{$ as Se}from"./ListKeyboardDelegate-SnKTO46q.js";import{c as ke,x as Fe,y as Ce,$ as Z,z as J,h as we,a as Ee}from"./useFocusRing-BODiw1iP.js";import{$ as He}from"./useLabel-DbJIstGE.js";import{d as Me}from"./SelectionManager-DRxs2Bqi.js";import{a as Be}from"./FocusScope-Ded37Rd9.js";const K=new WeakMap;function Ve(t){return typeof t=="string"?t.replace(/\s*/g,""):""+t}function Ie(t,e){let a=K.get(t);if(!a)throw new Error("Unknown list");return`${a.id}-option-${Ve(e)}`}function Ae(t,e,a){let r=_(t,{labelable:!0}),i=t.selectionBehavior||"toggle",l=t.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&l==="action"&&(l="override");let{listProps:o}=pe({...t,ref:a,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:l}),{focusWithinProps:s}=ke({onFocusWithin:t.onFocus,onBlurWithin:t.onBlur,onFocusWithinChange:t.onFocusChange}),p=Q(t.id);K.set(e,{id:p,shouldUseVirtualFocus:t.shouldUseVirtualFocus,shouldSelectOnPressUp:t.shouldSelectOnPressUp,shouldFocusOnHover:t.shouldFocusOnHover,isVirtualized:t.isVirtualized,onAction:t.onAction,linkBehavior:l});let{labelProps:b,fieldProps:c}=He({...t,id:p,labelElementType:"span"});return{labelProps:b,listBoxProps:H(r,s,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...H(c,o)})}}function Te(t,e,a){var r,i;let{key:l}=t,o=K.get(e);var s;let p=(s=t.isDisabled)!==null&&s!==void 0?s:e.selectionManager.isDisabled(l);var b;let c=(b=t.isSelected)!==null&&b!==void 0?b:e.selectionManager.isSelected(l);var g;let n=(g=t.shouldSelectOnPressUp)!==null&&g!==void 0?g:o==null?void 0:o.shouldSelectOnPressUp;var v;let h=(v=t.shouldFocusOnHover)!==null&&v!==void 0?v:o==null?void 0:o.shouldFocusOnHover;var m;let $=(m=t.shouldUseVirtualFocus)!==null&&m!==void 0?m:o==null?void 0:o.shouldUseVirtualFocus;var x;let S=(x=t.isVirtualized)!==null&&x!==void 0?x:o==null?void 0:o.isVirtualized,k=G(),M=G(),y={role:"option","aria-disabled":p||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?c:void 0};Fe()&&Ce()||(y["aria-label"]=t["aria-label"],y["aria-labelledby"]=k,y["aria-describedby"]=M);let u=e.collection.getItem(l);if(S){let D=Number(u==null?void 0:u.index);y["aria-posinset"]=Number.isNaN(D)?void 0:D+1,y["aria-setsize"]=$e(e.collection)}let B=o!=null&&o.onAction?()=>{var D;return o==null||(D=o.onAction)===null||D===void 0?void 0:D.call(o,l)}:void 0,V=Ie(e,l),{itemProps:U,isPressed:C,isFocused:P,hasAction:F,allowsSelection:w}=Me({selectionManager:e.selectionManager,key:l,ref:a,shouldSelectOnPressUp:n,allowsDifferentPressOrigin:n&&h,isVirtualized:S,shouldUseVirtualFocus:$,isDisabled:p,onAction:B||!(u==null||(r=u.props)===null||r===void 0)&&r.onAction?de(u==null||(i=u.props)===null||i===void 0?void 0:i.onAction,B):void 0,linkBehavior:o==null?void 0:o.linkBehavior,id:V}),{hoverProps:I}=Z({isDisabled:p||!h,onHoverStart(){J()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(l))}}),E=_(u==null?void 0:u.props);delete E.id;let z=we(u==null?void 0:u.props);return{optionProps:{...y,...H(E,U,I,z),id:V},labelProps:{id:k},descriptionProps:{id:M},isFocused:P,isFocusVisible:P&&e.selectionManager.isFocused&&J(),isSelected:c,isDisabled:p,isPressed:C,allowsSelection:w,hasAction:F}}function _e(t){let{heading:e,"aria-label":a}=t,r=Q();return{itemProps:{role:"presentation"},headingProps:e?{id:r,role:"presentation"}:{},groupProps:{role:"group","aria-label":a,"aria-labelledby":e?r:void 0}}}const ee=d.createContext(null),L=d.createContext(null),ro=d.forwardRef(function(e,a){[e,a]=ne(e,a,ee);let r=d.useContext(L);return r?f.createElement(oe,{state:r,props:e,listBoxRef:a}):f.createElement(ae,{content:f.createElement(re,e)},i=>f.createElement(Le,{props:e,listBoxRef:a,collection:i}))});function Le({props:t,listBoxRef:e,collection:a}){t={...t,collection:a,children:null,items:null};let{layoutDelegate:r}=d.useContext(N),i=Pe({...t,layoutDelegate:r});return f.createElement(oe,{state:i,props:t,listBoxRef:e})}function oe({state:t,props:e,listBoxRef:a}){let{filter:r,collectionProps:i,collectionRef:l}=d.useContext(ge)||{};e=d.useMemo(()=>i?{...e,...i}:e,[e,i]);let{dragAndDropHooks:o,layout:s="stack",orientation:p="vertical"}=e;a=R(d.useMemo(()=>se(a,l!==void 0?l:null),[l,a]));let b=xe(t,r),{collection:c,selectionManager:g}=b,n=!!(o!=null&&o.useDraggableCollectionState),v=!!(o!=null&&o.useDroppableCollectionState),{direction:h}=De(),{disabledBehavior:m,disabledKeys:$}=g,x=ye({usage:"search",sensitivity:"base"}),{isVirtualized:S,layoutDelegate:k,dropTargetDelegate:M,CollectionRoot:y}=d.useContext(N),u=d.useMemo(()=>e.keyboardDelegate||new Se({collection:c,collator:x,ref:a,disabledKeys:$,disabledBehavior:m,layout:s,orientation:p,direction:h,layoutDelegate:k}),[c,x,a,m,$,p,h,e.keyboardDelegate,s,k]),{listBoxProps:B}=Ae({...e,shouldSelectOnPressUp:n||e.shouldSelectOnPressUp,keyboardDelegate:u,isVirtualized:S},b,a),V=d.useRef(n),U=d.useRef(v);d.useEffect(()=>{V.current!==n&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),U.current!==v&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[n,v]);let C,P,F,w=!1,I=null,E=d.useRef(null);if(n&&o){C=o.useDraggableCollectionState({collection:c,selectionManager:g,preview:o.renderDragPreview?E:void 0}),o.useDraggableCollection({},C,a);let O=o.DragPreview;I=o.renderDragPreview?f.createElement(O,{ref:E},o.renderDragPreview):null}if(v&&o){P=o.useDroppableCollectionState({collection:c,selectionManager:g});let O=o.dropTargetDelegate||M||new o.ListDropTargetDelegate(c,a,{orientation:p,layout:s,direction:h});F=o.useDroppableCollection({keyboardDelegate:u,dropTargetDelegate:O},P,a),w=P.isDropTarget({type:"root"})}let{focusProps:z,isFocused:D,isFocusVisible:W}=Ee(),q={isDropTarget:w,isEmpty:b.collection.size===0,isFocused:D,isFocusVisible:W,layout:e.layout||"stack",state:b},te=A({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:q}),j=null;return b.collection.size===0&&e.renderEmptyState&&(j=f.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(q))),f.createElement(Be,null,f.createElement("div",{..._(e),...H(B,z,F==null?void 0:F.collectionProps),...te,ref:a,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":w||void 0,"data-empty":b.collection.size===0||void 0,"data-focused":D||void 0,"data-focus-visible":W||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},f.createElement(X,{values:[[ee,e],[L,b],[T,{dragAndDropHooks:o,dragState:C,dropState:P}],[ve,{elementType:"div"}],[fe,{render:ze}],[ie,{name:"ListBoxSection",render:Ue}]]},f.createElement(y,{collection:c,scrollRef:a,persistedKeys:be(g,o,P),renderDropIndicator:Y(o,P)})),j,I))}function Ue(t,e,a,r="react-aria-ListBoxSection"){let i=d.useContext(L),{dragAndDropHooks:l,dropState:o}=d.useContext(T),{CollectionBranch:s}=d.useContext(N),[p,b]=ue();var c;let{headingProps:g,groupProps:n}=_e({heading:b,"aria-label":(c=t["aria-label"])!==null&&c!==void 0?c:void 0}),v=A({defaultClassName:r,className:t.className,style:t.style,values:{}});return f.createElement("section",{..._(t),...n,...v,ref:e},f.createElement(me.Provider,{value:{...g,ref:p}},f.createElement(s,{collection:i.collection,parent:a,renderDropIndicator:Y(l,o)})))}const lo=le("item",function(e,a,r){let i=R(a),l=d.useContext(L),{dragAndDropHooks:o,dragState:s,dropState:p}=d.useContext(T),{optionProps:b,labelProps:c,descriptionProps:g,...n}=Te({key:r.key,"aria-label":e==null?void 0:e["aria-label"]},l,i),{hoverProps:v,isHovered:h}=Z({isDisabled:!n.allowsSelection&&!n.hasAction,onHoverStart:r.props.onHoverStart,onHoverChange:r.props.onHoverChange,onHoverEnd:r.props.onHoverEnd}),m=null;s&&o&&(m=o.useDraggableItem({key:r.key},s));let $=null;p&&o&&($=o.useDroppableItem({target:{type:"item",key:r.key,dropPosition:"on"}},p,i));let x=s&&s.isDragging(r.key),S=A({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...n,isHovered:h,selectionMode:l.selectionManager.selectionMode,selectionBehavior:l.selectionManager.selectionBehavior,allowsDragging:!!s,isDragging:x,isDropTarget:$==null?void 0:$.isDropTarget}});d.useEffect(()=>{r.textValue||console.warn("A `textValue` prop is required for <ListBoxItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[r.textValue]);let k=e.href?"a":"div";return f.createElement(k,{...H(b,v,m==null?void 0:m.dragProps,$==null?void 0:$.dropProps),...S,ref:i,"data-allows-dragging":!!s||void 0,"data-selected":n.isSelected||void 0,"data-disabled":n.isDisabled||void 0,"data-hovered":h||void 0,"data-focused":n.isFocused||void 0,"data-focus-visible":n.isFocusVisible||void 0,"data-pressed":n.isPressed||void 0,"data-dragging":x||void 0,"data-drop-target":($==null?void 0:$.isDropTarget)||void 0,"data-selection-mode":l.selectionManager.selectionMode==="none"?void 0:l.selectionManager.selectionMode},f.createElement(X,{values:[[he,{slots:{[ce]:c,label:c,description:g}}]]},S.children))});function ze(t,e){e=R(e);let{dragAndDropHooks:a,dropState:r}=d.useContext(T),{dropIndicatorProps:i,isHidden:l,isDropTarget:o}=a.useDropIndicator(t,r,e);return l?null:f.createElement(Ne,{...t,dropIndicatorProps:i,isDropTarget:o,ref:e})}function Oe(t,e){let{dropIndicatorProps:a,isDropTarget:r,...i}=t,l=A({...i,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:r}});return f.createElement("div",{...a,...l,role:"option",ref:e,"data-drop-target":r||void 0})}const Ne=d.forwardRef(Oe);export{Ae as $,_e as a,Te as b,K as c,Ie as d,ee as e,L as f,ro as g,lo as h};
