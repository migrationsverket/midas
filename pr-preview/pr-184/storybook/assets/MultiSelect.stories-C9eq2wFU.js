import{j as v}from"./jsx-runtime-CfatFE5O.js";import{$ as he,a as ke}from"./Button-DRyTw_69.js";import{h as be,d as Pe,e as ge,f as G,b as ye,n as $e,y as q,z as j,c as Ee}from"./useFocusable-CUvAewCR.js";import{$ as we,a as Ie}from"./Dialog-Bk-R8JAE.js";import{a as Ke}from"./Form-Bnef0d36.js";import{$ as Be}from"./RSPContexts-Djf1EgA4.js";import{$ as Ce,a as N,b as Re,c as Te,d as Ve}from"./Collection-D2MgYaM2.js";import{$ as L,a as Y,b as Ae,c as Me,d as He}from"./DragAndDrop-ieluuKp3.js";import{$ as F}from"./ListBox-D6lH0XnD.js";import{a as _e}from"./Text-CUSXFwf2.js";import{r as u,R as c}from"./index-ClcD9ViR.js";import{$ as Le,b as je,c as Ne,a as Fe,T as ze}from"./Tag-DkFQ8XAk.js";import{$ as Ge}from"./useGridSelectionCheckbox-BfiAwPan.js";import{a as qe}from"./FocusScope-Do-PkUts.js";import{$ as W}from"./VisuallyHidden-CU0vF0eT.js";import{$ as We}from"./useListState-B3RSIWo1.js";import{$ as Oe}from"./useCollator-ZDMRt11h.js";import{$ as Ue}from"./context-C9cAOQ0o.js";import{I as Je}from"./TextField-DkfvQu9u.js";import"./CheckboxGroup-DTQQoV0q.js";import{C as Qe}from"./Checkbox-B-6-YZVg.js";import{C as Xe}from"./chevron-down-CVNiYbvV.js";import"./Hidden-CB9z-rbJ.js";import"./index-ZuzByk-F.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./clsx-B-dksMZM.js";import"./PressResponder-BlG14Tb7.js";import"./useControlledState-DFHhQ_7Z.js";import"./useLocalizedStringFormatter-Dv05nzCb.js";import"./index-DvHoLfqc.js";import"./scrollIntoView-CFanVOW_.js";import"./SelectionManager-Bf1YJvgz.js";import"./useDescription-D06dHw1z.js";import"./useHighlightSelectionDescription-Dr-imSqZ.js";import"./useUpdateEffect-DMLA2Avq.js";import"./useHasTabbableChild-CbzbS3aq.js";import"./ButtonGroup-Duds0FV0.js";import"./x-BaIpobvV.js";import"./createLucideIcon-DQK9Z80p.js";import"./Group-DqznbdRl.js";function Ye(l,i){let{key:s}=l;const{checkboxProps:e}=Ge(l,i);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${Le(i,s)}`}}}function Ze(l){let{initialItems:i=[],initialSelectedKeys:s,getKey:e=f=>{var n;return(n=f.id)!==null&&n!==void 0?n:f.key},filter:a,initialFilterText:t=""}=l,[r,o]=u.useState({items:i,selectedKeys:s==="all"?"all":new Set(s||[]),filterText:t}),d=u.useMemo(()=>a?r.items.filter(f=>a(f,r.filterText)):r.items,[r.items,r.filterText,a]);return{...r,items:d,...et({getKey:e},o),getItem(f){return r.items.find(n=>e(n)===f)}}}function et(l,i){let{cursor:s,getKey:e}=l;return{setSelectedKeys(a){i(t=>({...t,selectedKeys:a}))},setFilterText(a){i(t=>({...t,filterText:a}))},insert(a,...t){i(r=>B(r,a,...t))},insertBefore(a,...t){i(r=>{let o=r.items.findIndex(d=>(e==null?void 0:e(d))===a);if(o===-1)if(r.items.length===0)o=0;else return r;return B(r,o,...t)})},insertAfter(a,...t){i(r=>{let o=r.items.findIndex(d=>(e==null?void 0:e(d))===a);if(o===-1)if(r.items.length===0)o=0;else return r;return B(r,o+1,...t)})},prepend(...a){i(t=>B(t,0,...a))},append(...a){i(t=>B(t,t.items.length,...a))},remove(...a){i(t=>{let r=new Set(a),o=t.items.filter(f=>!r.has(e(f))),d="all";if(t.selectedKeys!=="all"){d=new Set(t.selectedKeys);for(let f of a)d.delete(f)}return s==null&&o.length===0&&(d=new Set),{...t,items:o,selectedKeys:d}})},removeSelectedItems(){i(a=>{if(a.selectedKeys==="all")return{...a,items:[],selectedKeys:new Set};let t=a.selectedKeys,r=a.items.filter(o=>!t.has(e(o)));return{...a,items:r,selectedKeys:new Set}})},move(a,t){i(r=>{let o=r.items.findIndex(n=>e(n)===a);if(o===-1)return r;let d=r.items.slice(),[f]=d.splice(o,1);return d.splice(t,0,f),{...r,items:d}})},moveBefore(a,t){i(r=>{let o=r.items.findIndex(n=>e(n)===a);if(o===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(n=>r.items.findIndex(g=>e(g)===n)).sort((n,g)=>n-g);return Z(r,f,o)})},moveAfter(a,t){i(r=>{let o=r.items.findIndex(n=>e(n)===a);if(o===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(n=>r.items.findIndex(g=>e(g)===n)).sort((n,g)=>n-g);return Z(r,f,o+1)})},update(a,t){i(r=>{let o=r.items.findIndex(d=>e(d)===a);return o===-1?r:{...r,items:[...r.items.slice(0,o),t,...r.items.slice(o+1)]}})}}}function B(l,i,...s){return{...l,items:[...l.items.slice(0,i),...s,...l.items.slice(i)]}}function Z(l,i,s){s-=i.filter(t=>t<s).length;let e=i.map(t=>({from:t,to:s++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let o=t;o<e.length;o++)e[o].from>r&&e[o].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let o=e.length-1;o>t;o--){let d=e[o];d.from<r.to?r.to++:d.from++}}let a=l.items.slice();for(let t of e){let[r]=a.splice(t.from,1);a.splice(t.to,0,r)}return{...l,items:a}}const tt=u.createContext(null);function rt(l,i){return[l,i]=Ee(l,i,tt),c.createElement(Te,{content:c.createElement(Ve,l)},s=>c.createElement(at,{props:l,collection:s,gridListRef:i}))}function at({props:l,collection:i,gridListRef:s}){let{dragAndDropHooks:e,keyboardNavigationBehavior:a="arrow",layout:t="stack"}=l,{CollectionRoot:r,isVirtualized:o,layoutDelegate:d,dropTargetDelegate:f}=u.useContext(N),n=We({...l,collection:i,children:void 0,layoutDelegate:d}),g=Oe({usage:"search",sensitivity:"base"}),{disabledBehavior:b,disabledKeys:$}=n.selectionManager,{direction:p}=Ue(),m=u.useMemo(()=>new Y({collection:i,collator:g,ref:s,disabledKeys:$,disabledBehavior:b,layoutDelegate:d,layout:t,direction:p}),[i,s,t,$,b,d,g,p]),{gridProps:T}=Ne({...l,keyboardDelegate:m,keyboardNavigationBehavior:t==="grid"?"tab":a,isVirtualized:o},n,s),S=n.selectionManager,P=!!(e!=null&&e.useDraggableCollectionState),h=!!(e!=null&&e.useDroppableCollectionState),x=u.useRef(P),y=u.useRef(h);u.useEffect(()=>{x.current!==P&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),y.current!==h&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[P,h]);let E,D,k,w=!1,I=null,O=u.useRef(null);if(P&&e){E=e.useDraggableCollectionState({collection:i,selectionManager:S,preview:e.renderDragPreview?O:void 0}),e.useDraggableCollection({},E,s);let K=e.DragPreview;I=e.renderDragPreview?c.createElement(K,{ref:O},e.renderDragPreview):null}if(h&&e){D=e.useDroppableCollectionState({collection:i,selectionManager:S});let K=new Y({collection:i,disabledKeys:S.disabledKeys,disabledBehavior:S.disabledBehavior,ref:s}),Se=e.dropTargetDelegate||f||new e.ListDropTargetDelegate(i,s,{layout:t,direction:p});k=e.useDroppableCollection({keyboardDelegate:K,dropTargetDelegate:Se},D,s),w=D.isDropTarget({type:"root"})}let{focusProps:ve,isFocused:U,isFocusVisible:J}=ge(),Q={isDropTarget:w,isEmpty:n.collection.size===0,isFocused:U,isFocusVisible:J,layout:t,state:n},xe=G({className:l.className,style:l.style,defaultClassName:"react-aria-GridList",values:Q}),X=null,De=null;if(n.collection.size===0&&l.renderEmptyState){let K=l.renderEmptyState(Q);X=c.createElement("div",{role:"row",style:{display:"contents"}},c.createElement("div",{role:"gridcell",style:{display:"contents"}},K))}return c.createElement(qe,null,c.createElement("div",{...$e(l),...xe,...ye(T,ve,k==null?void 0:k.collectionProps,De),ref:s,slot:l.slot||void 0,onScroll:l.onScroll,"data-drop-target":w||void 0,"data-empty":n.collection.size===0||void 0,"data-focused":U||void 0,"data-focus-visible":J||void 0,"data-layout":t},c.createElement(q,{values:[[F,n],[L,{dragAndDropHooks:e,dragState:E,dropState:D}],[Ae,{render:lt}]]},h&&c.createElement(dt,null),c.createElement(r,{collection:i,scrollRef:s,persistedKeys:Me(S,e,D),renderDropIndicator:He(e,D)})),X,I))}const ot=u.forwardRef(rt),it=Ce("item",function(i,s,e){let a=u.useContext(F),{dragAndDropHooks:t,dragState:r,dropState:o}=u.useContext(L),d=be(s),{isVirtualized:f}=u.useContext(N),{rowProps:n,gridCellProps:g,descriptionProps:b,...$}=je({node:e,shouldSelectOnPressUp:!!r,isVirtualized:f},a,d),{hoverProps:p,isHovered:m}=Pe({isDisabled:!$.allowsSelection&&!$.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:T,focusProps:S}=ge(),{checkboxProps:P}=Ye({key:e.key},a),h=a.selectionManager.disabledBehavior==="all"&&$.isDisabled?{isDisabled:!0}:{},x=null;r&&t&&(x=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let y=null,E=u.useRef(null),{visuallyHiddenProps:D}=W();o&&t&&(y=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},o,E));let k=r&&r.isDragging(e.key),w=G({...i,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...$,isHovered:m,isFocusVisible:T,selectionMode:a.selectionManager.selectionMode,selectionBehavior:a.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:k,isDropTarget:y==null?void 0:y.isDropTarget}}),I=u.useRef(null);return u.useEffect(()=>{r&&!I.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),u.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),c.createElement(c.Fragment,null,y&&!y.isHidden&&c.createElement("div",{role:"row",style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...D,...y==null?void 0:y.dropIndicatorProps,ref:E}))),c.createElement("div",{...ye($e(i),n,S,p,x==null?void 0:x.dragProps),...w,ref:d,"data-selected":$.isSelected||void 0,"data-disabled":$.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":$.isFocused||void 0,"data-focus-visible":T||void 0,"data-pressed":$.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":k||void 0,"data-drop-target":(y==null?void 0:y.isDropTarget)||void 0,"data-selection-mode":a.selectionManager.selectionMode==="none"?void 0:a.selectionManager.selectionMode},c.createElement("div",{...g,style:{display:"contents"}},c.createElement(q,{values:[[Be,{slots:{[j]:{},selection:P}}],[he,{slots:{[j]:h,drag:{...x==null?void 0:x.dragButtonProps,ref:I,style:{pointerEvents:"none"}}}}],[_e,{slots:{[j]:{},description:b}}],[N,Re],[F,null]]},w.children))))});function lt(l,i){i=be(i);let{dragAndDropHooks:s,dropState:e}=u.useContext(L),a=u.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:o}=s.useDropIndicator(l,e,a);return r?null:c.createElement(nt,{...l,dropIndicatorProps:t,isDropTarget:o,buttonRef:a,ref:i})}function st(l,i){let{dropIndicatorProps:s,isDropTarget:e,buttonRef:a,...t}=l,{visuallyHiddenProps:r}=W(),o=G({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return c.createElement("div",{...o,role:"row",ref:i,"data-drop-target":e||void 0},c.createElement("div",{role:"gridcell"},c.createElement("div",{...r,role:"button",...s,ref:a}),o.children))}const nt=u.forwardRef(st);function dt(){let{dragAndDropHooks:l,dropState:i}=u.useContext(L),s=u.useRef(null),{dropIndicatorProps:e}=l.useDropIndicator({target:{type:"root"}},i,s),a=i.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=W();return!a&&e["aria-hidden"]?null:c.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...t,...e,ref:s})))}const ct='"../../../theme/src/lib/tokens.css"',ft='"Inter", sans-serif',ut="#000000",pt="#b31b1b",mt="(max-width: 767px)",bt="#bfbfbf",gt="#e6e6e6",yt="#f2f2f2",$t="_button_1sedg_4",vt="_icon_1sedg_19",xt="_multiSelect_1sedg_44",Dt="_popover_1sedg_60",St="_listBoxItem_1sedg_73",C={tokens:ct,display:ft,black:ut,signalRed130:pt,smBreakpoint:mt,gray50:bt,gray20:gt,backgroundSecondary:yt,button:$t,icon:vt,multiSelect:xt,popover:Dt,listBoxItem:St},z=({label:l,description:i,items:s,onSelectionChange:e,selectedKeys:a,defaultSelectedKeys:t,isDisabled:r,isInvalid:o,errorMessage:d})=>{const f=c.useRef(null),[n,g]=c.useState(void 0),b=Ze({initialItems:s,initialSelectedKeys:t});c.useEffect(()=>{const p=()=>{f.current&&g(f.current.offsetWidth-2)};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]),c.useEffect(()=>{e&&e(new Set(b.selectedKeys))},[b.selectedKeys,e]),c.useEffect(()=>{a&&b.setSelectedKeys(new Set(a))},[a]);const $=b.selectedKeys==="all"?new Set(b.items.map(p=>p.id)):b.selectedKeys;return v.jsx("div",{className:C.multiSelect,"data-disabled":r,"data-invalid":o,children:v.jsxs(q,{values:[[Ke,{isInvalid:o||!1,validationErrors:[],validationDetails:{customError:o||!1,badInput:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!1,valueMissing:!1}}]],children:[v.jsx(Je,{label:l,description:i,errorMessage:d,children:v.jsxs(we,{children:[v.jsxs(ke,{className:C.button,ref:f,isDisabled:r,children:["Välj",v.jsx("div",{className:C.icon,"aria-hidden":"true",children:v.jsx(Xe,{size:20})})]}),v.jsx(Ie,{className:C.popover,style:{width:n},offset:0,UNSTABLE_portalContainer:f.current||void 0,children:v.jsx(ot,{"aria-label":l,selectionMode:"multiple",selectedKeys:b.selectedKeys,onSelectionChange:b.setSelectedKeys,children:b.items.map(p=>v.jsxs(it,{id:p.id,textValue:p.name,className:C.listBoxItem,children:[v.jsx(Qe,{slot:"selection"}),p.name]},p.id))})})]})}),v.jsx(Fe,{"aria-label":"Valda",onRemove:p=>{b.setSelectedKeys(new Set(Array.from(b.selectedKeys).filter(m=>!p.has(m))))},children:Array.from($).map(p=>{const m=b.getItem(p);return v.jsx(ze,{id:m==null?void 0:m.id,textValue:m==null?void 0:m.name,isDisabled:r,dismissable:!0,children:m==null?void 0:m.name},m==null?void 0:m.id)})})]})})};try{z.displayName="MultiSelect",z.__docgenInfo={description:"",displayName:"MultiSelect",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"{ name: string; id: string; }[]"}},onSelectionChange:{defaultValue:null,description:"",name:"onSelectionChange",required:!1,type:{name:"(selectedKeys: Set<Key>) => void"}},selectedKeys:{defaultValue:null,description:"",name:"selectedKeys",required:!1,type:{name:"string[]"}},defaultSelectedKeys:{defaultValue:null,description:"",name:"defaultSelectedKeys",required:!1,type:{name:'"all" | string[]'}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},isInvalid:{defaultValue:null,description:"",name:"isInvalid",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string | ((validation: ValidationResult) => string)"}}}}}catch{}const cr={component:z,title:"Components/MultiSelect",tags:["autodocs"]},ht=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],R=ht.map(l=>({name:l,id:l.toLocaleLowerCase()})),V={args:{label:"Etikett",description:"Valfri hjälptext",items:R}},A={args:{label:"Etikett",description:"Blackberry är förvalt",items:R,defaultSelectedKeys:["blackberry"]}},M={args:{label:"Etikett",description:"Alla val är förvalda",items:R,defaultSelectedKeys:"all"}},H={args:{label:"Etikett",description:"Blackberry är förvalt",items:R,defaultSelectedKeys:["blackberry"],isDisabled:!0}},_={args:{label:"Etikett",description:"Blackberry är förvalt",items:R,defaultSelectedKeys:["blackberry"],isInvalid:!0,errorMessage:"Du får inte välja Blackberry"}};var ee,te,re;V.parameters={...V.parameters,docs:{...(ee=V.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    items: options
  }
}`,...(re=(te=V.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};var ae,oe,ie;A.parameters={...A.parameters,docs:{...(ae=A.parameters)==null?void 0:ae.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry']
  }
}`,...(ie=(oe=A.parameters)==null?void 0:oe.docs)==null?void 0:ie.source}}};var le,se,ne;M.parameters={...M.parameters,docs:{...(le=M.parameters)==null?void 0:le.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Alla val är förvalda',
    items: options,
    defaultSelectedKeys: 'all'
  }
}`,...(ne=(se=M.parameters)==null?void 0:se.docs)==null?void 0:ne.source}}};var de,ce,fe;H.parameters={...H.parameters,docs:{...(de=H.parameters)==null?void 0:de.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isDisabled: true
  }
}`,...(fe=(ce=H.parameters)==null?void 0:ce.docs)==null?void 0:fe.source}}};var ue,pe,me;_.parameters={..._.parameters,docs:{...(ue=_.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isInvalid: true,
    errorMessage: 'Du får inte välja Blackberry'
  }
}`,...(me=(pe=_.parameters)==null?void 0:pe.docs)==null?void 0:me.source}}};const fr=["Primary","DefaultSelectedKeys","AllKeysSelected","Disabled","Invalid"];export{M as AllKeysSelected,A as DefaultSelectedKeys,H as Disabled,_ as Invalid,V as Primary,fr as __namedExportsOrder,cr as default};
