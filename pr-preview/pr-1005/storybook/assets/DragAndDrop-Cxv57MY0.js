import{$ as x}from"./getScrollParent-Cpn7MDkE.js";import{b as m}from"./useFocusRing-C0LhZ78-.js";import{e as y}from"./utils-DWYdFJkQ.js";import{r as o,R as b}from"./iframe-CvVfZMju.js";function L(l,e){let{collection:i,onLoadMore:r,scrollOffset:c=1}=l,u=o.useRef(null),n=m(a=>{for(let f of a)f.isIntersecting&&r&&r()});y(()=>(e.current&&(u.current=new IntersectionObserver(n,{root:x(e?.current),rootMargin:`0px ${100*c}% ${100*c}% ${100*c}%`}),u.current.observe(e.current)),()=>{u.current&&u.current.disconnect()}),[i,e,c])}const O=o.createContext({}),K=o.createContext(null),M=o.forwardRef(function(e,i){let{render:r}=o.useContext(K);return b.createElement(b.Fragment,null,r(e,i))});function R(l,e){var i;let r=l?.renderDropIndicator,c=l==null||(i=l.isVirtualDragging)===null||i===void 0?void 0:i.call(l),u=o.useCallback(n=>{if(c||e?.isDropTarget(n))return r?r(n):b.createElement(M,{target:n})},[e?.target,c,r]);return l?.useDropIndicator?u:void 0}function E(l,e,i){var r,c;let u=l.focusedKey,n=null;if(!(e==null||(r=e.isVirtualDragging)===null||r===void 0)&&r.call(e)&&(i==null||(c=i.target)===null||c===void 0?void 0:c.type)==="item"&&(n=i.target.key,i.target.dropPosition==="after")){let t=i.collection.getKeyAfter(n),d=null;if(t!=null){var a,f;let g=(f=(a=i.collection.getItem(n))===null||a===void 0?void 0:a.level)!==null&&f!==void 0?f:0;for(;t;){let $=i.collection.getItem(t);if(!$)break;if($.type!=="item"){t=i.collection.getKeyAfter(t);continue}var v;if(((v=$.level)!==null&&v!==void 0?v:0)<=g)break;d=t,t=i.collection.getKeyAfter(t)}}var s;n=(s=t??d)!==null&&s!==void 0?s:n}return o.useMemo(()=>new Set([u,n].filter(t=>t!=null)),[u,n])}export{O as $,L as a,K as b,R as c,E as d};
