import{a as E}from"./Hidden-DvUCWeJm.js";import{r as R}from"./index-Dukmd-LY.js";import{y as b}from"./useFocusRing-9jsVQyPx.js";import{r as d,e as h,k as S}from"./iframe-BBbn8fVZ.js";import{d as V}from"./utils-9pHKKNJP.js";import{s as P}from"./index-D--zS7wx.js";class m{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new this.constructor(this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}filter(e,t,l){let i=this.clone();return t.addDescendants(i,e),i}constructor(e){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=this.constructor.type,this.key=e}}class $ extends m{filter(e,t,l){let[i,n]=k(e,t,this.firstChildKey,l),r=this.clone();return r.firstChildKey=i,r.lastChildKey=n,r}}class A extends m{}A.type="header";class _ extends m{}_.type="loader";class H extends ${filter(e,t,l){if(l(this.textValue,this)){let i=this.clone();return t.addDescendants(i,e),i}return null}}H.type="item";class z extends ${filter(e,t,l){let i=super.filter(e,t,l);if(i&&i.lastChildKey!==null){let n=e.getItem(i.lastChildKey);if(n&&n.type!=="header")return i}return null}}z.type="section";class q{get size(){return this.itemCount}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let t=this.keyMap;return{*[Symbol.iterator](){let l=t.get(e),i=(l==null?void 0:l.firstChildKey)!=null?t.get(l.firstChildKey):null;for(;i;)yield i,i=i.nextKey!=null?t.get(i.nextKey):void 0}}}getKeyBefore(e){let t=this.keyMap.get(e);if(!t)return null;if(t.prevKey!=null){for(t=this.keyMap.get(t.prevKey);t&&t.type!=="item"&&t.lastChildKey!=null;)t=this.keyMap.get(t.lastChildKey);var l;return(l=t==null?void 0:t.key)!==null&&l!==void 0?l:null}return t.parentKey}getKeyAfter(e){let t=this.keyMap.get(e);if(!t)return null;if(t.type!=="item"&&t.firstChildKey!=null)return t.firstChildKey;for(;t;){if(t.nextKey!=null)return t.nextKey;if(t.parentKey!=null)t=this.keyMap.get(t.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;(e==null?void 0:e.lastChildKey)!=null;)e=this.keyMap.get(e.lastChildKey);var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,t=new e;return t.keyMap=new Map(this.keyMap),t.firstKey=this.firstKey,t.lastKey=this.lastKey,t.itemCount=this.itemCount,t}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");e.type==="item"&&this.keyMap.get(e.key)==null&&this.itemCount++,this.keyMap.set(e.key,e)}addDescendants(e,t){this.addNode(e);let l=t.getChildren(e.key);for(let i of l)this.addDescendants(i,t)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");let t=this.keyMap.get(e);t!=null&&t.type==="item"&&this.itemCount--,this.keyMap.delete(e)}commit(e,t,l=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=t,this.frozen=!l}filter(e){let t=new this.constructor,[l,i]=k(this,t,this.firstKey,e);return t==null||t.commit(l,i),t}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1,this.itemCount=0}}function k(s,e,t,l){if(t==null)return[null,null];let i=null,n=null,r=s.getItem(t);for(;r!=null;){let a=r.filter(s,e,l);a!=null&&(a.nextKey=null,n&&(a.prevKey=n.key,n.nextKey=a.key),i==null&&(i=a),e.addNode(a),n=a),r=r.nextKey?s.getItem(r.nextKey):null}if(n&&n.type==="separator"){let a=n.prevKey;e.removeNode(n.key),a?(n=e.getItem(a),n.nextKey=null):n=null}var u,o;return[(u=i==null?void 0:i.key)!==null&&u!==void 0?u:null,(o=n==null?void 0:n.key)!==null&&o!==void 0?o:null]}class K{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}invalidateChildIndices(e){(this._minInvalidChildIndex==null||!this._minInvalidChildIndex.isConnected||e.index<this._minInvalidChildIndex.index)&&(this._minInvalidChildIndex=e,this.ownerDocument.markDirty(this))}updateChildIndices(){let e=this._minInvalidChildIndex;for(;e;)e.index=e.previousSibling?e.previousSibling.index+1:0,e=e.nextSibling;this._minInvalidChildIndex=null}appendChild(e){e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),this.isConnected&&this.ownerDocument.queueUpdate()}insertBefore(e,t){if(t==null)return this.appendChild(e);e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=t,e.previousSibling=t.previousSibling,e.index=t.index-1,this.firstChild===t?this.firstChild=e:t.previousSibling&&(t.previousSibling.nextSibling=e),t.previousSibling=e,e.parentNode=t.parentNode,this.invalidateChildIndices(e),this.isConnected&&this.ownerDocument.queueUpdate()}removeChild(e){e.parentNode!==this||!this.ownerDocument.isMounted||(this._minInvalidChildIndex===e&&(this._minInvalidChildIndex=null),e.nextSibling&&(this.invalidateChildIndices(e.nextSibling),e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.markDirty(e),this.isConnected&&this.ownerDocument.queueUpdate())}addEventListener(){}removeEventListener(){}get previousVisibleSibling(){let e=this.previousSibling;for(;e&&e.isHidden;)e=e.previousSibling;return e}get nextVisibleSibling(){let e=this.nextSibling;for(;e&&e.isHidden;)e=e.nextSibling;return e}get firstVisibleChild(){let e=this.firstChild;for(;e&&e.isHidden;)e=e.nextSibling;return e}get lastVisibleChild(){let e=this.lastChild;for(;e&&e.isHidden;)e=e.previousSibling;return e}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this._minInvalidChildIndex=null,this.ownerDocument=e}}class y extends K{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){var e;return this.parentNode instanceof y?this.parentNode.level+(((e=this.node)===null||e===void 0?void 0:e.type)==="item"?1:0):0}get node(){if(this._node==null)throw Error("Attempted to access node before it was defined. Check if setProps wasn't called before attempting to access the node.");return this._node}set node(e){this._node=e}getMutableNode(){return this.isMutated||(this.node=this.node.clone(),this.isMutated=!0),this.ownerDocument.markDirty(this),this.node}updateNode(){var e,t,l;let i=this.nextVisibleSibling,n=this.getMutableNode();n.index=this.index,n.level=this.level,n.parentKey=this.parentNode instanceof y?this.parentNode.node.key:null;var r;n.prevKey=(r=(e=this.previousVisibleSibling)===null||e===void 0?void 0:e.node.key)!==null&&r!==void 0?r:null;var u;n.nextKey=(u=i==null?void 0:i.node.key)!==null&&u!==void 0?u:null,n.hasChildNodes=!!this.firstChild;var o;n.firstChildKey=(o=(t=this.firstVisibleChild)===null||t===void 0?void 0:t.node.key)!==null&&o!==void 0?o:null;var a;if(n.lastChildKey=(a=(l=this.lastVisibleChild)===null||l===void 0?void 0:l.node.key)!==null&&a!==void 0?a:null,(n.colSpan!=null||n.colIndex!=null)&&i){var f,c;let p=((f=n.colIndex)!==null&&f!==void 0?f:n.index)+((c=n.colSpan)!==null&&c!==void 0?c:1);if(p!==i.node.colIndex){let N=i.getMutableNode();N.colIndex=p}}}setProps(e,t,l,i,n){let r,{value:u,textValue:o,id:a,...f}=e;if(this._node==null?(r=new l(a??`react-aria-${++this.ownerDocument.nodeId}`),this.node=r):r=this.getMutableNode(),f.ref=t,r.props=f,r.rendered=i,r.render=n,r.value=u,r.textValue=o||(typeof f.children=="string"?f.children:"")||e["aria-label"]||"",a!=null&&a!==r.key)throw new Error("Cannot change the id of an item");f.colSpan!=null&&(r.colSpan=f.colSpan),this.isConnected&&this.ownerDocument.queueUpdate()}get style(){let e=this;return{get display(){return e.isHidden?"none":""},set display(t){let l=t==="none";if(e.isHidden!==l){var i,n;(((i=e.parentNode)===null||i===void 0?void 0:i.firstVisibleChild)===e||((n=e.parentNode)===null||n===void 0?void 0:n.lastVisibleChild)===e)&&e.ownerDocument.markDirty(e.parentNode);let r=e.previousVisibleSibling,u=e.nextVisibleSibling;r&&e.ownerDocument.markDirty(r),u&&e.ownerDocument.markDirty(u),e.isHidden=l,e.ownerDocument.markDirty(e)}}}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,t){super(t),this.nodeType=8,this.isMutated=!0,this._index=0,this.isHidden=!1,this._node=null}}class F extends K{get isConnected(){return this.isMounted}createElement(e){return new y(e,this)}getMutableCollection(){return this.nextCollection||(this.nextCollection=this.collection.clone()),this.nextCollection}markDirty(e){this.dirtyNodes.add(e)}addNode(e){if(e.isHidden)return;let t=this.getMutableCollection();if(!t.getItem(e.node.key))for(let l of e)this.addNode(l);t.addNode(e.node)}removeNode(e){for(let l of e)this.removeNode(l);this.getMutableCollection().removeNode(e.node.key)}getCollection(){return this.inSubscription?this.collection.clone():(this.queuedRender=!1,this.updateCollection(),this.collection)}updateCollection(){for(let n of this.dirtyNodes)n instanceof y&&(!n.isConnected||n.isHidden)?this.removeNode(n):n.updateChildIndices();for(let n of this.dirtyNodes)n instanceof y&&(n.isConnected&&!n.isHidden&&(n.updateNode(),this.addNode(n)),n.isMutated=!1);if(this.dirtyNodes.clear(),this.nextCollection){var e,t,l,i;this.nextCollection.commit((l=(e=this.firstVisibleChild)===null||e===void 0?void 0:e.node.key)!==null&&l!==void 0?l:null,(i=(t=this.lastVisibleChild)===null||t===void 0?void 0:t.node.key)!==null&&i!==void 0?i:null,this.isSSR),this.isSSR||(this.collection=this.nextCollection,this.nextCollection=null)}}queueUpdate(){if(!(this.dirtyNodes.size===0||this.queuedRender)){this.queuedRender=!0,this.inSubscription=!0;for(let e of this.subscriptions)e();this.inSubscription=!1}}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.isMounted=!0,this.nextCollection=null,this.subscriptions=new Set,this.queuedRender=!1,this.inSubscription=!1,this.collection=e,this.nextCollection=e}}function w(s){let{children:e,items:t,idScope:l,addIdAndValue:i,dependencies:n=[]}=s,r=d.useMemo(()=>new WeakMap,n);return d.useMemo(()=>{if(t&&typeof e=="function"){let a=[];for(let f of t){let c=r.get(f);if(!c){c=e(f);var u,o;let p=(o=(u=c.props.id)!==null&&u!==void 0?u:f.key)!==null&&o!==void 0?o:f.id;if(p==null)throw new Error("Could not determine key for item");l&&(p=l+":"+p),c=d.cloneElement(c,i?{key:p,id:p,value:f}:{key:p}),r.set(f,c)}a.push(c)}return a}else if(typeof e!="function")return e},[e,t,r,l,i])}const I=d.createContext(!1),v=d.createContext(null);function te(s){if(d.useContext(v))return s.content;let{collection:t,document:l}=W(s.createCollection);return h.createElement(h.Fragment,null,h.createElement(E,null,h.createElement(v.Provider,{value:l},s.content)),h.createElement(B,{render:s.children,collection:t}))}function B({collection:s,render:e}){return e(s)}function U(s,e,t){let l=S(),i=d.useRef(l);i.current=l;let n=d.useCallback(()=>i.current?t():e(),[e,t]);return P.useSyncExternalStore(s,n)}const L=typeof h.useSyncExternalStore=="function"?h.useSyncExternalStore:U;function W(s){let[e]=d.useState(()=>new F((s==null?void 0:s())||new q)),t=d.useCallback(r=>e.subscribe(r),[e]),l=d.useCallback(()=>{let r=e.getCollection();return e.isSSR&&e.resetAfterSSR(),r},[e]),i=d.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]),n=L(t,l,i);return V(()=>(e.isMounted=!0,()=>{e.isMounted=!1}),[e]),{collection:n,document:e}}const x=d.createContext(null);function T(s){var e;return e=class extends m{},e.type=s,e}function M(s,e,t,l,i,n){typeof s=="string"&&(s=T(s));let r=d.useCallback(o=>{o==null||o.setProps(e,t,s,l,n)},[e,t,l,n,s]),u=d.useContext(x);if(u){let o=u.ownerDocument.nodesByProps.get(e);return o||(o=u.ownerDocument.createElement(s.type),o.setProps(e,t,s,l,n),u.appendChild(o),u.ownerDocument.updateCollection(),u.ownerDocument.nodesByProps.set(e,o)),i?h.createElement(x.Provider,{value:o},i):null}return h.createElement(s.type,{ref:r},i)}function ie(s,e){let t=({node:i})=>e(i.props,i.props.ref,i),l=d.forwardRef((i,n)=>{let r=d.useContext(b);if(!d.useContext(I)){if(e.length>=3)throw new Error(e.name+" cannot be rendered outside a collection.");return e(i,n)}return M(s,i,n,"children"in i?i.children:null,null,o=>h.createElement(b.Provider,{value:r},h.createElement(t,{node:o})))});return l.displayName=e.name,l}function ne(s,e,t=D){let l=({node:n})=>e(n.props,n.props.ref,n),i=d.forwardRef((n,r)=>{let u=t(n);var o;return(o=M(s,n,r,null,u,a=>h.createElement(l,{node:a})))!==null&&o!==void 0?o:h.createElement(h.Fragment,null)});return i.displayName=e.name,i}function D(s){return w({...s,addIdAndValue:!0})}const C=d.createContext(null);function le(s){let e=d.useContext(C),t=((e==null?void 0:e.dependencies)||[]).concat(s.dependencies),l=s.idScope||(e==null?void 0:e.idScope),i=D({...s,idScope:l,dependencies:t});return d.useContext(v)&&(i=h.createElement(j,null,i)),e=d.useMemo(()=>({dependencies:t,idScope:l}),[l,...t]),h.createElement(C.Provider,{value:e},i)}function j({children:s}){let e=d.useContext(v),t=d.useMemo(()=>h.createElement(v.Provider,{value:null},h.createElement(I.Provider,{value:!0},s)),[s]);return S()?h.createElement(x.Provider,{value:e},t):R.createPortal(t,e)}const se=d.createContext(null),G={CollectionRoot({collection:s,renderDropIndicator:e}){return g(s,null,e)},CollectionBranch({collection:s,parent:e,renderDropIndicator:t}){return g(s,e,t)}};function g(s,e,t){return w({items:e?s.getChildren(e.key):s,dependencies:[t],children(l){let i=l.render(l);return!t||l.type!=="item"?i:h.createElement(h.Fragment,null,t({type:"item",key:l.key,dropPosition:"before"}),i,J(s,l,t))}})}function J(s,e,t){let l=e.key,i=s.getKeyAfter(l),n=i!=null?s.getItem(i):null;for(;n!=null&&n.type!=="item";)i=s.getKeyAfter(n.key),n=i!=null?s.getItem(i):null;let r=e.nextKey!=null?s.getItem(e.nextKey):null;for(;r!=null&&r.type!=="item";)r=r.nextKey!=null?s.getItem(r.nextKey):null;let u=[];if(r==null){let o=e;for(;o&&(!n||o.parentKey!==n.parentKey&&n.level<o.level);){let a=t({type:"item",key:o.key,dropPosition:"after"});d.isValidElement(a)&&u.push(d.cloneElement(a,{key:`${o.key}-after`})),o=o.parentKey!=null?s.getItem(o.parentKey):null}}return u}const re=d.createContext(G);function oe(s){return d.useMemo(()=>s!=null?new Set([s]):null,[s])}export{ie as $,te as a,le as b,ne as c,_ as d,H as e,re as f,se as g,z as h,A as i,m as j,G as k,oe as l,J as m,w as n,$ as o,q as p};
