import{d as Z,$ as ue,a as pe}from"./utils-CJIIAbfy.js";import{r as me}from"./index-hU9uh3Ty.js";import{r as C,c as ge,e as ve}from"./iframe-jnlgsi9p.js";import{A as $e,c as he}from"./useFocusRing-CduhpbzF.js";import{e as J}from"./Button-BUM_H9uj.js";import{$ as V}from"./useResizeObserver-CvIBu8f8.js";import{$ as xe}from"./useControlledState-cdO1Ns9d.js";function Be(e,t=!0){let[l,n]=C.useState(!0),o=l&&t;return Z(()=>{if(o&&e.current&&"getAnimations"in e.current)for(let r of e.current.getAnimations())r instanceof CSSTransition&&r.cancel()},[e,o]),ie(e,o,C.useCallback(()=>n(!1),[])),o}function Xe(e,t){let[l,n]=C.useState(t?"open":"closed");switch(l){case"open":t||n("exiting");break;case"closed":case"exiting":t&&n("open");break}let o=l==="exiting";return ie(e,o,C.useCallback(()=>{n(r=>r==="exiting"?"closed":r)},[])),o}function ie(e,t,l){Z(()=>{if(t&&e.current){if(!("getAnimations"in e.current)){l();return}let n=e.current.getAnimations();if(n.length===0){l();return}let o=!1;return Promise.all(n.map(r=>r.finished)).then(()=>{o||me.flushSync(()=>{l()})}).catch(()=>{}),()=>{o=!0}}},[e,t,l])}const k={top:"top",bottom:"top",left:"left",right:"left"},U={top:"bottom",bottom:"top",left:"right",right:"left"},be={top:"left",left:"top"},K={top:"height",left:"width"},ae={width:"totalWidth",height:"totalHeight"},j={};let P=typeof document<"u"?window.visualViewport:null;function ee(e){let t=0,l=0,n=0,o=0,r=0,c=0,i={};var h;let d=((h=P==null?void 0:P.scale)!==null&&h!==void 0?h:1)>1;if(e.tagName==="BODY"){let u=document.documentElement;n=u.clientWidth,o=u.clientHeight;var p;t=(p=P==null?void 0:P.width)!==null&&p!==void 0?p:n;var g;l=(g=P==null?void 0:P.height)!==null&&g!==void 0?g:o,i.top=u.scrollTop||e.scrollTop,i.left=u.scrollLeft||e.scrollLeft,P&&(r=P.offsetTop,c=P.offsetLeft)}else({width:t,height:l,top:r,left:c}=B(e,!1)),i.top=e.scrollTop,i.left=e.scrollLeft,n=t,o=l;if($e()&&(e.tagName==="BODY"||e.tagName==="HTML")&&d){i.top=0,i.left=0;var m;r=(m=P==null?void 0:P.pageTop)!==null&&m!==void 0?m:0;var s;c=(s=P==null?void 0:P.pageLeft)!==null&&s!==void 0?s:0}return{width:t,height:l,totalWidth:n,totalHeight:o,scroll:i,top:r,left:c}}function we(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function te(e,t,l,n,o,r,c){var i;let h=(i=o.scroll[e])!==null&&i!==void 0?i:0,d=n[K[e]],p=n.scroll[k[e]]+r,g=d+n.scroll[k[e]]-r,m=t-h+c[e]-n[k[e]],s=t-h+l+c[e]-n[k[e]];return m<p?p-m:s>g?Math.max(g-s,p-m):0}function Ee(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function le(e){if(j[e])return j[e];let[t,l]=e.split(" "),n=k[t]||"right",o=be[n];k[l]||(l="center");let r=K[n],c=K[o];return j[e]={placement:t,crossPlacement:l,axis:n,crossAxis:o,size:r,crossSize:c},j[e]}function q(e,t,l,n,o,r,c,i,h,d){let{placement:p,crossPlacement:g,axis:m,crossAxis:s,size:u,crossSize:v}=n,f={};var T;f[s]=(T=e[s])!==null&&T!==void 0?T:0;var a,w,b,A;g==="center"?f[s]+=(((a=e[v])!==null&&a!==void 0?a:0)-((w=l[v])!==null&&w!==void 0?w:0))/2:g!==s&&(f[s]+=((b=e[v])!==null&&b!==void 0?b:0)-((A=l[v])!==null&&A!==void 0?A:0)),f[s]+=r;const $=e[s]-l[v]+h+d,S=e[s]+e[v]-h-d;if(f[s]=J(f[s],$,S),p===m){const z=i?c[u]:t[ae[u]];f[U[m]]=Math.floor(z-e[m]+o)}else f[m]=Math.floor(e[m]+e[u]+o);return f}function Pe(e,t,l,n,o,r,c,i){const h=n?l.height:t[ae.height];var d;let p=e.top!=null?l.top+e.top:l.top+(h-((d=e.bottom)!==null&&d!==void 0?d:0)-c);var g,m,s,u,v,f;let T=i!=="top"?Math.max(0,t.height+t.top+((g=t.scroll.top)!==null&&g!==void 0?g:0)-p-(((m=o.top)!==null&&m!==void 0?m:0)+((s=o.bottom)!==null&&s!==void 0?s:0)+r)):Math.max(0,p+c-(t.top+((u=t.scroll.top)!==null&&u!==void 0?u:0))-(((v=o.top)!==null&&v!==void 0?v:0)+((f=o.bottom)!==null&&f!==void 0?f:0)+r));return Math.min(t.height-r*2,T)}function oe(e,t,l,n,o,r){let{placement:c,axis:i,size:h}=r;var d,p;if(c===i)return Math.max(0,l[i]-e[i]-((d=e.scroll[i])!==null&&d!==void 0?d:0)+t[i]-((p=n[i])!==null&&p!==void 0?p:0)-n[U[i]]-o);var g;return Math.max(0,e[h]+e[i]+e.scroll[i]-t[i]-l[i]-l[h]-((g=n[i])!==null&&g!==void 0?g:0)-n[U[i]]-o)}function Ce(e,t,l,n,o,r,c,i,h,d,p,g,m,s,u,v){let f=le(e),{size:T,crossAxis:a,crossSize:w,placement:b,crossPlacement:A}=f,$=q(t,i,l,f,p,g,d,m,u,v),S=p,z=oe(i,d,t,o,r+p,f);if(c&&n[T]>z){let W=le(`${U[b]} ${A}`),de=q(t,i,l,W,p,g,d,m,u,v);oe(i,d,t,o,r+p,W)>z&&(f=W,$=de,S=p)}let R="bottom";f.axis==="top"?f.placement==="top"?R="top":f.placement==="bottom"&&(R="bottom"):f.crossAxis==="top"&&(f.crossPlacement==="top"?R="bottom":f.crossPlacement==="bottom"&&(R="top"));let y=te(a,$[a],l[w],i,h,r,d);$[a]+=y;let I=Pe($,i,d,m,o,r,l.height,R);s&&s<I&&(I=s),l.height=Math.min(l.height,I),$=q(t,i,l,f,S,g,d,m,u,v),y=te(a,$[a],l[w],i,h,r,d),$[a]+=y;let E={},L=t[a]-$[a]-o[k[a]],N=L+.5*t[w];const X=u/2+v;var H,O,F,M;const _=k[a]==="left"?((H=o.left)!==null&&H!==void 0?H:0)+((O=o.right)!==null&&O!==void 0?O:0):((F=o.top)!==null&&F!==void 0?F:0)+((M=o.bottom)!==null&&M!==void 0?M:0),Y=l[w]-_-u/2-v,G=t[a]+u/2-($[a]+o[k[a]]),ce=t[a]+t[w]-u/2-($[a]+o[k[a]]),se=J(N,G,ce);E[a]=J(se,X,Y),{placement:b,crossPlacement:A}=f,u?L=E[a]:A==="right"?L+=t[w]:A==="center"&&(L+=t[w]/2);let D=b==="left"||b==="top"?l[T]:0,fe={x:b==="top"||b==="bottom"?L:D,y:b==="left"||b==="right"?L:D};return{position:$,maxHeight:I,arrowOffsetLeft:E.left,arrowOffsetTop:E.top,placement:b,triggerAnchorPoint:fe}}function Le(e){let{placement:t,targetNode:l,overlayNode:n,scrollNode:o,padding:r,shouldFlip:c,boundaryElement:i,offset:h,crossOffset:d,maxHeight:p,arrowSize:g=0,arrowBoundaryOffset:m=0}=e,s=n instanceof HTMLElement?Te(n):document.documentElement,u=s===document.documentElement;const v=window.getComputedStyle(s).position;let f=!!v&&v!=="static",T=u?B(l,!1):ne(l,s,!1);if(!u){let{marginTop:E,marginLeft:L}=window.getComputedStyle(l);T.top+=parseInt(E,10)||0,T.left+=parseInt(L,10)||0}let a=B(n,!0),w=Ee(n);var b,A;a.width+=((b=w.left)!==null&&b!==void 0?b:0)+((A=w.right)!==null&&A!==void 0?A:0);var $,S;a.height+=(($=w.top)!==null&&$!==void 0?$:0)+((S=w.bottom)!==null&&S!==void 0?S:0);let z=we(o),R=ee(i),y=ee(s),I=i.tagName==="BODY"?B(s,!1):ne(s,i,!1);return s.tagName==="HTML"&&i.tagName==="BODY"&&(y.scroll.top=0,y.scroll.left=0),Ce(t,T,a,z,w,r,c,R,y,I,h,d,f,p,g,m)}function Q(e,t){let{top:l,left:n,width:o,height:r}=e.getBoundingClientRect();return t&&e instanceof e.ownerDocument.defaultView.HTMLElement&&(o=e.offsetWidth,r=e.offsetHeight),{top:l,left:n,width:o,height:r}}function B(e,t){let{top:l,left:n,width:o,height:r}=Q(e,t),{scrollTop:c,scrollLeft:i,clientTop:h,clientLeft:d}=document.documentElement;return{top:l+c-h,left:n+i-d,width:o,height:r}}function ne(e,t,l){let n=window.getComputedStyle(e),o;if(n.position==="fixed")o=Q(e,l);else{o=B(e,l);let r=B(t,l),c=window.getComputedStyle(t);r.top+=(parseInt(c.borderTopWidth,10)||0)-t.scrollTop,r.left+=(parseInt(c.borderLeftWidth,10)||0)-t.scrollLeft,o.top-=r.top,o.left-=r.left}return o.top-=parseInt(n.marginTop,10)||0,o.left-=parseInt(n.marginLeft,10)||0,o}function Te(e){let t=e.offsetParent;if(t&&t===document.body&&window.getComputedStyle(t).position==="static"&&!re(t)&&(t=document.documentElement),t==null)for(t=e.parentElement;t&&!re(t);)t=t.parentElement;return t||document.documentElement}function re(e){let t=window.getComputedStyle(e);return t.transform!=="none"||/transform|perspective/.test(t.willChange)||t.filter!=="none"||t.contain==="paint"||"backdropFilter"in t&&t.backdropFilter!=="none"||"WebkitBackdropFilter"in t&&t.WebkitBackdropFilter!=="none"}const Ae=new WeakMap;function Se(e){let{triggerRef:t,isOpen:l,onClose:n}=e;C.useEffect(()=>{if(!l||n===null)return;let o=r=>{let c=r.target;if(!t.current||c instanceof Node&&!c.contains(t.current)||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)return;let i=n||Ae.get(t.current);i&&i()};return window.addEventListener("scroll",o,!0),()=>{window.removeEventListener("scroll",o,!0)}},[l,n,t])}let x=typeof document<"u"?window.visualViewport:null;function Ze(e){let{direction:t}=ge(),{arrowSize:l,targetRef:n,overlayRef:o,arrowRef:r,scrollRef:c=o,placement:i="bottom",containerPadding:h=12,shouldFlip:d=!0,boundaryElement:p=typeof document<"u"?document.body:null,offset:g=0,crossOffset:m=0,shouldUpdatePosition:s=!0,isOpen:u=!0,onClose:v,maxHeight:f,arrowBoundaryOffset:T=0}=e,[a,w]=C.useState(null),b=[s,i,o.current,n.current,r==null?void 0:r.current,c.current,h,d,p,g,m,u,t,f,T,l],A=C.useRef(x==null?void 0:x.scale);C.useEffect(()=>{u&&(A.current=x==null?void 0:x.scale)},[u]);let $=C.useCallback(()=>{if(s===!1||!u||!o.current||!n.current||!p||(x==null?void 0:x.scale)!==A.current)return;let E=null;if(c.current&&c.current.contains(document.activeElement)){var L;let _=(L=document.activeElement)===null||L===void 0?void 0:L.getBoundingClientRect(),Y=c.current.getBoundingClientRect();var N;if(E={type:"top",offset:((N=_==null?void 0:_.top)!==null&&N!==void 0?N:0)-Y.top},E.offset>Y.height/2){E.type="bottom";var X;E.offset=((X=_==null?void 0:_.bottom)!==null&&X!==void 0?X:0)-Y.bottom}}let H=o.current;if(!f&&o.current){var O;H.style.top="0px",H.style.bottom="";var F;H.style.maxHeight=((F=(O=window.visualViewport)===null||O===void 0?void 0:O.height)!==null&&F!==void 0?F:window.innerHeight)+"px"}let M=Le({placement:_e(i,t),overlayNode:o.current,targetNode:n.current,scrollNode:c.current||o.current,padding:h,shouldFlip:d,boundaryElement:p,offset:g,crossOffset:m,maxHeight:f,arrowSize:l??(r!=null&&r.current?Q(r.current,!0).width:0),arrowBoundaryOffset:T});if(M.position){if(H.style.top="",H.style.bottom="",H.style.left="",H.style.right="",Object.keys(M.position).forEach(_=>H.style[_]=M.position[_]+"px"),H.style.maxHeight=M.maxHeight!=null?M.maxHeight+"px":"",E&&document.activeElement&&c.current){let _=document.activeElement.getBoundingClientRect(),Y=c.current.getBoundingClientRect(),G=_[E.type]-Y[E.type];c.current.scrollTop+=G-E.offset}w(M)}},b);Z($,b),He($),V({ref:o,onResize:$}),V({ref:n,onResize:$});let S=C.useRef(!1);Z(()=>{let E,L=()=>{S.current=!0,clearTimeout(E),E=setTimeout(()=>{S.current=!1},500),$()},N=()=>{S.current&&L()};return x==null||x.addEventListener("resize",L),x==null||x.addEventListener("scroll",N),()=>{x==null||x.removeEventListener("resize",L),x==null||x.removeEventListener("scroll",N)}},[$]);let z=C.useCallback(()=>{S.current||v==null||v()},[v,S]);Se({triggerRef:n,isOpen:u,onClose:v&&z});var R,y,I;return{overlayProps:{style:{position:a?"absolute":"fixed",top:a?void 0:0,left:a?void 0:0,zIndex:1e5,...a==null?void 0:a.position,maxHeight:(R=a==null?void 0:a.maxHeight)!==null&&R!==void 0?R:"100vh"}},placement:(y=a==null?void 0:a.placement)!==null&&y!==void 0?y:null,triggerAnchorPoint:(I=a==null?void 0:a.triggerAnchorPoint)!==null&&I!==void 0?I:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:a==null?void 0:a.arrowOffsetLeft,top:a==null?void 0:a.arrowOffsetTop}},updatePosition:$}}function He(e){Z(()=>(window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}),[e])}function _e(e,t){return t==="rtl"?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}const Re=C.createContext({});function je(){var e;return(e=C.useContext(Re))!==null&&e!==void 0?e:{}}function Ue(e){let[t,l]=xe(e.isOpen,e.defaultOpen||!1,e.onOpenChange);const n=C.useCallback(()=>{l(!0)},[l]),o=C.useCallback(()=>{l(!1)},[l]),r=C.useCallback(()=>{l(!t)},[l,t]);return{isOpen:t,setOpen:l,open:n,close:o,toggle:r}}const ye=C.createContext({placement:"bottom"}),Ge=C.forwardRef(function(t,l){[t,l]=ue(t,l,ye);let n=t.placement,o={position:"absolute",transform:n==="top"||n==="bottom"?"translateX(-50%)":"translateY(-50%)"};n!=null&&(o[n]="100%");let r=pe({...t,defaultClassName:"react-aria-OverlayArrow",values:{placement:n}});r.style&&Object.keys(r.style).forEach(i=>r.style[i]===void 0&&delete r.style[i]);let c=he(t);return ve.createElement("div",{...c,...r,style:{...o,...r.style},ref:l,"data-placement":n})});export{Ge as $,je as a,Ue as b,Xe as c,Ze as d,Be as e,ye as f,Ae as g};
