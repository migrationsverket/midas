import{j as a}from"./jsx-runtime-DH9XN8A8.js";import{r as u,R as p}from"./index-v7USjxUg.js";import{a as S,b as V,c as D}from"./Form-6qhXXIxn.js";import{$ as F,a as _,T as i,b as k}from"./TextField.module-BQ_LG1IS.js";import{$ as A,a as C}from"./useField-B1pHB-Nx.js";import{$ as O,a as j}from"./Text-DrJ9K20X.js";import{$ as R,a as W,b as z,c as w,d as N,x as L,y as M,z as G,n as J,A as K}from"./useFocusable-CqyV9KfR.js";import{c as Q}from"./clsx-B-dksMZM.js";import{B as U}from"./Button-ky_ey7R1.js";const I=u.createContext({});let X=r=>{let{onHoverStart:e,onHoverChange:t,onHoverEnd:s,...d}=r;return d};const ue=u.forwardRef(function(e,t){[e,t]=R(e,t,I);let{hoverProps:s,isHovered:d}=W(e),{isFocused:n,isFocusVisible:$,focusProps:c}=z({isTextInput:!0,autoFocus:e.autoFocus}),l=!!e["aria-invalid"]&&e["aria-invalid"]!=="false",f=w({...e,values:{isHovered:d,isFocused:n,isFocusVisible:$,isDisabled:e.disabled||!1,isInvalid:l},defaultClassName:"react-aria-TextArea"});return p.createElement("textarea",{...N(X(e),c,s),...f,ref:t,"data-focused":n||void 0,"data-disabled":e.disabled||void 0,"data-hovered":d||void 0,"data-focus-visible":$||void 0,"data-invalid":l||void 0})}),Y=u.createContext(null),Z=u.forwardRef(function(e,t){[e,t]=R(e,t,Y);let{validationBehavior:s}=L(S)||{};var d,n;let $=(n=(d=e.validationBehavior)!==null&&d!==void 0?d:s)!==null&&n!==void 0?n:"native",c=u.useRef(null),[l,f]=R({},c,F),[b,x]=M(),[m,o]=u.useState("input"),{labelProps:v,inputProps:T,descriptionProps:H,errorMessageProps:B,...h}=_({...G(e),inputElementType:m,label:x,validationBehavior:$},f),y=u.useCallback(g=>{f.current=g,g&&o(g instanceof HTMLTextAreaElement?"textarea":"input")},[f]),P=w({...e,values:{isDisabled:e.isDisabled||!1,isInvalid:h.isInvalid,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1},defaultClassName:"react-aria-TextField"}),E=J(e);return delete E.id,p.createElement("div",{...E,...P,ref:t,slot:e.slot||void 0,"data-disabled":e.isDisabled||void 0,"data-invalid":h.isInvalid||void 0,"data-readonly":e.isReadOnly||void 0,"data-required":e.isRequired||void 0},p.createElement(K,{values:[[A,{...v,ref:b}],[F,{...N(T,l),ref:y}],[I,{...T,ref:y}],[O,{slots:{description:H,errorMessage:B}}],[V,h]]},P.children))}),ee=({label:r,description:e,errorMessage:t,validationType:s,validate:d,maxCharacters:n,showCounter:$,...c})=>{const[l,f]=p.useState(""),b=o=>{const v=o.target.value;f(v)},x=o=>s==="ssn"?ae.test(o)?null:"Felaktigt personnummer":s instanceof RegExp?new RegExp(s).test(o)?null:t==null?void 0:t.toString():n?n&&o.length>n?`Du har angett ${o.length-n} tecken för mycket. Fältet är begränsat till ${n} tecken.`:null:d?d(o):!0,m=()=>n?a.jsxs("span",{className:Q(i.count,l.length>n&&i.countExceeded),children:[l.length," / ",n]}):$?a.jsx("span",{className:i.count,children:l.length}):null;return a.jsx(Z,{className:i.inputField,validate:x,...c,children:a.jsxs(q,{label:r,description:e,errorMessage:t,children:[a.jsx(m,{}),a.jsxs("div",{className:i.wrap,children:[a.jsx(k,{type:c.type,className:i.input,onChange:b,onBlur:b}),a.jsx(te,{type:c.type,input:l})]})]})})},te=({type:r,input:e})=>{const[t,s]=p.useState(!1);return r==="password"?a.jsxs(a.Fragment,{children:[t&&a.jsx(j,{slot:"description",className:i.passwordText,children:e}),a.jsx(U,{variant:"tertiary",onPress:()=>s(!t),className:i.passwordButton,children:t?"Dölj":"Visa"})]}):null},q=({label:r,description:e,errorMessage:t,children:s})=>a.jsxs("div",{className:i.inputWrapper,children:[r&&a.jsx(C,{className:i.label,children:r}),e&&a.jsx(j,{slot:"description",className:i.text,children:e}),a.jsx(D,{className:i.fieldError,children:t}),s]}),ae=new RegExp("^(?:(?:19|20)?\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])(?:[-+ ]?\\d{4})?|\\d{4}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])(?:[-+ ]?\\d{4}))$");ee.__docgenInfo={description:"",methods:[],displayName:"TextField",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},label:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},errorMessage:{required:!1,tsType:{name:"union",raw:"string | ((validation: ValidationResult) => string) | undefined",elements:[{name:"string"},{name:"unknown"},{name:"undefined"}]},description:""},validationType:{required:!1,tsType:{name:"union",raw:"'ssn' | RegExp",elements:[{name:"literal",value:"'ssn'"},{name:"RegExp"}]},description:""},maxCharacters:{required:!1,tsType:{name:"number"},description:""},showCounter:{required:!1,tsType:{name:"boolean"},description:""}},composes:["AriaTextFieldProps"]};q.__docgenInfo={description:"",methods:[],displayName:"InputWrapper"};export{Z as $,q as I,ee as T,ue as a};
