import{e as E,b as S,$ as N,a as I,k as W,m as h}from"./utils-C4wbeGu1.js";import{$ as k,a as q,b as z}from"./OverlayArrow-gTlSlHE6.js";import{a as B}from"./Button-Q90uzmgb.js";import{$ as G}from"./RSPContexts-CeCCo7XS.js";import{$ as M}from"./filterDOMProps-BSfnXAP7.js";import{r as i,R as n}from"./index-BbAIUH2N.js";import{$ as T,a as j,b as A,c as R,d as J}from"./useDialog-m6eWD56q.js";import{m as Q}from"./useFocusRing-BPh1BF7L.js";import{a as V}from"./Hidden-DizQ9ce0.js";import{a as X,$ as Y}from"./useOverlayTriggerState-jVMRu8gU.js";import{$ as Z}from"./context-gxVqox2x.js";import{$ as L,a as D}from"./DismissButton-CGedck5U.js";function U(s,e){let{triggerRef:l,popoverRef:t,groupRef:a,isNonModal:r,isKeyboardDismissDisabled:d,shouldCloseOnInteractOutside:f,...c}=s,u=c.trigger==="SubmenuTrigger",{overlayProps:g,underlayProps:x}=L({isOpen:e.isOpen,onClose:e.close,shouldCloseOnBlur:!0,isDismissable:!r||u,isKeyboardDismissDisabled:d,shouldCloseOnInteractOutside:f},a??t),{overlayProps:p,arrowProps:y,placement:b}=X({...c,targetRef:l,overlayRef:t,isOpen:e.isOpen,onClose:r&&!u?e.close:null});return T({isDisabled:r||!e.isOpen}),E(()=>{if(e.isOpen&&t.current){var o,$;return r?j((o=a==null?void 0:a.current)!==null&&o!==void 0?o:t.current):A([($=a==null?void 0:a.current)!==null&&$!==void 0?$:t.current])}},[r,e.isOpen,t,a]),{popoverProps:S(g,p),arrowProps:y,underlayProps:x,placement:b}}const _=i.createContext(null),w=i.createContext(null),$e=i.forwardRef(function(e,l){[e,l]=N(e,l,_);let t=i.useContext(F),a=Y(e),r=e.isOpen!=null||e.defaultOpen!=null||!t?a:t,d=k(l,r.isOpen)||e.isExiting||!1,f=V(),{direction:c}=Z();if(f){let u=e.children;return typeof u=="function"&&(u=u({trigger:e.trigger||null,placement:"bottom",isEntering:!1,isExiting:!1,defaultChildren:null})),n.createElement(n.Fragment,null,u)}return r&&!r.isOpen&&!d?null:n.createElement(ee,{...e,triggerRef:e.triggerRef,state:r,popoverRef:l,isExiting:d,dir:c})});function ee({state:s,isExiting:e,UNSTABLE_portalContainer:l,...t}){let a=i.useRef(null),[r,d]=i.useState(0),f=i.useRef(null),c=i.useContext(w),u=c&&t.trigger==="SubmenuTrigger";E(()=>{a.current&&s.isOpen&&d(a.current.getBoundingClientRect().width)},[s.isOpen,a]);var g;let{popoverProps:x,underlayProps:p,arrowProps:y,placement:b}=U({...t,offset:(g=t.offset)!==null&&g!==void 0?g:8,arrowSize:r,groupRef:u?c:f},s),o=t.popoverRef,$=q(o,!!b)||t.isEntering||!1,v=I({...t,defaultClassName:"react-aria-Popover",values:{trigger:t.trigger||null,placement:b,isEntering:$,isExiting:e}}),C=!t.isNonModal||t.trigger==="SubmenuTrigger",[m,K]=i.useState(!1);E(()=>{o.current&&K(C&&!o.current.querySelector("[role=dialog]"))},[o,C]),i.useEffect(()=>{m&&o.current&&!o.current.contains(document.activeElement)&&Q(o.current)},[m,o]);let H={...x.style,...v.style},O=n.createElement("div",{...S(M(t),x),...v,role:m?"dialog":void 0,tabIndex:m?-1:void 0,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],ref:o,slot:t.slot||void 0,style:H,dir:t.dir,"data-trigger":t.trigger,"data-placement":b,"data-entering":$||void 0,"data-exiting":e||void 0},!t.isNonModal&&n.createElement(D,{onDismiss:s.close}),n.createElement(z.Provider,{value:{...y,placement:b,ref:a}},v.children),n.createElement(D,{onDismiss:s.close}));if(!u)return n.createElement(R,{...t,shouldContainFocus:m,isExiting:e,portalContainer:l},!t.isNonModal&&s.isOpen&&n.createElement("div",{"data-testid":"underlay",...p,style:{position:"fixed",inset:0}}),n.createElement("div",{ref:f,style:{display:"contents"}},n.createElement(w.Provider,{value:f},O)));var P;return n.createElement(R,{...t,shouldContainFocus:m,isExiting:e,portalContainer:(P=l??(c==null?void 0:c.current))!==null&&P!==void 0?P:void 0},O)}const te=i.createContext(null),F=i.createContext(null),me=i.forwardRef(function(e,l){let t=e["aria-labelledby"];[e,l]=N(e,l,te);let{dialogProps:a,titleProps:r}=J({...e,"aria-labelledby":t},l),d=i.useContext(F);!a["aria-label"]&&!a["aria-labelledby"]&&(e["aria-labelledby"]?a["aria-labelledby"]=e["aria-labelledby"]:console.warn('If a Dialog does not contain a <Heading slot="title">, it must have an aria-label or aria-labelledby attribute for accessibility.'));let f=I({defaultClassName:"react-aria-Dialog",className:e.className,style:e.style,children:e.children,values:{close:(d==null?void 0:d.close)||(()=>{})}});return n.createElement("section",{...M(e),...a,...f,ref:l,slot:e.slot||void 0},n.createElement(W,{values:[[G,{slots:{[h]:{},title:{...r,level:2}}}],[B,{slots:{[h]:{},close:{onPress:()=>d==null?void 0:d.close()}}}]]},f.children))});export{F as $,_ as a,te as b,$e as c,me as d};
