import{r as o,e as we,j as a,o as Ne}from"./iframe-vngjZ-4P.js";import{a as Ke,b as _e}from"./RSPContexts-1mbHIt5l.js";import{e as ze,g as E,d as qe,n as Ue,b as _,i as Me,k as He,l as Oe}from"./utils-DHeliekZ.js";import{x as Je,J as We,t as Ge,q as B,r as Ze}from"./useFocusRing-DUbxX868.js";import{$ as Qe}from"./useLabels-se4Xxikx.js";import{$ as Xe}from"./useEvent-DtJ9s--c.js";import{j as w,k as Ye,l as et,m as N,n as K,o as tt,p as rt}from"./SelectionManager-CAQN8lul.js";import{$ as at}from"./useLocalizedStringFormatter-CZE4fUbg.js";import{$ as ot}from"./useControlledState-TuR8R_1y.js";import{$ as z,a as lt,b as it}from"./Select-BY6IHvQQ.js";import{b as st,$ as nt,a as ut}from"./Tag-RSRlTjDQ.js";import{a as ct,L as dt}from"./Label-BwJNq3HW.js";import{T as ft,I as pt}from"./TextField-j6cO854x.js";import{B as mt}from"./Button-fRzOyLJW.js";import{C as bt}from"./chevron-down-BE_GVH-k.js";import{$ as $t}from"./useFilter-Dg9Yi-7V.js";import{T as vt}from"./Text-By4ps0no.js";import{F as xt}from"./FieldError-DztSinTd.js";import{P as gt}from"./Popover-CLHREvEz.js";import{a as ht,L as q}from"./ListBoxItem-cC4UGHhv.js";import"./preload-helper-PPVm8Dsz.js";import"./clsx-B-dksMZM.js";import"./index-CvXFvuDV.js";import"./index-ukHcnXjJ.js";import"./scrollIntoView-3eYklhXT.js";import"./SelectionIndicator-D6kFnVhK.js";import"./useDescription-DyNeAMeF.js";import"./LocalizedStringFormatter-wnoc2RuQ.js";import"./Button-BC9sg2r9.js";import"./Hidden-Bz5znElO.js";import"./useButton-Dc_1rKgZ.js";import"./Form-Bewd3abj.js";import"./useFormValidation-CWTit8yj.js";import"./intlStrings-ZMTSFH_M.js";import"./ListBox-B2iApwqe.js";import"./Collection-QNqKIXJO.js";import"./index-CaDPZtqS.js";import"./DragAndDrop-p1SA1tp5.js";import"./getScrollParent-BN7bdp6P.js";import"./Separator-BCXWfzeX.js";import"./ListKeyboardDelegate-BjXp0VMi.js";import"./Text-BbKxmc2D.js";import"./inertValue-BJdH0idx.js";import"./useListState-yNkFcwlJ.js";import"./Dialog-C4yb9t_s.js";import"./OverlayArrow-B5NjMHxX.js";import"./useResizeObserver-ClSKlH08.js";import"./PressResponder-BJWrQB02.js";import"./VisuallyHidden-b4ZPYca2.js";import"./useField-IYEadwcm.js";import"./useHighlightSelectionDescription-DMHX1kUY.js";import"./useUpdateEffect-CDF8NYOP.js";import"./useHasTabbableChild-C3RJdi5h.js";import"./clsx-Ciqy0D92.js";import"./x-dukuuXlu.js";import"./createLucideIcon-CJOpBfq1.js";import"./useLocalizedStringFormatter-CsTZX4GC.js";import"./Heading-pu9kpDJD.js";import"./info-BmAtTYbP.js";import"./TextFieldBase-CWFDzmMi.js";import"./Group-lmL1s7XS.js";import"./Input-DKSDi64T.js";import"./useTextField-Ce0jxjTv.js";import"./TextField.module-1-_3qsJZ.js";import"./Button.module-CtQ1deO8.js";import"./Virtualizer-DLPL6Cr9.js";var U={};U={collectionLabel:"مقترحات"};var M={};M={collectionLabel:"Предложения"};var H={};H={collectionLabel:"Návrhy"};var O={};O={collectionLabel:"Forslag"};var J={};J={collectionLabel:"Empfehlungen"};var W={};W={collectionLabel:"Προτάσεις"};var G={};G={collectionLabel:"Suggestions"};var Z={};Z={collectionLabel:"Sugerencias"};var Q={};Q={collectionLabel:"Soovitused"};var X={};X={collectionLabel:"Ehdotukset"};var Y={};Y={collectionLabel:"Suggestions"};var ee={};ee={collectionLabel:"הצעות"};var te={};te={collectionLabel:"Prijedlozi"};var re={};re={collectionLabel:"Javaslatok"};var ae={};ae={collectionLabel:"Suggerimenti"};var oe={};oe={collectionLabel:"候補"};var le={};le={collectionLabel:"제안"};var ie={};ie={collectionLabel:"Pasiūlymai"};var se={};se={collectionLabel:"Ieteikumi"};var ne={};ne={collectionLabel:"Forslag"};var ue={};ue={collectionLabel:"Suggesties"};var ce={};ce={collectionLabel:"Sugestie"};var de={};de={collectionLabel:"Sugestões"};var fe={};fe={collectionLabel:"Sugestões"};var pe={};pe={collectionLabel:"Sugestii"};var me={};me={collectionLabel:"Предложения"};var be={};be={collectionLabel:"Návrhy"};var $e={};$e={collectionLabel:"Predlogi"};var ve={};ve={collectionLabel:"Predlozi"};var xe={};xe={collectionLabel:"Förslag"};var ge={};ge={collectionLabel:"Öneriler"};var he={};he={collectionLabel:"Пропозиції"};var ye={};ye={collectionLabel:"建议"};var Fe={};Fe={collectionLabel:"建議"};var Ee={};Ee={"ar-AE":U,"bg-BG":M,"cs-CZ":H,"da-DK":O,"de-DE":J,"el-GR":W,"en-US":G,"es-ES":Z,"et-EE":Q,"fi-FI":X,"fr-FR":Y,"he-IL":ee,"hr-HR":te,"hu-HU":re,"it-IT":ae,"ja-JP":oe,"ko-KR":le,"lt-LT":ie,"lv-LV":se,"nb-NO":ne,"nl-NL":ue,"pl-PL":ce,"pt-BR":de,"pt-PT":fe,"ro-RO":pe,"ru-RU":me,"sk-SK":be,"sl-SI":$e,"sr-SP":ve,"sv-SE":xe,"tr-TR":ge,"uk-UA":he,"zh-CN":ye,"zh-TW":Fe};function yt(r){return r&&r.__esModule?r.default:r}function Ft(r,l){let{inputRef:n,collectionRef:i,filter:d,disableAutoFocusFirst:m=!1,disableVirtualFocus:v=!1}=r,$=ze(),f=o.useRef(void 0),u=o.useRef(!1),s=o.useRef(null),x=o.useRef(null),I=Je()==="virtual"&&(We()||Ge()),[b,Ie]=o.useState(!I&&!v),[Ce,k]=o.useState(!1);o.useEffect(()=>()=>clearTimeout(f.current),[]);let F=E(e=>{!e.isTrusted&&b&&n.current&&B(Ze(n.current))!==n.current&&n.current.focus();let t=e.target;e.isTrusted||!t||s.current===t.id||(clearTimeout(f.current),t!==i.current?u.current?(s.current=t.id,f.current=setTimeout(()=>{l.setFocusedNodeId(t.id)},500)):(s.current=t.id,l.setFocusedNodeId(t.id)):s.current&&!document.getElementById(s.current)&&(s.current=null,l.setFocusedNodeId(null)),u.current=!1)}),S=o.useCallback(e=>{if(e!=null){var t;(t=x.current)===null||t===void 0||t.removeEventListener("focusin",F),x.current=e,e.addEventListener("focusin",F),e.getAttribute("tabindex")!=null&&Ie(!1),k(!0)}else{var c;(c=x.current)===null||c===void 0||c.removeEventListener("focusin",F),k(!1)}},[F]),Te=qe(o.useMemo(()=>Ue(i,S),[i,S])),Ve=E(()=>{var e;u.current=!0,(e=i.current)===null||e===void 0||e.dispatchEvent(new CustomEvent(w,{cancelable:!0,bubbles:!0,detail:{focusStrategy:"first"}}))}),j=E(e=>{var t;Ye(B()),s.current=null,l.setFocusedNodeId(null);let c=new CustomEvent(et,{cancelable:!0,bubbles:!0,detail:{clearFocusKey:e}});clearTimeout(f.current),u.current=!1,(t=i.current)===null||t===void 0||t.dispatchEvent(c)}),y=o.useRef("");Xe(n,"input",e=>{let{inputType:t}=e;y.current=t});let De=e=>{y.current==="insertText"&&!m?Ve():y.current&&(y.current.includes("insert")||y.current.includes("delete")||y.current.includes("history"))&&(j(!0),rt(document)===n.current&&K(n.current,null)),l.setInputValue(e)},A=o.useRef(null),Pe=e=>{if(A.current=e.target,e.nativeEvent.isComposing)return;let t=s.current;switch(e.key){case"a":if(tt(e))return;break;case"Escape":if(e.isDefaultPrevented())return;break;case" ":return;case"Tab":"continuePropagation"in e&&e.continuePropagation();return;case"Home":case"End":case"PageDown":case"PageUp":case"ArrowUp":case"ArrowDown":{var c;if((e.key==="Home"||e.key==="End")&&t==null&&e.shiftKey)return;e.preventDefault();let p=new CustomEvent(w,{cancelable:!0,bubbles:!0});(c=i.current)===null||c===void 0||c.dispatchEvent(p);break}}e.isPropagationStopped()||e.stopPropagation();let g=!0;if(i.current!==null){var D;if(t==null)g=((D=i.current)===null||D===void 0?void 0:D.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))||!1;else{let p=document.getElementById(t);p&&(g=p?.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))||!1)}}if(g)switch(e.key){case"ArrowLeft":case"ArrowRight":j();break;case"Enter":if(t!=null){let p=document.getElementById(t);p?.click()}break}else e.preventDefault()},C=E(e=>{if(e.target===A.current){var t;e.stopImmediatePropagation();let c=s.current;if(c==null)(t=i.current)===null||t===void 0||t.dispatchEvent(new KeyboardEvent(e.type,e));else{let g=document.getElementById(c);g?.dispatchEvent(new KeyboardEvent(e.type,e))}}});o.useEffect(()=>(document.addEventListener("keyup",C,!0),()=>{document.removeEventListener("keyup",C,!0)}),[C]);let Re=at(yt(Ee),"@react-aria/autocomplete"),ke=Qe({id:$,"aria-label":Re.format("collectionLabel")}),Se=o.useCallback((e,t)=>d?d(e,l.inputValue,t):!0,[l.inputValue,d]),je=e=>{if(!e.isTrusted)return;let t=s.current?document.getElementById(s.current):null;t&&N(t,e.relatedTarget)},Ae=e=>{if(!e.isTrusted)return;if(s.current?document.getElementById(s.current):null){let c=e.target;queueMicrotask(()=>{N(c,i.current),K(i.current,c)})}},T={value:l.inputValue,onChange:De};var V;let Be={onKeyDown:Pe,"aria-activedescendant":(V=l.focusedNodeId)!==null&&V!==void 0?V:void 0,onBlur:je,onFocus:Ae};return Ce&&(T={...T,...b&&Be,enterKeyHint:"go","aria-controls":$,"aria-autocomplete":"list",autoCorrect:"off",spellCheck:"false",autoComplete:"off"}),{inputProps:T,collectionProps:_(ke,{shouldUseVirtualFocus:b,disallowTypeAhead:b}),collectionRef:Te,filter:d!=null?Se:void 0}}function Et(r){let{onInputChange:l,inputValue:n,defaultInputValue:i=""}=r,d=u=>{l&&l(u)},[m,v]=o.useState(null),[$,f]=ot(n,i,d);return{inputValue:$,setInputValue:f,focusedNodeId:m,setFocusedNodeId:v}}const Lt=o.createContext(null),R=o.createContext(null);function It(r){let l=Me(Lt,r.slot);r=_(l,r);let{filter:n,disableAutoFocusFirst:i}=r,d=Et(r),m=o.useRef(null),v=o.useRef(null),{inputProps:$,collectionProps:f,collectionRef:u,filter:s}=Ft({...He(r),filter:n,disableAutoFocusFirst:i,inputRef:m,collectionRef:v},d);return we.createElement(Oe,{values:[[R,d],[Ke,{...$,ref:m}],[_e,{...f,filter:s,ref:u}]]},r.children)}const Le=r=>{r?.setValue(r.value.slice(0,-1))},Ct=()=>{const r=o.useContext(R),l=o.useContext(z),n=({key:i})=>{i==="Backspace"&&!r?.inputValue&&Le(l)};return o.useEffect(()=>{r?.setInputValue(""),r?.setFocusedNodeId(null)},[l?.value]),a.jsx(ft,{"aria-label":"Search for items",onKeyDown:n,children:a.jsx(pt,{autoFocus:!0,skipContext:!0})})},Tt="_tagField_1svaz_1",Vt="_triggerContainer_1svaz_7",Dt="_trigger_1svaz_7",Pt="_selectValue_1svaz_74",Rt="_tagList_1svaz_90",kt="_popover_1svaz_96",St="_listBox_1svaz_119",h={tagField:Tt,triggerContainer:Vt,trigger:Dt,selectValue:Pt,tagList:Rt,popover:kt,listBox:St},jt=()=>{const r=o.useContext(R),l=o.useContext(z),n=({key:i})=>{i==="Backspace"&&!r?.inputValue&&Le(l)};return a.jsx(mt,{variant:"icon",className:h.trigger,onKeyDown:n,children:a.jsx("div",{style:{display:"flex"},children:a.jsx(bt,{size:20})})})},P=({description:r,errorMessage:l,errorPosition:n="top",isDisabled:i=!1,items:d,label:m,popover:v})=>{const{contains:$}=$t({sensitivity:"base"}),f=u=>s=>{Array.isArray(u.value)&&u.setValue(u.value.filter(x=>!s.has(x)))};return a.jsxs(lt,{selectionMode:"multiple",className:h.tagField,children:[a.jsx(ct,{popover:v,children:m&&a.jsx(dt,{"data-disabled":i||void 0,children:m})}),r&&a.jsx(vt,{slot:"description",children:r}),n==="top"&&a.jsx(xt,{children:l}),a.jsxs("div",{className:h.triggerContainer,children:[a.jsx(jt,{}),a.jsx(it,{className:h.selectValue,children:({selectedItems:u,state:s,defaultChildren:x,isPlaceholder:I})=>a.jsx(st,{"aria-label":"Selected items",onRemove:f(s),children:a.jsx(nt,{items:u.filter(b=>!!b),renderEmptyState:()=>a.jsx(a.Fragment,{children:I&&x}),className:h.tagList,children:b=>a.jsx(ut,{dismissable:!0,textValue:b.name,children:b.name})})})})]}),a.jsx(gt,{className:h.popover,hideArrow:!0,offset:0,children:a.jsxs(It,{filter:$,children:[a.jsx(Ct,{}),a.jsx(ht,{items:d,className:h.listBox,children:u=>a.jsx(q,{id:u.id,children:u.name})})]})})]})};try{P.displayName="TagField",P.__docgenInfo={description:"",displayName:"TagField",props:{description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string | ((validation: ValidationResult) => string)"}},errorPosition:{defaultValue:{value:"top"},description:"The position of the error message",name:"errorPosition",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"bottom"'}]}},isDisabled:{defaultValue:{value:"false"},description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},popover:{defaultValue:null,description:"An assistive text that helps the user understand the field better. Will be hidden in a popover with an info icon button.",name:"popover",required:!1,type:{name:"InfoPopoverProps"}},size:{defaultValue:{value:"'large'"},description:"Component size (large: height 48px, medium: height 40px)",name:"size",required:!1,type:{name:"enum",value:[{value:'"large"'},{value:'"medium"'}]}},items:{defaultValue:null,description:"Item objects in the collection.",name:"items",required:!1,type:{name:"Iterable<T>"}},disabledKeys:{defaultValue:null,description:"The item keys that are disabled. These items cannot be selected, focused, or otherwise interacted with.",name:"disabledKeys",required:!1,type:{name:"Iterable<Key>"}}}}}catch{}const Jr={component:P,title:"Components/TagField",tags:["autodocs"],args:{children:r=>a.jsx(q,{...r,children:r.name}),description:"Description",isDisabled:!1,label:"Label",items:Ne,errorPosition:"top",size:"large"}},L={};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:"{}",...L.parameters?.docs?.source}}};const Wr=["DynamicItems"];export{L as DynamicItems,Wr as __namedExportsOrder,Jr as default};
