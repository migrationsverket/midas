import{j as v}from"./jsx-runtime-DtgEGaVE.js";import{a as he,$ as ke}from"./Button-DlxIrWB_.js";import{$ as Pe,b as be,c as z,n as ge,d as ye,E as q,h as $e,a as Ee,K as j}from"./useFocusable-DTLHoeQe.js";import{g as we,a as Ke}from"./Dialog-DJFaj5QY.js";import{b as Ie}from"./Form-Cq4QZx_r.js";import{a as Be}from"./RSPContexts-CeCCo7XS.js";import{$ as Ce,a as Re,b as N,d as Te,e as Me}from"./Collection-B65vjQb4.js";import{$ as L,a as Ve,b as Ae,c as He}from"./DragAndDrop-sISFPnlb.js";import{a as F}from"./ListBox-Crw63iPj.js";import{a as _e}from"./Text-BorP-jFP.js";import{r as c,R as f}from"./index-BbAIUH2N.js";import{$ as Le}from"./useListState-BmjFvOwc.js";import{$ as je,a as Y}from"./ListKeyboardDelegate-dzYvetd0.js";import{$ as Ne}from"./context-DVpahnpO.js";import{$ as Fe,b as Ge,c as ze,a as qe,T as We}from"./Tag--55UjICt.js";import{$ as Oe}from"./useGridSelectionCheckbox-B2KP2yde.js";import{a as Ue}from"./FocusScope-DWsZ07QH.js";import{$ as W}from"./VisuallyHidden-3bHjY8GZ.js";import{C as Je}from"./chevron-down-U1dNK9nR.js";import{C as Qe}from"./Checkbox-43qduH5h.js";import{I as Xe}from"./TextField-Dvgi-2_u.js";import"./Hidden-D9yAbrAR.js";import"./index-cpIEhwLo.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./clsx-B-dksMZM.js";import"./OverlayArrow-B7QTCHgm.js";import"./useControlledState-DGyHFLi9.js";import"./Separator-CFSVS3UH.js";import"./SelectionManager-Z9gqeiha.js";import"./useEvent-B_cSPOEW.js";import"./useDescription-B0GcPv_I.js";import"./PressResponder-DogE8OEY.js";import"./useLocalizedStringFormatter-BfPjM0Dg.js";import"./useLabels-Dt0KIlgT.js";import"./useFormValidation-D_zB_ZT8.js";import"./index-DwWe6W7f.js";import"./useField-lqkOjd2l.js";import"./Label-B23VYN9V.js";import"./useHighlightSelectionDescription-lgUWLCWs.js";import"./useUpdateEffect-DShQiA8p.js";import"./useHasTabbableChild-BwFIKLcQ.js";import"./Button-CvjJmii3.js";import"./x-Cu6J0Y2u.js";import"./createLucideIcon-8wDOqnHv.js";import"./TextField.module-CXNtxnDk.js";function Ye(i,o){let{key:n}=i;const{checkboxProps:e}=Oe(i,o);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${Fe(o,n)}`}}}function Ze(i){let{initialItems:o=[],initialSelectedKeys:n,getKey:e=u=>{var s;return(s=u.id)!==null&&s!==void 0?s:u.key},filter:a,initialFilterText:t=""}=i,[r,l]=c.useState({items:o,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:t}),d=c.useMemo(()=>a?r.items.filter(u=>a(u,r.filterText)):r.items,[r.items,r.filterText,a]);return{...r,items:d,...et({getKey:e},l),getItem(u){return r.items.find(s=>e(s)===u)}}}function et(i,o){let{cursor:n,getKey:e}=i;return{setSelectedKeys(a){o(t=>({...t,selectedKeys:a}))},setFilterText(a){o(t=>({...t,filterText:a}))},insert(a,...t){o(r=>B(r,a,...t))},insertBefore(a,...t){o(r=>{let l=r.items.findIndex(d=>(e==null?void 0:e(d))===a);if(l===-1)if(r.items.length===0)l=0;else return r;return B(r,l,...t)})},insertAfter(a,...t){o(r=>{let l=r.items.findIndex(d=>(e==null?void 0:e(d))===a);if(l===-1)if(r.items.length===0)l=0;else return r;return B(r,l+1,...t)})},prepend(...a){o(t=>B(t,0,...a))},append(...a){o(t=>B(t,t.items.length,...a))},remove(...a){o(t=>{let r=new Set(a),l=t.items.filter(u=>!r.has(e(u))),d="all";if(t.selectedKeys!=="all"){d=new Set(t.selectedKeys);for(let u of a)d.delete(u)}return n==null&&l.length===0&&(d=new Set),{...t,items:l,selectedKeys:d}})},removeSelectedItems(){o(a=>{if(a.selectedKeys==="all")return{...a,items:[],selectedKeys:new Set};let t=a.selectedKeys,r=a.items.filter(l=>!t.has(e(l)));return{...a,items:r,selectedKeys:new Set}})},move(a,t){o(r=>{let l=r.items.findIndex(s=>e(s)===a);if(l===-1)return r;let d=r.items.slice(),[u]=d.splice(l,1);return d.splice(t,0,u),{...r,items:d}})},moveBefore(a,t){o(r=>{let l=r.items.findIndex(s=>e(s)===a);if(l===-1)return r;let u=(Array.isArray(t)?t:[...t]).map(s=>r.items.findIndex(g=>e(g)===s)).sort((s,g)=>s-g);return Z(r,u,l)})},moveAfter(a,t){o(r=>{let l=r.items.findIndex(s=>e(s)===a);if(l===-1)return r;let u=(Array.isArray(t)?t:[...t]).map(s=>r.items.findIndex(g=>e(g)===s)).sort((s,g)=>s-g);return Z(r,u,l+1)})},update(a,t){o(r=>{let l=r.items.findIndex(d=>e(d)===a);return l===-1?r:{...r,items:[...r.items.slice(0,l),t,...r.items.slice(l+1)]}})}}}function B(i,o,...n){return{...i,items:[...i.items.slice(0,o),...n,...i.items.slice(o)]}}function Z(i,o,n){n-=o.filter(t=>t<n).length;let e=o.map(t=>({from:t,to:n++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let l=t;l<e.length;l++)e[l].from>r&&e[l].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let l=e.length-1;l>t;l--){let d=e[l];d.from<r.to?r.to++:d.from++}}let a=i.items.slice();for(let t of e){let[r]=a.splice(t.from,1);a.splice(t.to,0,r)}return{...i,items:a}}const tt=c.createContext(null),rt=c.forwardRef(function(o,n){return[o,n]=Pe(o,n,tt),f.createElement(Ce,{content:f.createElement(Re,o)},e=>f.createElement(at,{props:o,collection:e,gridListRef:n}))});function at({props:i,collection:o,gridListRef:n}){let{dragAndDropHooks:e,keyboardNavigationBehavior:a="arrow",layout:t="stack"}=i,{CollectionRoot:r,isVirtualized:l,layoutDelegate:d,dropTargetDelegate:u}=c.useContext(N),s=Le({...i,collection:o,children:void 0,layoutDelegate:d}),g=je({usage:"search",sensitivity:"base"}),{disabledBehavior:b,disabledKeys:$}=s.selectionManager,{direction:p}=Ne(),m=c.useMemo(()=>new Y({collection:o,collator:g,ref:n,disabledKeys:$,disabledBehavior:b,layoutDelegate:d,layout:t,direction:p}),[o,n,t,$,b,d,g,p]),{gridProps:T}=Ge({...i,keyboardDelegate:m,keyboardNavigationBehavior:t==="grid"?"tab":a,isVirtualized:l},s,n),D=s.selectionManager,P=!!(e!=null&&e.useDraggableCollectionState),h=!!(e!=null&&e.useDroppableCollectionState),x=c.useRef(P),y=c.useRef(h);c.useEffect(()=>{x.current!==P&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),y.current!==h&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[P,h]);let E,S,k,w=!1,K=null,O=c.useRef(null);if(P&&e){E=e.useDraggableCollectionState({collection:o,selectionManager:D,preview:e.renderDragPreview?O:void 0}),e.useDraggableCollection({},E,n);let I=e.DragPreview;K=e.renderDragPreview?f.createElement(I,{ref:O},e.renderDragPreview):null}if(h&&e){S=e.useDroppableCollectionState({collection:o,selectionManager:D});let I=new Y({collection:o,disabledKeys:D.disabledKeys,disabledBehavior:D.disabledBehavior,ref:n}),De=e.dropTargetDelegate||u||new e.ListDropTargetDelegate(o,n,{layout:t,direction:p});k=e.useDroppableCollection({keyboardDelegate:I,dropTargetDelegate:De},S,n),w=S.isDropTarget({type:"root"})}let{focusProps:ve,isFocused:U,isFocusVisible:J}=be(),Q={isDropTarget:w,isEmpty:s.collection.size===0,isFocused:U,isFocusVisible:J,layout:t,state:s},xe=z({className:i.className,style:i.style,defaultClassName:"react-aria-GridList",values:Q}),X=null,Se=null;if(s.collection.size===0&&i.renderEmptyState){let I=i.renderEmptyState(Q);X=f.createElement("div",{role:"row",style:{display:"contents"}},f.createElement("div",{role:"gridcell",style:{display:"contents"}},I))}return f.createElement(Ue,null,f.createElement("div",{...ge(i),...xe,...ye(T,ve,k==null?void 0:k.collectionProps,Se),ref:n,slot:i.slot||void 0,onScroll:i.onScroll,"data-drop-target":w||void 0,"data-empty":s.collection.size===0||void 0,"data-focused":U||void 0,"data-focus-visible":J||void 0,"data-layout":t},f.createElement(q,{values:[[F,s],[L,{dragAndDropHooks:e,dragState:E,dropState:S}],[Ve,{render:lt}]]},h&&f.createElement(st,null),f.createElement(r,{collection:o,scrollRef:n,persistedKeys:Ae(D,e,S),renderDropIndicator:He(e,S)})),X,K))}const ot=Te("item",function(o,n,e){let a=c.useContext(F),{dragAndDropHooks:t,dragState:r,dropState:l}=c.useContext(L),d=$e(n),{isVirtualized:u}=c.useContext(N),{rowProps:s,gridCellProps:g,descriptionProps:b,...$}=ze({node:e,shouldSelectOnPressUp:!!r,isVirtualized:u},a,d),{hoverProps:p,isHovered:m}=Ee({isDisabled:!$.allowsSelection&&!$.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:T,focusProps:D}=be(),{checkboxProps:P}=Ye({key:e.key},a),h=a.selectionManager.disabledBehavior==="all"&&$.isDisabled?{isDisabled:!0}:{},x=null;r&&t&&(x=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let y=null,E=c.useRef(null),{visuallyHiddenProps:S}=W();l&&t&&(y=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},l,E));let k=r&&r.isDragging(e.key),w=z({...o,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...$,isHovered:m,isFocusVisible:T,selectionMode:a.selectionManager.selectionMode,selectionBehavior:a.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:k,isDropTarget:y==null?void 0:y.isDropTarget}}),K=c.useRef(null);return c.useEffect(()=>{r&&!K.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),c.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),f.createElement(f.Fragment,null,y&&!y.isHidden&&f.createElement("div",{role:"row",style:{position:"absolute"}},f.createElement("div",{role:"gridcell"},f.createElement("div",{role:"button",...S,...y==null?void 0:y.dropIndicatorProps,ref:E}))),f.createElement("div",{...ye(ge(o),s,D,p,x==null?void 0:x.dragProps),...w,ref:d,"data-selected":$.isSelected||void 0,"data-disabled":$.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":$.isFocused||void 0,"data-focus-visible":T||void 0,"data-pressed":$.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":k||void 0,"data-drop-target":(y==null?void 0:y.isDropTarget)||void 0,"data-selection-mode":a.selectionManager.selectionMode==="none"?void 0:a.selectionManager.selectionMode},f.createElement("div",{...g,style:{display:"contents"}},f.createElement(q,{values:[[Be,{slots:{[j]:{},selection:P}}],[he,{slots:{[j]:h,drag:{...x==null?void 0:x.dragButtonProps,ref:K,style:{pointerEvents:"none"}}}}],[_e,{slots:{[j]:{},description:b}}],[N,Me],[F,null]]},w.children))))});function lt(i,o){o=$e(o);let{dragAndDropHooks:n,dropState:e}=c.useContext(L),a=c.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:l}=n.useDropIndicator(i,e,a);return r?null:f.createElement(nt,{...i,dropIndicatorProps:t,isDropTarget:l,buttonRef:a,ref:o})}function it(i,o){let{dropIndicatorProps:n,isDropTarget:e,buttonRef:a,...t}=i,{visuallyHiddenProps:r}=W(),l=z({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return f.createElement("div",{...l,role:"row",ref:o,"data-drop-target":e||void 0},f.createElement("div",{role:"gridcell"},f.createElement("div",{...r,role:"button",...n,ref:a}),l.children))}const nt=c.forwardRef(it);function st(){let{dragAndDropHooks:i,dropState:o}=c.useContext(L),n=c.useRef(null),{dropIndicatorProps:e}=i.useDropIndicator({target:{type:"root"}},o,n),a=o.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=W();return!a&&e["aria-hidden"]?null:f.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},f.createElement("div",{role:"gridcell"},f.createElement("div",{role:"button",...t,...e,ref:n})))}const dt='"../theme/tokens.css"',ct='"Inter", sans-serif',ft="#000000",ut="#b31b1b",pt="(max-width: 767px)",mt="#bfbfbf",bt="#e6e6e6",gt="#f2f2f2",yt="_button_sua3u_4",$t="_icon_sua3u_19",vt="_multiSelect_sua3u_44",xt="_popover_sua3u_60",St="_listBoxItem_sua3u_73",C={tokens:dt,display:ct,black:ft,signalRed130:ut,smBreakpoint:pt,gray50:mt,gray20:bt,backgroundSecondary:gt,button:yt,icon:$t,multiSelect:vt,popover:xt,listBoxItem:St},G=({label:i,description:o,items:n,onSelectionChange:e,selectedKeys:a,defaultSelectedKeys:t,isDisabled:r,isInvalid:l,errorMessage:d})=>{const u=c.useRef(null),[s,g]=c.useState(void 0),b=Ze({initialItems:n,initialSelectedKeys:t});c.useEffect(()=>{const p=()=>{u.current&&g(u.current.offsetWidth-2)};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]),c.useEffect(()=>{e&&e(new Set(b.selectedKeys))},[b.selectedKeys,e]),c.useEffect(()=>{a&&b.setSelectedKeys(new Set(a))},[a]);const $=b.selectedKeys==="all"?new Set(b.items.map(p=>p.id)):b.selectedKeys;return v.jsx("div",{className:C.multiSelect,"data-disabled":r,"data-invalid":l,children:v.jsxs(q,{values:[[Ie,{isInvalid:l||!1,validationErrors:[],validationDetails:{customError:l||!1,badInput:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!1,valueMissing:!1}}]],children:[v.jsx(Xe,{label:i,description:o,errorMessage:d,children:v.jsxs(we,{children:[v.jsxs(ke,{className:C.button,ref:u,isDisabled:r,children:["Välj",v.jsx("div",{className:C.icon,"aria-hidden":"true",children:v.jsx(Je,{size:20})})]}),v.jsx(Ke,{className:C.popover,style:{width:s},offset:0,UNSTABLE_portalContainer:u.current||void 0,children:v.jsx(rt,{"aria-label":i,selectionMode:"multiple",selectedKeys:b.selectedKeys,onSelectionChange:b.setSelectedKeys,children:b.items.map(p=>v.jsxs(ot,{id:p.id,textValue:p.name,className:C.listBoxItem,children:[v.jsx(Qe,{slot:"selection"}),p.name]},p.id))})})]})}),v.jsx(qe,{"aria-label":"Valda",onRemove:p=>{b.setSelectedKeys(new Set(Array.from(b.selectedKeys).filter(m=>!p.has(m))))},children:Array.from($).map(p=>{const m=b.getItem(p);return v.jsx(We,{id:m==null?void 0:m.id,textValue:m==null?void 0:m.name,isDisabled:r,dismissable:!0,children:m==null?void 0:m.name},m==null?void 0:m.id)})})]})})};try{G.displayName="MultiSelect",G.__docgenInfo={description:"",displayName:"MultiSelect",props:{label:{defaultValue:null,description:"Label for multiselect",name:"label",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"Description for multiselect",name:"description",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"Array of items that will be included in the list",name:"items",required:!0,type:{name:"{ name: string; id: string; }[]"}},onSelectionChange:{defaultValue:null,description:"Handler for when list of selected item is changed",name:"onSelectionChange",required:!1,type:{name:"(selectedKeys: Set<Key>) => void"}},selectedKeys:{defaultValue:null,description:"Control selected keys",name:"selectedKeys",required:!1,type:{name:"string[]"}},defaultSelectedKeys:{defaultValue:null,description:"Set list of pre-selected keys, or 'all'",name:"defaultSelectedKeys",required:!1,type:{name:'string[] | "all"'}},isDisabled:{defaultValue:null,description:"Set MultiSelect in disabled state",name:"isDisabled",required:!1,type:{name:"boolean"}},isInvalid:{defaultValue:null,description:"Set MultiSelect in invalid state",name:"isInvalid",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"Set error message as string or as a validation function",name:"errorMessage",required:!1,type:{name:"string | ((validation: ValidationResult) => string)"}}}}}catch{}const mr={component:G,title:"Components/MultiSelect",tags:["autodocs"]},Dt=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],R=Dt.map(i=>({name:i,id:i.toLocaleLowerCase()})),M={args:{label:"Etikett",description:"Valfri hjälptext",items:R},parameters:{a11y:{test:"todo"}}},V={args:{label:"Etikett",description:"Blackberry är förvalt",items:R,defaultSelectedKeys:["blackberry"]}},A={args:{label:"Etikett",description:"Alla val är förvalda",items:R,defaultSelectedKeys:"all"}},H={args:{label:"Etikett",description:"Blackberry är förvalt",items:R,defaultSelectedKeys:["blackberry"],isDisabled:!0},parameters:{a11y:{element:"body",config:{rules:[{id:"color-contrast",enabled:!1}]},options:{rules:{"color-contrast":{enabled:!1}}}}}},_={args:{label:"Etikett",description:"Blackberry är förvalt",items:R,defaultSelectedKeys:["blackberry"],isInvalid:!0,errorMessage:"Du får inte välja Blackberry"}};var ee,te,re;M.parameters={...M.parameters,docs:{...(ee=M.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    items: options
  },
  parameters: {
    a11y: {
      test: 'todo'
    }
  }
}`,...(re=(te=M.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};var ae,oe,le;V.parameters={...V.parameters,docs:{...(ae=V.parameters)==null?void 0:ae.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry']
  }
}`,...(le=(oe=V.parameters)==null?void 0:oe.docs)==null?void 0:le.source}}};var ie,ne,se;A.parameters={...A.parameters,docs:{...(ie=A.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Alla val är förvalda',
    items: options,
    defaultSelectedKeys: 'all'
  }
}`,...(se=(ne=A.parameters)==null?void 0:ne.docs)==null?void 0:se.source}}};var de,ce,fe;H.parameters={...H.parameters,docs:{...(de=H.parameters)==null?void 0:de.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isDisabled: true
  },
  parameters: {
    a11y: {
      element: 'body',
      config: {
        rules: [{
          // Dont check for color contrast on disabled elements
          id: 'color-contrast',
          enabled: false
        }]
      },
      options: {
        rules: {
          'color-contrast': {
            enabled: false
          }
        }
      } satisfies RunOptions
    }
  }
}`,...(fe=(ce=H.parameters)==null?void 0:ce.docs)==null?void 0:fe.source}}};var ue,pe,me;_.parameters={..._.parameters,docs:{...(ue=_.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isInvalid: true,
    errorMessage: 'Du får inte välja Blackberry'
  }
}`,...(me=(pe=_.parameters)==null?void 0:pe.docs)==null?void 0:me.source}}};const br=["Primary","DefaultSelectedKeys","AllKeysSelected","Disabled","Invalid"];export{A as AllKeysSelected,V as DefaultSelectedKeys,H as Disabled,_ as Invalid,M as Primary,br as __namedExportsOrder,mr as default};
