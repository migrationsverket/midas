import{i as b}from"./utils-B5vVULSi.js";import{i as $,h as o,o as u,p as f}from"./useFocusRing-HUlwicEq.js";let a=new Map,d=new Set;function c(){if(typeof window>"u")return;function t(e){return"propertyName"in e}let r=e=>{if(!t(e)||!e.target)return;let n=a.get(e.target);n||(n=new Set,a.set(e.target,n),e.target.addEventListener("transitioncancel",i,{once:!0})),n.add(e.propertyName)},i=e=>{if(!t(e)||!e.target)return;let n=a.get(e.target);if(n&&(n.delete(e.propertyName),n.size===0&&(e.target.removeEventListener("transitioncancel",i),a.delete(e.target)),a.size===0)){for(let s of d)s();d.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",i)}typeof document<"u"&&(document.readyState!=="loading"?c():document.addEventListener("DOMContentLoaded",c));function l(t){requestAnimationFrame(()=>{a.size===0?t():d.add(t)})}function v(t,r){b(()=>{if(t&&t.ref&&r)return t.ref.current=r.current,()=>{t.ref&&(t.ref.current=null)}})}function g(t){const r=$(t),i=o(r);if(u()==="virtual"){let e=i;l(()=>{o(r)===e&&t.isConnected&&f(t)})}else f(t)}export{v as $,g as a,l as b};
