import{$}from"./getScrollParent-CvodOSaS.js";import{g as d,e as s}from"./utils-oc6myKvD.js";import{r as a,R as f}from"./index-ClcD9ViR.js";function I(r,e){let{collection:t,onLoadMore:n,scrollOffset:l=1}=r,c=a.useRef(null),i=d(o=>{for(let u of o)u.isIntersecting&&n&&n()});s(()=>(e.current&&(c.current=new IntersectionObserver(i,{root:$(e==null?void 0:e.current),rootMargin:`0px ${100*l}% ${100*l}% ${100*l}%`}),c.current.observe(e.current)),()=>{c.current&&c.current.disconnect()}),[t,i,e,l])}const y=a.createContext({}),b=a.createContext(null),v=a.forwardRef(function(e,t){let{render:n}=a.useContext(b);return f.createElement(f.Fragment,null,n(e,t))});function M(r,e){var t;let n=r==null?void 0:r.renderDropIndicator,l=r==null||(t=r.isVirtualDragging)===null||t===void 0?void 0:t.call(r),c=a.useCallback(i=>{if(l||e!=null&&e.isDropTarget(i))return n?n(i):f.createElement(v,{target:i})},[e==null?void 0:e.target,l,n]);return r!=null&&r.useDropIndicator?c:void 0}function V(r,e,t){var n,l;let c=r.focusedKey,i=null;if(!(e==null||(n=e.isVirtualDragging)===null||n===void 0)&&n.call(e)&&(t==null||(l=t.target)===null||l===void 0?void 0:l.type)==="item"){i=t.target.key;var o;t.target.dropPosition==="after"&&(i=(o=t.collection.getKeyAfter(i))!==null&&o!==void 0?o:i)}return a.useMemo(()=>new Set([c,i].filter(u=>u!=null)),[c,i])}export{y as $,b as a,M as b,V as c,I as d};
