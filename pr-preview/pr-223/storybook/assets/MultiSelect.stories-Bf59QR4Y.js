import{j as $}from"./jsx-runtime-DtgEGaVE.js";import{a as De,$ as ke}from"./Button-PMtIgk3z.js";import{$ as we,b as me,c as q,o as be,d as ge,B as G,h as ye,a as Pe,J as _}from"./useFocusable-BTV2lCc9.js";import{i as Ee,a as Ke}from"./Dialog-CmDJib1-.js";import{b as Ie}from"./Form-CdOY3XQC.js";import{a as Te}from"./RSPContexts-CeCCo7XS.js";import{$ as Be,a as Ae,b as F,d as Ce,e as Re}from"./Collection-CP0FkJ5j.js";import{$ as j,a as Ve,b as He,c as Me}from"./DragAndDrop-sISFPnlb.js";import{a as N}from"./ListBox-B-q0TaH8.js";import{$ as Le}from"./Text-DrzpM1Jb.js";import{r as c,R as f}from"./index-BbAIUH2N.js";import{$ as je}from"./useListState-CmrCNl7S.js";import{$ as _e,a as X}from"./ListKeyboardDelegate-VWRpf7NQ.js";import{$ as Fe}from"./context-DC_sGW0u.js";import{$ as Ne,b as qe,c as Ge,a as ze,T as We}from"./Tag-CgYHe8we.js";import{$ as Oe}from"./useGridSelectionCheckbox-BYVhml-O.js";import{a as Ue}from"./FocusScope-BeeEVvPP.js";import{$ as z}from"./VisuallyHidden-CK0-3K8r.js";import{C as Je}from"./chevron-down-U1dNK9nR.js";import{C as Qe}from"./Checkbox-B6ZS6GNw.js";import{I as Xe}from"./TextField-Z_gRQIch.js";import"./Hidden-BxZRcyi_.js";import"./index-i7ZvCR4f.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./clsx-B-dksMZM.js";import"./Separator-Z3nJnnSt.js";import"./SelectionManager-CiLjFixb.js";import"./useEvent-CfffaCDc.js";import"./useDescription-c_sn7U9n.js";import"./useControlledState-DGyHFLi9.js";import"./PressResponder-DzydwzD8.js";import"./useLocalizedStringFormatter-BrmR15lP.js";import"./useLabels-BlF-T0UY.js";import"./index-DwWe6W7f.js";import"./useField-DN-D1gXY.js";import"./useHighlightSelectionDescription-B_fWWqUf.js";import"./useUpdateEffect-DShQiA8p.js";import"./useHasTabbableChild-sQDdv7x_.js";import"./Button-DeVX-GBX.js";import"./x-Cu6J0Y2u.js";import"./createLucideIcon-8wDOqnHv.js";import"./TextField.module-Cq1EB13r.js";function Ye(l,o){let{key:s}=l;const{checkboxProps:e}=Oe(l,o);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${Ne(o,s)}`}}}function Ze(l){let{initialItems:o=[],initialSelectedKeys:s,getKey:e=p=>{var n;return(n=p.id)!==null&&n!==void 0?n:p.key},filter:a,initialFilterText:t=""}=l,[r,i]=c.useState({items:o,selectedKeys:s==="all"?"all":new Set(s||[]),filterText:t}),d=c.useMemo(()=>a?r.items.filter(p=>a(p,r.filterText)):r.items,[r.items,r.filterText,a]);return{...r,items:d,...et({getKey:e},i),getItem(p){return r.items.find(n=>e(n)===p)}}}function et(l,o){let{cursor:s,getKey:e}=l;return{setSelectedKeys(a){o(t=>({...t,selectedKeys:a}))},setFilterText(a){o(t=>({...t,filterText:a}))},insert(a,...t){o(r=>B(r,a,...t))},insertBefore(a,...t){o(r=>{let i=r.items.findIndex(d=>(e==null?void 0:e(d))===a);if(i===-1)if(r.items.length===0)i=0;else return r;return B(r,i,...t)})},insertAfter(a,...t){o(r=>{let i=r.items.findIndex(d=>(e==null?void 0:e(d))===a);if(i===-1)if(r.items.length===0)i=0;else return r;return B(r,i+1,...t)})},prepend(...a){o(t=>B(t,0,...a))},append(...a){o(t=>B(t,t.items.length,...a))},remove(...a){o(t=>{let r=new Set(a),i=t.items.filter(p=>!r.has(e(p))),d="all";if(t.selectedKeys!=="all"){d=new Set(t.selectedKeys);for(let p of a)d.delete(p)}return s==null&&i.length===0&&(d=new Set),{...t,items:i,selectedKeys:d}})},removeSelectedItems(){o(a=>{if(a.selectedKeys==="all")return{...a,items:[],selectedKeys:new Set};let t=a.selectedKeys,r=a.items.filter(i=>!t.has(e(i)));return{...a,items:r,selectedKeys:new Set}})},move(a,t){o(r=>{let i=r.items.findIndex(n=>e(n)===a);if(i===-1)return r;let d=r.items.slice(),[p]=d.splice(i,1);return d.splice(t,0,p),{...r,items:d}})},moveBefore(a,t){o(r=>{let i=r.items.findIndex(n=>e(n)===a);if(i===-1)return r;let p=(Array.isArray(t)?t:[...t]).map(n=>r.items.findIndex(g=>e(g)===n)).sort((n,g)=>n-g);return Y(r,p,i)})},moveAfter(a,t){o(r=>{let i=r.items.findIndex(n=>e(n)===a);if(i===-1)return r;let p=(Array.isArray(t)?t:[...t]).map(n=>r.items.findIndex(g=>e(g)===n)).sort((n,g)=>n-g);return Y(r,p,i+1)})},update(a,t){o(r=>{let i=r.items.findIndex(d=>e(d)===a);return i===-1?r:{...r,items:[...r.items.slice(0,i),t,...r.items.slice(i+1)]}})}}}function B(l,o,...s){return{...l,items:[...l.items.slice(0,o),...s,...l.items.slice(o)]}}function Y(l,o,s){s-=o.filter(t=>t<s).length;let e=o.map(t=>({from:t,to:s++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let i=t;i<e.length;i++)e[i].from>r&&e[i].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let i=e.length-1;i>t;i--){let d=e[i];d.from<r.to?r.to++:d.from++}}let a=l.items.slice();for(let t of e){let[r]=a.splice(t.from,1);a.splice(t.to,0,r)}return{...l,items:a}}const tt=c.createContext(null),rt=c.forwardRef(function(o,s){return[o,s]=we(o,s,tt),f.createElement(Be,{content:f.createElement(Ae,o)},e=>f.createElement(at,{props:o,collection:e,gridListRef:s}))});function at({props:l,collection:o,gridListRef:s}){let{dragAndDropHooks:e,keyboardNavigationBehavior:a="arrow",layout:t="stack"}=l,{CollectionRoot:r,isVirtualized:i,layoutDelegate:d,dropTargetDelegate:p}=c.useContext(F),n=je({...l,collection:o,children:void 0,layoutDelegate:d}),g=_e({usage:"search",sensitivity:"base"}),{disabledBehavior:w,disabledKeys:u}=n.selectionManager,{direction:h}=Fe(),m=c.useMemo(()=>new X({collection:o,collator:g,ref:s,disabledKeys:u,disabledBehavior:w,layoutDelegate:d,layout:t,direction:h}),[o,s,t,u,w,d,g,h]),{gridProps:b}=qe({...l,keyboardDelegate:m,keyboardNavigationBehavior:t==="grid"?"tab":a,isVirtualized:i},n,s),S=n.selectionManager,P=!!(e!=null&&e.useDraggableCollectionState),D=!!(e!=null&&e.useDroppableCollectionState),v=c.useRef(P),y=c.useRef(D);c.useEffect(()=>{v.current!==P&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),y.current!==D&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[P,D]);let E,x,k,K=!1,I=null,W=c.useRef(null);if(P&&e){E=e.useDraggableCollectionState({collection:o,selectionManager:S,preview:e.renderDragPreview?W:void 0}),e.useDraggableCollection({},E,s);let T=e.DragPreview;I=e.renderDragPreview?f.createElement(T,{ref:W},e.renderDragPreview):null}if(D&&e){x=e.useDroppableCollectionState({collection:o,selectionManager:S});let T=new X({collection:o,disabledKeys:S.disabledKeys,disabledBehavior:S.disabledBehavior,ref:s}),Se=e.dropTargetDelegate||p||new e.ListDropTargetDelegate(o,s,{layout:t,direction:h});k=e.useDroppableCollection({keyboardDelegate:T,dropTargetDelegate:Se},x,s),K=x.isDropTarget({type:"root"})}let{focusProps:ve,isFocused:O,isFocusVisible:U}=me(),J={isDropTarget:K,isEmpty:n.collection.size===0,isFocused:O,isFocusVisible:U,layout:t,state:n},xe=q({className:l.className,style:l.style,defaultClassName:"react-aria-GridList",values:J}),Q=null,he=null;if(n.collection.size===0&&l.renderEmptyState){let T=l.renderEmptyState(J);Q=f.createElement("div",{role:"row",style:{display:"contents"}},f.createElement("div",{role:"gridcell",style:{display:"contents"}},T))}return f.createElement(Ue,null,f.createElement("div",{...be(l),...xe,...ge(b,ve,k==null?void 0:k.collectionProps,he),ref:s,slot:l.slot||void 0,onScroll:l.onScroll,"data-drop-target":K||void 0,"data-empty":n.collection.size===0||void 0,"data-focused":O||void 0,"data-focus-visible":U||void 0,"data-layout":t},f.createElement(G,{values:[[N,n],[j,{dragAndDropHooks:e,dragState:E,dropState:x}],[Ve,{render:it}]]},D&&f.createElement(nt,null),f.createElement(r,{collection:o,scrollRef:s,persistedKeys:He(S,e,x),renderDropIndicator:Me(e,x)})),Q,I))}const ot=Ce("item",function(o,s,e){let a=c.useContext(N),{dragAndDropHooks:t,dragState:r,dropState:i}=c.useContext(j),d=ye(s),{isVirtualized:p}=c.useContext(F),{rowProps:n,gridCellProps:g,descriptionProps:w,...u}=Ge({node:e,shouldSelectOnPressUp:!!r,isVirtualized:p},a,d),{hoverProps:h,isHovered:m}=Pe({isDisabled:!u.allowsSelection&&!u.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:b,focusProps:S}=me(),{checkboxProps:P}=Ye({key:e.key},a),D=a.selectionManager.disabledBehavior==="all"&&u.isDisabled?{isDisabled:!0}:{},v=null;r&&t&&(v=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let y=null,E=c.useRef(null),{visuallyHiddenProps:x}=z();i&&t&&(y=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},i,E));let k=r&&r.isDragging(e.key),K=q({...o,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...u,isHovered:m,isFocusVisible:b,selectionMode:a.selectionManager.selectionMode,selectionBehavior:a.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:k,isDropTarget:y==null?void 0:y.isDropTarget}}),I=c.useRef(null);return c.useEffect(()=>{r&&!I.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),c.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),f.createElement(f.Fragment,null,y&&!y.isHidden&&f.createElement("div",{role:"row",style:{position:"absolute"}},f.createElement("div",{role:"gridcell"},f.createElement("div",{role:"button",...x,...y==null?void 0:y.dropIndicatorProps,ref:E}))),f.createElement("div",{...ge(be(o),n,S,h,v==null?void 0:v.dragProps),...K,ref:d,"data-selected":u.isSelected||void 0,"data-disabled":u.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":u.isFocused||void 0,"data-focus-visible":b||void 0,"data-pressed":u.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":k||void 0,"data-drop-target":(y==null?void 0:y.isDropTarget)||void 0,"data-selection-mode":a.selectionManager.selectionMode==="none"?void 0:a.selectionManager.selectionMode},f.createElement("div",{...g,style:{display:"contents"}},f.createElement(G,{values:[[Te,{slots:{[_]:{},selection:P}}],[De,{slots:{[_]:D,drag:{...v==null?void 0:v.dragButtonProps,ref:I,style:{pointerEvents:"none"}}}}],[Le,{slots:{[_]:{},description:w}}],[F,Re],[N,null]]},K.children))))});function it(l,o){o=ye(o);let{dragAndDropHooks:s,dropState:e}=c.useContext(j),a=c.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:i}=s.useDropIndicator(l,e,a);return r?null:f.createElement(st,{...l,dropIndicatorProps:t,isDropTarget:i,buttonRef:a,ref:o})}function lt(l,o){let{dropIndicatorProps:s,isDropTarget:e,buttonRef:a,...t}=l,{visuallyHiddenProps:r}=z(),i=q({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return f.createElement("div",{...i,role:"row",ref:o,"data-drop-target":e||void 0},f.createElement("div",{role:"gridcell"},f.createElement("div",{...r,role:"button",...s,ref:a}),i.children))}const st=c.forwardRef(lt);function nt(){let{dragAndDropHooks:l,dropState:o}=c.useContext(j),s=c.useRef(null),{dropIndicatorProps:e}=l.useDropIndicator({target:{type:"root"}},o,s),a=o.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=z();return!a&&e["aria-hidden"]?null:f.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},f.createElement("div",{role:"gridcell"},f.createElement("div",{role:"button",...t,...e,ref:s})))}const dt='"../theme/tokens.css"',ct='"Inter", sans-serif',ft="#000000",ut="#b31b1b",pt="(max-width: 767px)",mt="#bfbfbf",bt="#e6e6e6",gt="#f2f2f2",yt="_button_1eb3v_4",$t="_icon_1eb3v_19",vt="_multiSelect_1eb3v_44",xt="_popover_1eb3v_60",ht="_listBoxItem_1eb3v_73",A={tokens:dt,display:ct,black:ft,signalRed130:ut,smBreakpoint:pt,gray50:mt,gray20:bt,backgroundSecondary:gt,button:yt,icon:$t,multiSelect:vt,popover:xt,listBoxItem:ht},$e=({label:l,description:o,items:s,onSelectionChange:e,selectedKeys:a,defaultSelectedKeys:t,isDisabled:r,isInvalid:i,errorMessage:d,placeholder:p})=>{const n=c.useRef(null),[g,w]=c.useState(void 0),u=Ze({initialItems:s,initialSelectedKeys:t});c.useEffect(()=>{const m=()=>{n.current&&w(n.current.offsetWidth-2)};return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[]),c.useEffect(()=>{e&&e(new Set(u.selectedKeys))},[u.selectedKeys,e]),c.useEffect(()=>{a&&u.setSelectedKeys(new Set(a))},[a]);const h=u.selectedKeys==="all"?new Set(u.items.map(m=>m.id)):u.selectedKeys;return $.jsx("div",{className:A.multiSelect,"data-disabled":r,"data-invalid":i,children:$.jsxs(G,{values:[[Ie,{isInvalid:i||!1,validationErrors:[],validationDetails:{customError:i||!1,badInput:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!1,valueMissing:!1}}]],children:[$.jsx(Xe,{label:l,description:o,errorMessage:d,children:$.jsxs(Ee,{children:[$.jsxs(ke,{className:A.button,ref:n,isDisabled:r,children:[p||"Välj",$.jsx("div",{className:A.icon,"aria-hidden":"true",children:$.jsx(Je,{size:20})})]}),$.jsx(Ke,{className:A.popover,style:{width:g},offset:0,UNSTABLE_portalContainer:n.current||void 0,children:$.jsx(rt,{"aria-label":l,selectionMode:"multiple",selectedKeys:u.selectedKeys,onSelectionChange:u.setSelectedKeys,children:u.items.map(m=>$.jsxs(ot,{id:m.id,textValue:m.name,className:A.listBoxItem,children:[$.jsx(Qe,{slot:"selection"}),m.name]},m.id))})})]})}),$.jsx(ze,{"aria-label":"Valda",onRemove:m=>{u.setSelectedKeys(new Set(Array.from(u.selectedKeys).filter(b=>!m.has(b))))},children:Array.from(h).map(m=>{const b=u.getItem(m);return $.jsx(We,{id:b==null?void 0:b.id,textValue:b==null?void 0:b.name,isDisabled:r,dismissable:!0,children:b==null?void 0:b.name},b==null?void 0:b.id)})})]})})};$e.__docgenInfo={description:"",methods:[],displayName:"MultiSelect",props:{placeholder:{required:!1,tsType:{name:"string"},description:"placeholder for multiselect"},label:{required:!0,tsType:{name:"string"},description:"Label for multiselect"},description:{required:!1,tsType:{name:"string"},description:"Description for multiselect"},items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ name: string; id: string }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"id",value:{name:"string",required:!0}}]}}],raw:"{ name: string; id: string }[]"},description:"Array of items that will be included in the list"},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selectedKeys: Set<Key>) => void",signature:{arguments:[{type:{name:"Set",elements:[{name:"Key"}],raw:"Set<Key>"},name:"selectedKeys"}],return:{name:"void"}}},description:"Handler for when list of selected item is changed"},selectedKeys:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Control selected keys"},defaultSelectedKeys:{required:!1,tsType:{name:"union",raw:"string[] | 'all'",elements:[{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"literal",value:"'all'"}]},description:"Set list of pre-selected keys, or 'all'"},isDisabled:{required:!1,tsType:{name:"boolean"},description:"Set MultiSelect in disabled state"},isInvalid:{required:!1,tsType:{name:"boolean"},description:"Set MultiSelect in invalid state"},errorMessage:{required:!1,tsType:{name:"union",raw:"string | ((validation: ValidationResult) => string) | undefined",elements:[{name:"string"},{name:"unknown"},{name:"undefined"}]},description:"Set error message as string or as a validation function"}}};const fr={component:$e,title:"Components/MultiSelect",tags:["autodocs"]},St=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],C=St.map(l=>({name:l,id:l.toLocaleLowerCase()})),R={args:{label:"Etikett",description:"Valfri hjälptext",placeholder:"Valfri text",items:C}},V={args:{label:"Etikett",description:"Blackberry är förvalt",placeholder:"Valfri text",items:C,defaultSelectedKeys:["blackberry"]}},H={args:{label:"Etikett",description:"Alla val är förvalda",placeholder:"Valfri text",items:C,defaultSelectedKeys:"all"}},M={args:{label:"Etikett",description:"Blackberry är förvalt",placeholder:"Valfri text",items:C,defaultSelectedKeys:["blackberry"],isDisabled:!0}},L={args:{label:"Etikett",description:"Blackberry är förvalt",placeholder:"Valfri text",items:C,defaultSelectedKeys:["blackberry"],isInvalid:!0,errorMessage:"Du får inte välja Blackberry"}};var Z,ee,te;R.parameters={...R.parameters,docs:{...(Z=R.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    placeholder: 'Valfri text',
    items: options
  }
}`,...(te=(ee=R.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var re,ae,oe;V.parameters={...V.parameters,docs:{...(re=V.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    placeholder: 'Valfri text',
    items: options,
    defaultSelectedKeys: ['blackberry']
  }
}`,...(oe=(ae=V.parameters)==null?void 0:ae.docs)==null?void 0:oe.source}}};var ie,le,se;H.parameters={...H.parameters,docs:{...(ie=H.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Alla val är förvalda',
    placeholder: 'Valfri text',
    items: options,
    defaultSelectedKeys: 'all'
  }
}`,...(se=(le=H.parameters)==null?void 0:le.docs)==null?void 0:se.source}}};var ne,de,ce;M.parameters={...M.parameters,docs:{...(ne=M.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    placeholder: 'Valfri text',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isDisabled: true
  }
}`,...(ce=(de=M.parameters)==null?void 0:de.docs)==null?void 0:ce.source}}};var fe,ue,pe;L.parameters={...L.parameters,docs:{...(fe=L.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    placeholder: 'Valfri text',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isInvalid: true,
    errorMessage: 'Du får inte välja Blackberry'
  }
}`,...(pe=(ue=L.parameters)==null?void 0:ue.docs)==null?void 0:pe.source}}};const ur=["Primary","DefaultSelectedKeys","AllKeysSelected","Disabled","Invalid"];export{H as AllKeysSelected,V as DefaultSelectedKeys,M as Disabled,L as Invalid,R as Primary,ur as __namedExportsOrder,fr as default};
