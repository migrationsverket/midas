import{j as b}from"./jsx-runtime-Nms4Y4qS.js";import{$ as me,a as be}from"./Button-CFI5xjAF.js";import{h as ge,j as $e}from"./Dialog-BH7dEMoU.js";import{a as ye}from"./RSPContexts-Bc9pl35m.js";import{$ as ve,a as V,b as xe,c as De,d as he}from"./Collection-CKcZJKgp.js";import{h as ie,d as Se,e as le,f as M,c as se,n as ne,A as de,C as q,$ as Pe}from"./useFocusable-C3Zwbx3S.js";import{$ as L,a as U,b as we,c as ke,d as Ee}from"./DragAndDrop-D1my3whc.js";import{$ as j}from"./ListBox-DXIOu1yG.js";import{a as Ie}from"./Text-CYGrO2MJ.js";import{r as u,R as f}from"./index-BwDkhjyp.js";import{$ as Ke,b as Ce,c as Re,a as Te,T as Ae}from"./Tag-ijmTaQlG.js";import{$ as He}from"./useGridSelectionCheckbox-C-MLgK4s.js";import{a as Be}from"./FocusScope-DI20Bbtn.js";import{$ as _}from"./VisuallyHidden-Booyl0mQ.js";import{$ as Le}from"./useListState-DjCLJrex.js";import{$ as Ve}from"./useCollator-D6c6TZtq.js";import{$ as je}from"./context-C8hDq7-P.js";import{I as Me}from"./TextField-BJXgRXB4.js";import"./CheckboxGroup-Baox9F_W.js";import{C as _e}from"./Checkbox-Cr-_9Ij5.js";import{C as Fe}from"./chevron-down-FOu3nidH.js";import"./Hidden-BkVGwKza.js";import"./index-Drt3gf4w.js";import"./_commonjsHelpers-BosuxZz1.js";import"./clsx-B-dksMZM.js";import"./PressResponder-CPELVzzG.js";import"./useControlledState-AHXFv9X8.js";import"./getScrollParent-yMl4gzwT.js";import"./isScrollable-Bts8_1NI.js";import"./useLocalizedStringFormatter-CxeZs8NQ.js";import"./index-Bb28N59q.js";import"./SelectionManager-C4CZJXbT.js";import"./scrollIntoView-DUcd1lYg.js";import"./useDescription-BubdPxWs.js";import"./useHighlightSelectionDescription-QN9Az8HR.js";import"./useUpdateEffect-CCcm2-in.js";import"./useHasTabbableChild-Dolr4SiZ.js";import"./x-BNls5wfR.js";import"./createLucideIcon-WuqQdmgs.js";import"./Form-BjuKzKLB.js";import"./triangle-alert-BkMwT_kE.js";import"./Group-nedW5vS6.js";function Ne(l,a){let{key:s}=l;const{checkboxProps:e}=He(l,a);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${Ke(a,s)}`}}}function Ge(l){let{initialItems:a=[],initialSelectedKeys:s,getKey:e=n=>{var d;return(d=n.id)!==null&&d!==void 0?d:n.key},filter:o,initialFilterText:t=""}=l,[r,i]=u.useState({items:a,selectedKeys:s==="all"?"all":new Set(s||[]),filterText:t}),c=u.useMemo(()=>o?r.items.filter(n=>o(n,r.filterText)):r.items,[r.items,r.filterText,o]);return{...r,items:c,...ze({getKey:e},i),getItem(n){return r.items.find(d=>e(d)===n)}}}function ze(l,a){let{cursor:s,getKey:e}=l;return{setSelectedKeys(o){a(t=>({...t,selectedKeys:o}))},setFilterText(o){a(t=>({...t,filterText:o}))},insert(o,...t){a(r=>K(r,o,...t))},insertBefore(o,...t){a(r=>{let i=r.items.findIndex(c=>e(c)===o);if(i===-1)if(r.items.length===0)i=0;else return r;return K(r,i,...t)})},insertAfter(o,...t){a(r=>{let i=r.items.findIndex(c=>e(c)===o);if(i===-1)if(r.items.length===0)i=0;else return r;return K(r,i+1,...t)})},prepend(...o){a(t=>K(t,0,...o))},append(...o){a(t=>K(t,t.items.length,...o))},remove(...o){a(t=>{let r=new Set(o),i=t.items.filter(n=>!r.has(e(n))),c="all";if(t.selectedKeys!=="all"){c=new Set(t.selectedKeys);for(let n of o)c.delete(n)}return s==null&&i.length===0&&(c=new Set),{...t,items:i,selectedKeys:c}})},removeSelectedItems(){a(o=>{if(o.selectedKeys==="all")return{...o,items:[],selectedKeys:new Set};let t=o.selectedKeys,r=o.items.filter(i=>!t.has(e(i)));return{...o,items:r,selectedKeys:new Set}})},move(o,t){a(r=>{let i=r.items.findIndex(d=>e(d)===o);if(i===-1)return r;let c=r.items.slice(),[n]=c.splice(i,1);return c.splice(t,0,n),{...r,items:c}})},moveBefore(o,t){a(r=>{let i=r.items.findIndex(d=>e(d)===o);if(i===-1)return r;let n=(Array.isArray(t)?t:[...t]).map(d=>r.items.findIndex(p=>e(p)===d)).sort((d,p)=>d-p);return J(r,n,i)})},moveAfter(o,t){a(r=>{let i=r.items.findIndex(d=>e(d)===o);if(i===-1)return r;let n=(Array.isArray(t)?t:[...t]).map(d=>r.items.findIndex(p=>e(p)===d)).sort((d,p)=>d-p);return J(r,n,i+1)})},update(o,t){a(r=>{let i=r.items.findIndex(c=>e(c)===o);return i===-1?r:{...r,items:[...r.items.slice(0,i),t,...r.items.slice(i+1)]}})}}}function K(l,a,...s){return{...l,items:[...l.items.slice(0,a),...s,...l.items.slice(a)]}}function J(l,a,s){s-=a.filter(t=>t<s).length;let e=a.map(t=>({from:t,to:s++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let i=t;i<e.length;i++)e[i].from>r&&e[i].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let i=e.length-1;i>t;i--){let c=e[i];c.from<r.to?r.to++:c.from++}}let o=l.items.slice();for(let t of e){let[r]=o.splice(t.from,1);o.splice(t.to,0,r)}return{...l,items:o}}const We=u.createContext(null);function Oe(l,a){return[l,a]=Pe(l,a,We),f.createElement(De,{content:f.createElement(he,l)},s=>f.createElement(qe,{props:l,collection:s,gridListRef:a}))}function qe({props:l,collection:a,gridListRef:s}){let{dragAndDropHooks:e,keyboardNavigationBehavior:o="arrow",layout:t="stack"}=l,{CollectionRoot:r,isVirtualized:i,layoutDelegate:c,dropTargetDelegate:n}=u.useContext(V),d=Le({...l,collection:a,children:void 0,layoutDelegate:c}),p=Ve({usage:"search",sensitivity:"base"}),{disabledBehavior:$,disabledKeys:g}=d.selectionManager,{direction:k}=je(),R=u.useMemo(()=>new U({collection:a,collator:p,ref:s,disabledKeys:g,disabledBehavior:$,layoutDelegate:c,layout:t,direction:k}),[a,s,t,g,$,c,p,k]),{gridProps:T}=Re({...l,keyboardDelegate:R,keyboardNavigationBehavior:t==="grid"?"tab":o,isVirtualized:i},d,s),x=d.selectionManager,S=!!(e!=null&&e.useDraggableCollectionState),D=!!(e!=null&&e.useDroppableCollectionState),y=u.useRef(S),m=u.useRef(D);u.useEffect(()=>{y.current!==S&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),m.current!==D&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[S,D]);let P,v,h,w=!1,E=null,N=u.useRef(null);if(S&&e){P=e.useDraggableCollectionState({collection:a,selectionManager:x,preview:e.renderDragPreview?N:void 0}),e.useDraggableCollection({},P,s);let I=e.DragPreview;E=e.renderDragPreview?f.createElement(I,{ref:N},e.renderDragPreview):null}if(D&&e){v=e.useDroppableCollectionState({collection:a,selectionManager:x});let I=new U({collection:a,disabledKeys:x.disabledKeys,disabledBehavior:x.disabledBehavior,ref:s}),ue=e.dropTargetDelegate||n||new e.ListDropTargetDelegate(a,s,{layout:t,direction:k});h=e.useDroppableCollection({keyboardDelegate:I,dropTargetDelegate:ue},v,s),w=v.isDropTarget({type:"root"})}let{focusProps:ce,isFocused:G,isFocusVisible:z}=le(),W={isDropTarget:w,isEmpty:d.collection.size===0,isFocused:G,isFocusVisible:z,layout:t,state:d},fe=M({className:l.className,style:l.style,defaultClassName:"react-aria-GridList",values:W}),O=null,pe=null;if(d.collection.size===0&&l.renderEmptyState){let I=l.renderEmptyState(W);O=f.createElement("div",{role:"row",style:{display:"contents"}},f.createElement("div",{role:"gridcell",style:{display:"contents"}},I))}return f.createElement(Be,null,f.createElement("div",{...ne(l),...fe,...se(T,ce,h==null?void 0:h.collectionProps,pe),ref:s,slot:l.slot||void 0,onScroll:l.onScroll,"data-drop-target":w||void 0,"data-empty":d.collection.size===0||void 0,"data-focused":G||void 0,"data-focus-visible":z||void 0,"data-layout":t},f.createElement(de,{values:[[j,d],[L,{dragAndDropHooks:e,dragState:P,dropState:v}],[we,{render:Qe}]]},D&&f.createElement(Ze,null),f.createElement(r,{collection:a,scrollRef:s,persistedKeys:ke(x,e,v),renderDropIndicator:Ee(e,v)})),O,E))}const Ue=u.forwardRef(Oe),Je=ve("item",function(a,s,e){let o=u.useContext(j),{dragAndDropHooks:t,dragState:r,dropState:i}=u.useContext(L),c=ie(s),{isVirtualized:n}=u.useContext(V),{rowProps:d,gridCellProps:p,descriptionProps:$,...g}=Ce({node:e,shouldSelectOnPressUp:!!r,isVirtualized:n},o,c),{hoverProps:k,isHovered:R}=Se({isDisabled:!g.allowsSelection&&!g.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:T,focusProps:x}=le(),{checkboxProps:S}=Ne({key:e.key},o),D=o.selectionManager.disabledBehavior==="all"&&g.isDisabled?{isDisabled:!0}:{},y=null;r&&t&&(y=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let m=null,P=u.useRef(null),{visuallyHiddenProps:v}=_();i&&t&&(m=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},i,P));let h=r&&r.isDragging(e.key),w=M({...a,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...g,isHovered:R,isFocusVisible:T,selectionMode:o.selectionManager.selectionMode,selectionBehavior:o.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:h,isDropTarget:m==null?void 0:m.isDropTarget}}),E=u.useRef(null);return u.useEffect(()=>{r&&!E.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),u.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),f.createElement(f.Fragment,null,m&&!m.isHidden&&f.createElement("div",{role:"row",style:{position:"absolute"}},f.createElement("div",{role:"gridcell"},f.createElement("div",{role:"button",...v,...m==null?void 0:m.dropIndicatorProps,ref:P}))),f.createElement("div",{...se(ne(a),d,x,k,y==null?void 0:y.dragProps),...w,ref:c,"data-selected":g.isSelected||void 0,"data-disabled":g.isDisabled||void 0,"data-hovered":R||void 0,"data-focused":g.isFocused||void 0,"data-focus-visible":T||void 0,"data-pressed":g.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":h||void 0,"data-drop-target":(m==null?void 0:m.isDropTarget)||void 0,"data-selection-mode":o.selectionManager.selectionMode==="none"?void 0:o.selectionManager.selectionMode},f.createElement("div",{...p,style:{display:"contents"}},f.createElement(de,{values:[[ye,{slots:{selection:S}}],[me,{slots:{[q]:D,drag:{...y==null?void 0:y.dragButtonProps,ref:E,style:{pointerEvents:"none"}}}}],[Ie,{slots:{[q]:{},description:$}}],[V,xe],[j,null]]},w.children))))});function Qe(l,a){a=ie(a);let{dragAndDropHooks:s,dropState:e}=u.useContext(L),o=u.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:i}=s.useDropIndicator(l,e,o);return r?null:f.createElement(Ye,{...l,dropIndicatorProps:t,isDropTarget:i,buttonRef:o,ref:a})}function Xe(l,a){let{dropIndicatorProps:s,isDropTarget:e,buttonRef:o,...t}=l,{visuallyHiddenProps:r}=_(),i=M({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return f.createElement("div",{...i,role:"row",ref:a,"data-drop-target":e||void 0},f.createElement("div",{role:"gridcell"},f.createElement("div",{...r,role:"button",...s,ref:o}),i.children))}const Ye=u.forwardRef(Xe);function Ze(){let{dragAndDropHooks:l,dropState:a}=u.useContext(L),s=u.useRef(null),{dropIndicatorProps:e}=l.useDropIndicator({target:{type:"root"}},a,s),o=a.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=_();return!o&&e["aria-hidden"]?null:f.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},f.createElement("div",{role:"gridcell"},f.createElement("div",{role:"button",...t,...e,ref:s})))}const et='"../../../theme/src/lib/tokens.css"',tt='"Inter", sans-serif',rt="#000000",ot="#b31b1b",at="(max-width: 767px)",it="#bfbfbf",lt="#e6e6e6",st="#f2f2f2",nt="_multiSelect_74wfw_4",dt="_button_74wfw_11",ct="_popover_74wfw_51",ft="_icon_74wfw_58",pt="_listBoxItem_74wfw_64",C={tokens:et,display:tt,black:rt,signalRed130:ot,smBreakpoint:at,gray50:it,gray20:lt,backgroundSecondary:st,multiSelect:nt,button:dt,popover:ct,icon:ft,listBoxItem:pt},ut=({label:l,description:a,items:s,onSelectionChange:e,selectedKeys:o,defaultSelectedKeys:t})=>{const r=f.useRef(null),[i,c]=f.useState(void 0),n=Ge({initialItems:s,initialSelectedKeys:t});f.useEffect(()=>{const p=()=>{r.current&&c(r.current.offsetWidth-2)};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]),f.useEffect(()=>{e&&e(new Set(n.selectedKeys))},[n.selectedKeys,e]),f.useEffect(()=>{o&&n.setSelectedKeys(new Set(o))},[o]);const d=n.selectedKeys==="all"?new Set(n.items.map(p=>p.id)):n.selectedKeys;return b.jsxs("div",{className:C.multiSelect,children:[b.jsx(Me,{label:l,description:a,children:b.jsxs(ge,{children:[b.jsxs(be,{className:C.button,ref:r,children:["Välj",b.jsx("div",{className:C.icon,"aria-hidden":"true",children:b.jsx(Fe,{size:20})})]}),b.jsx($e,{className:C.popover,style:{width:i},offset:0,children:b.jsx(Ue,{"aria-label":l,selectionMode:"multiple",selectedKeys:n.selectedKeys,onSelectionChange:n.setSelectedKeys,children:n.items.map(p=>b.jsxs(Je,{id:p.id,textValue:p.name,className:C.listBoxItem,children:[b.jsx(_e,{slot:"selection"}),p.name]},p.id))})})]})}),b.jsx(Te,{"aria-label":"Valda",onRemove:p=>n.remove(...p),children:Array.from(d).map(p=>{const $=n.getItem(p);return b.jsx(Ae,{id:$.id,textValue:$.name,children:$.name},$.id)})})]})},or={component:ut,title:"Components/MultiSelect"},mt=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],F=mt.map(l=>({name:l,id:l.toLocaleLowerCase()})),A={args:{label:"Etikett",description:"Valfri hjälptext",items:F}},H={args:{label:"Etikett",description:"Blackberry är förvalt",items:F,defaultSelectedKeys:["blackberry"]}},B={args:{label:"Etikett",description:"Alla val är förvalda",items:F,defaultSelectedKeys:"all"}};var Q,X,Y;A.parameters={...A.parameters,docs:{...(Q=A.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    items: options
  }
}`,...(Y=(X=A.parameters)==null?void 0:X.docs)==null?void 0:Y.source}}};var Z,ee,te;H.parameters={...H.parameters,docs:{...(Z=H.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry']
  }
}`,...(te=(ee=H.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var re,oe,ae;B.parameters={...B.parameters,docs:{...(re=B.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Alla val är förvalda',
    items: options,
    defaultSelectedKeys: 'all'
  }
}`,...(ae=(oe=B.parameters)==null?void 0:oe.docs)==null?void 0:ae.source}}};const ar=["Primary","DefaultSelectedKeys","AllKeysSelected"];export{B as AllKeysSelected,H as DefaultSelectedKeys,A as Primary,ar as __namedExportsOrder,or as default};
