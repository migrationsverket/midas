import{j as b}from"./jsx-runtime-Nms4Y4qS.js";import{$ as ae,a as le}from"./Button-CFI5xjAF.js";import{h as se,j as ne}from"./Dialog-BH7dEMoU.js";import{a as de}from"./RSPContexts-Bc9pl35m.js";import{$ as ce,a as A,b as fe,c as pe,d as ue}from"./Collection-CKcZJKgp.js";import{h as Q,d as me,e as X,f as L,c as Y,n as Z,A as ee,C as z,$ as be}from"./useFocusable-C3Zwbx3S.js";import{$ as B,a as W,b as ge,c as $e,d as ve}from"./DragAndDrop-D1my3whc.js";import{$ as V}from"./ListBox-DXIOu1yG.js";import{a as ye}from"./Text-CYGrO2MJ.js";import{r as p,R as c}from"./index-BwDkhjyp.js";import{$ as xe,b as De,c as he,a as Pe,T as we}from"./Tag-CmSgnZ5G.js";import{$ as Se}from"./useGridSelectionCheckbox-C-MLgK4s.js";import{a as ke}from"./FocusScope-DI20Bbtn.js";import{$ as j}from"./VisuallyHidden-Booyl0mQ.js";import{$ as Ie}from"./useListState-DjCLJrex.js";import{$ as Ee}from"./useCollator-D6c6TZtq.js";import{$ as Ce}from"./context-C8hDq7-P.js";import{I as Re}from"./TextField-BJXgRXB4.js";import"./CheckboxGroup-8kByQAWp.js";import{C as Te}from"./Checkbox-CWRMQKkt.js";import{C as Ke}from"./chevron-down-FOu3nidH.js";import"./Hidden-BkVGwKza.js";import"./index-Drt3gf4w.js";import"./_commonjsHelpers-BosuxZz1.js";import"./clsx-B-dksMZM.js";import"./PressResponder-CPELVzzG.js";import"./useControlledState-AHXFv9X8.js";import"./getScrollParent-yMl4gzwT.js";import"./isScrollable-Bts8_1NI.js";import"./useLocalizedStringFormatter-CxeZs8NQ.js";import"./index-Bb28N59q.js";import"./SelectionManager-C4CZJXbT.js";import"./scrollIntoView-DUcd1lYg.js";import"./useDescription-BubdPxWs.js";import"./useHighlightSelectionDescription-QN9Az8HR.js";import"./useUpdateEffect-CCcm2-in.js";import"./useHasTabbableChild-Dolr4SiZ.js";import"./x-BNls5wfR.js";import"./createLucideIcon-WuqQdmgs.js";import"./Form-BjuKzKLB.js";import"./triangle-alert-BkMwT_kE.js";import"./Group-nedW5vS6.js";function He(l,a){let{key:n}=l;const{checkboxProps:e}=Se(l,a);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${xe(a,n)}`}}}function Be(l){let{initialItems:a=[],initialSelectedKeys:n,getKey:e=f=>{var d;return(d=f.id)!==null&&d!==void 0?d:f.key},filter:o,initialFilterText:t=""}=l,[r,i]=p.useState({items:a,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:t}),s=p.useMemo(()=>o?r.items.filter(f=>o(f,r.filterText)):r.items,[r.items,r.filterText,o]);return{...r,items:s,...Ae({getKey:e},i),getItem(f){return r.items.find(d=>e(d)===f)}}}function Ae(l,a){let{cursor:n,getKey:e}=l;return{setSelectedKeys(o){a(t=>({...t,selectedKeys:o}))},setFilterText(o){a(t=>({...t,filterText:o}))},insert(o,...t){a(r=>E(r,o,...t))},insertBefore(o,...t){a(r=>{let i=r.items.findIndex(s=>e(s)===o);if(i===-1)if(r.items.length===0)i=0;else return r;return E(r,i,...t)})},insertAfter(o,...t){a(r=>{let i=r.items.findIndex(s=>e(s)===o);if(i===-1)if(r.items.length===0)i=0;else return r;return E(r,i+1,...t)})},prepend(...o){a(t=>E(t,0,...o))},append(...o){a(t=>E(t,t.items.length,...o))},remove(...o){a(t=>{let r=new Set(o),i=t.items.filter(f=>!r.has(e(f))),s="all";if(t.selectedKeys!=="all"){s=new Set(t.selectedKeys);for(let f of o)s.delete(f)}return n==null&&i.length===0&&(s=new Set),{...t,items:i,selectedKeys:s}})},removeSelectedItems(){a(o=>{if(o.selectedKeys==="all")return{...o,items:[],selectedKeys:new Set};let t=o.selectedKeys,r=o.items.filter(i=>!t.has(e(i)));return{...o,items:r,selectedKeys:new Set}})},move(o,t){a(r=>{let i=r.items.findIndex(d=>e(d)===o);if(i===-1)return r;let s=r.items.slice(),[f]=s.splice(i,1);return s.splice(t,0,f),{...r,items:s}})},moveBefore(o,t){a(r=>{let i=r.items.findIndex(d=>e(d)===o);if(i===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(d=>r.items.findIndex(m=>e(m)===d)).sort((d,m)=>d-m);return O(r,f,i)})},moveAfter(o,t){a(r=>{let i=r.items.findIndex(d=>e(d)===o);if(i===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(d=>r.items.findIndex(m=>e(m)===d)).sort((d,m)=>d-m);return O(r,f,i+1)})},update(o,t){a(r=>{let i=r.items.findIndex(s=>e(s)===o);return i===-1?r:{...r,items:[...r.items.slice(0,i),t,...r.items.slice(i+1)]}})}}}function E(l,a,...n){return{...l,items:[...l.items.slice(0,a),...n,...l.items.slice(a)]}}function O(l,a,n){n-=a.filter(t=>t<n).length;let e=a.map(t=>({from:t,to:n++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let i=t;i<e.length;i++)e[i].from>r&&e[i].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let i=e.length-1;i>t;i--){let s=e[i];s.from<r.to?r.to++:s.from++}}let o=l.items.slice();for(let t of e){let[r]=o.splice(t.from,1);o.splice(t.to,0,r)}return{...l,items:o}}const Ve=p.createContext(null);function Le(l,a){return[l,a]=be(l,a,Ve),c.createElement(pe,{content:c.createElement(ue,l)},n=>c.createElement(je,{props:l,collection:n,gridListRef:a}))}function je({props:l,collection:a,gridListRef:n}){let{dragAndDropHooks:e,keyboardNavigationBehavior:o="arrow",layout:t="stack"}=l,{CollectionRoot:r,isVirtualized:i,layoutDelegate:s,dropTargetDelegate:f}=p.useContext(A),d=Ie({...l,collection:a,children:void 0,layoutDelegate:s}),m=Ee({usage:"search",sensitivity:"base"}),{disabledBehavior:R,disabledKeys:g}=d.selectionManager,{direction:S}=Ce(),T=p.useMemo(()=>new W({collection:a,collator:m,ref:n,disabledKeys:g,disabledBehavior:R,layoutDelegate:s,layout:t,direction:S}),[a,n,t,g,R,s,m,S]),{gridProps:K}=he({...l,keyboardDelegate:T,keyboardNavigationBehavior:t==="grid"?"tab":o,isVirtualized:i},d,n),y=d.selectionManager,h=!!(e!=null&&e.useDraggableCollectionState),x=!!(e!=null&&e.useDroppableCollectionState),$=p.useRef(h),u=p.useRef(x);p.useEffect(()=>{$.current!==h&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),u.current!==x&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[h,x]);let P,v,D,w=!1,k=null,M=p.useRef(null);if(h&&e){P=e.useDraggableCollectionState({collection:a,selectionManager:y,preview:e.renderDragPreview?M:void 0}),e.useDraggableCollection({},P,n);let I=e.DragPreview;k=e.renderDragPreview?c.createElement(I,{ref:M},e.renderDragPreview):null}if(x&&e){v=e.useDroppableCollectionState({collection:a,selectionManager:y});let I=new W({collection:a,disabledKeys:y.disabledKeys,disabledBehavior:y.disabledBehavior,ref:n}),ie=e.dropTargetDelegate||f||new e.ListDropTargetDelegate(a,n,{layout:t,direction:S});D=e.useDroppableCollection({keyboardDelegate:I,dropTargetDelegate:ie},v,n),w=v.isDropTarget({type:"root"})}let{focusProps:te,isFocused:_,isFocusVisible:F}=X(),N={isDropTarget:w,isEmpty:d.collection.size===0,isFocused:_,isFocusVisible:F,layout:t,state:d},re=L({className:l.className,style:l.style,defaultClassName:"react-aria-GridList",values:N}),G=null,oe=null;if(d.collection.size===0&&l.renderEmptyState){let I=l.renderEmptyState(N);G=c.createElement("div",{role:"row",style:{display:"contents"}},c.createElement("div",{role:"gridcell",style:{display:"contents"}},I))}return c.createElement(ke,null,c.createElement("div",{...Z(l),...re,...Y(K,te,D==null?void 0:D.collectionProps,oe),ref:n,slot:l.slot||void 0,onScroll:l.onScroll,"data-drop-target":w||void 0,"data-empty":d.collection.size===0||void 0,"data-focused":_||void 0,"data-focus-visible":F||void 0,"data-layout":t},c.createElement(ee,{values:[[V,d],[B,{dragAndDropHooks:e,dragState:P,dropState:v}],[ge,{render:Fe}]]},x&&c.createElement(ze,null),c.createElement(r,{collection:a,scrollRef:n,persistedKeys:$e(y,e,v),renderDropIndicator:ve(e,v)})),G,k))}const Me=p.forwardRef(Le),_e=ce("item",function(a,n,e){let o=p.useContext(V),{dragAndDropHooks:t,dragState:r,dropState:i}=p.useContext(B),s=Q(n),{isVirtualized:f}=p.useContext(A),{rowProps:d,gridCellProps:m,descriptionProps:R,...g}=De({node:e,shouldSelectOnPressUp:!!r,isVirtualized:f},o,s),{hoverProps:S,isHovered:T}=me({isDisabled:!g.allowsSelection&&!g.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:K,focusProps:y}=X(),{checkboxProps:h}=He({key:e.key},o),x=o.selectionManager.disabledBehavior==="all"&&g.isDisabled?{isDisabled:!0}:{},$=null;r&&t&&($=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let u=null,P=p.useRef(null),{visuallyHiddenProps:v}=j();i&&t&&(u=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},i,P));let D=r&&r.isDragging(e.key),w=L({...a,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...g,isHovered:T,isFocusVisible:K,selectionMode:o.selectionManager.selectionMode,selectionBehavior:o.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:D,isDropTarget:u==null?void 0:u.isDropTarget}}),k=p.useRef(null);return p.useEffect(()=>{r&&!k.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),p.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),c.createElement(c.Fragment,null,u&&!u.isHidden&&c.createElement("div",{role:"row",style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...v,...u==null?void 0:u.dropIndicatorProps,ref:P}))),c.createElement("div",{...Y(Z(a),d,y,S,$==null?void 0:$.dragProps),...w,ref:s,"data-selected":g.isSelected||void 0,"data-disabled":g.isDisabled||void 0,"data-hovered":T||void 0,"data-focused":g.isFocused||void 0,"data-focus-visible":K||void 0,"data-pressed":g.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":D||void 0,"data-drop-target":(u==null?void 0:u.isDropTarget)||void 0,"data-selection-mode":o.selectionManager.selectionMode==="none"?void 0:o.selectionManager.selectionMode},c.createElement("div",{...m,style:{display:"contents"}},c.createElement(ee,{values:[[de,{slots:{selection:h}}],[ae,{slots:{[z]:x,drag:{...$==null?void 0:$.dragButtonProps,ref:k,style:{pointerEvents:"none"}}}}],[ye,{slots:{[z]:{},description:R}}],[A,fe],[V,null]]},w.children))))});function Fe(l,a){a=Q(a);let{dragAndDropHooks:n,dropState:e}=p.useContext(B),o=p.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:i}=n.useDropIndicator(l,e,o);return r?null:c.createElement(Ge,{...l,dropIndicatorProps:t,isDropTarget:i,buttonRef:o,ref:a})}function Ne(l,a){let{dropIndicatorProps:n,isDropTarget:e,buttonRef:o,...t}=l,{visuallyHiddenProps:r}=j(),i=L({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return c.createElement("div",{...i,role:"row",ref:a,"data-drop-target":e||void 0},c.createElement("div",{role:"gridcell"},c.createElement("div",{...r,role:"button",...n,ref:o}),i.children))}const Ge=p.forwardRef(Ne);function ze(){let{dragAndDropHooks:l,dropState:a}=p.useContext(B),n=p.useRef(null),{dropIndicatorProps:e}=l.useDropIndicator({target:{type:"root"}},a,n),o=a.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=j();return!o&&e["aria-hidden"]?null:c.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...t,...e,ref:n})))}const We='"../../../theme/src/lib/tokens.css"',Oe='"Inter", sans-serif',qe="#000000",Ue="#b31b1b",Je="(max-width: 767px)",Qe="#bfbfbf",Xe="#e6e6e6",Ye="#f2f2f2",Ze="_multiSelect_74wfw_4",et="_button_74wfw_11",tt="_popover_74wfw_51",rt="_icon_74wfw_58",ot="_listBoxItem_74wfw_64",C={tokens:We,display:Oe,black:qe,signalRed130:Ue,smBreakpoint:Je,gray50:Qe,gray20:Xe,backgroundSecondary:Ye,multiSelect:Ze,button:et,popover:tt,icon:rt,listBoxItem:ot},it=({label:l,description:a,items:n,onSelectionChange:e})=>{const o=c.useRef(null),[t,r]=c.useState(void 0);c.useEffect(()=>{const s=()=>{o.current&&r(o.current.offsetWidth-2)};return s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]);const i=Be({initialItems:n});return c.useEffect(()=>{e&&e(new Set(i.selectedKeys))},[i.selectedKeys,e]),b.jsxs("div",{className:C.multiSelect,children:[b.jsx(Re,{label:l,description:a,children:b.jsxs(se,{children:[b.jsxs(le,{className:C.button,ref:o,children:["Välj",b.jsx("div",{className:C.icon,"aria-hidden":"true",children:b.jsx(Ke,{size:20})})]}),b.jsx(ne,{className:C.popover,style:{width:t},offset:0,children:b.jsx(Me,{"aria-label":l,selectionMode:"multiple",selectedKeys:i.selectedKeys,onSelectionChange:i.setSelectedKeys,children:i.items.map(s=>b.jsxs(_e,{id:s.id,textValue:s.name,className:C.listBoxItem,children:[b.jsx(Te,{slot:"selection"}),s.name]},s.id))})})]})}),b.jsx(Pe,{"aria-label":"Valda",onRemove:s=>i.remove(...s),children:Array.from(i.selectedKeys).map(s=>{const f=i.getItem(s);return b.jsx(we,{id:f.id,textValue:f.name,children:f.name},f.id)})})]})},Jt={component:it,title:"Components/MultiSelect"},at=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],lt=at.map(l=>({name:l,id:l.toLocaleLowerCase()})),H={args:{label:"Etikett",description:"Valfri hjälptext",items:lt}};var q,U,J;H.parameters={...H.parameters,docs:{...(q=H.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    items: options
  }
}`,...(J=(U=H.parameters)==null?void 0:U.docs)==null?void 0:J.source}}};const Qt=["Primary"];export{H as Primary,Qt as __namedExportsOrder,Jt as default};
