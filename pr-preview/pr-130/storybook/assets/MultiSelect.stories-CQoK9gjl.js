import{j as b}from"./jsx-runtime-Nms4Y4qS.js";import{$ as ce,a as fe}from"./Button-CFI5xjAF.js";import{h as pe,j as ue}from"./Dialog-BH7dEMoU.js";import{a as me}from"./RSPContexts-Bc9pl35m.js";import{$ as be,a as V,b as ge,c as $e,d as ye}from"./Collection-CKcZJKgp.js";import{h as ee,d as ve,e as te,f as j,c as re,n as oe,A as ie,C as W,$ as xe}from"./useFocusable-C3Zwbx3S.js";import{$ as A,a as O,b as De,c as he,d as Pe}from"./DragAndDrop-D1my3whc.js";import{$ as L}from"./ListBox-DXIOu1yG.js";import{a as we}from"./Text-CYGrO2MJ.js";import{r as p,R as c}from"./index-BwDkhjyp.js";import{$ as Se,b as ke,c as Ee,a as Ie,T as Ke}from"./Tag-ijmTaQlG.js";import{$ as Ce}from"./useGridSelectionCheckbox-C-MLgK4s.js";import{a as Re}from"./FocusScope-DI20Bbtn.js";import{$ as M}from"./VisuallyHidden-Booyl0mQ.js";import{$ as Te}from"./useListState-DjCLJrex.js";import{$ as He}from"./useCollator-D6c6TZtq.js";import{$ as Be}from"./context-C8hDq7-P.js";import{I as Ae}from"./TextField-BJXgRXB4.js";import"./CheckboxGroup-C9KK4_K9.js";import{C as Ve}from"./Checkbox-Cr-_9Ij5.js";import{C as Le}from"./chevron-down-FOu3nidH.js";import"./Hidden-BkVGwKza.js";import"./index-Drt3gf4w.js";import"./_commonjsHelpers-BosuxZz1.js";import"./clsx-B-dksMZM.js";import"./PressResponder-CPELVzzG.js";import"./useControlledState-AHXFv9X8.js";import"./getScrollParent-yMl4gzwT.js";import"./isScrollable-Bts8_1NI.js";import"./useLocalizedStringFormatter-CxeZs8NQ.js";import"./index-Bb28N59q.js";import"./SelectionManager-C4CZJXbT.js";import"./scrollIntoView-DUcd1lYg.js";import"./useDescription-BubdPxWs.js";import"./useHighlightSelectionDescription-QN9Az8HR.js";import"./useUpdateEffect-CCcm2-in.js";import"./useHasTabbableChild-Dolr4SiZ.js";import"./x-BNls5wfR.js";import"./createLucideIcon-WuqQdmgs.js";import"./Form-BjuKzKLB.js";import"./triangle-alert-BkMwT_kE.js";import"./Group-nedW5vS6.js";function je(l,i){let{key:n}=l;const{checkboxProps:e}=Ce(l,i);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${Se(i,n)}`}}}function Me(l){let{initialItems:i=[],initialSelectedKeys:n,getKey:e=f=>{var s;return(s=f.id)!==null&&s!==void 0?s:f.key},filter:o,initialFilterText:t=""}=l,[r,a]=p.useState({items:i,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:t}),d=p.useMemo(()=>o?r.items.filter(f=>o(f,r.filterText)):r.items,[r.items,r.filterText,o]);return{...r,items:d,..._e({getKey:e},a),getItem(f){return r.items.find(s=>e(s)===f)}}}function _e(l,i){let{cursor:n,getKey:e}=l;return{setSelectedKeys(o){i(t=>({...t,selectedKeys:o}))},setFilterText(o){i(t=>({...t,filterText:o}))},insert(o,...t){i(r=>I(r,o,...t))},insertBefore(o,...t){i(r=>{let a=r.items.findIndex(d=>e(d)===o);if(a===-1)if(r.items.length===0)a=0;else return r;return I(r,a,...t)})},insertAfter(o,...t){i(r=>{let a=r.items.findIndex(d=>e(d)===o);if(a===-1)if(r.items.length===0)a=0;else return r;return I(r,a+1,...t)})},prepend(...o){i(t=>I(t,0,...o))},append(...o){i(t=>I(t,t.items.length,...o))},remove(...o){i(t=>{let r=new Set(o),a=t.items.filter(f=>!r.has(e(f))),d="all";if(t.selectedKeys!=="all"){d=new Set(t.selectedKeys);for(let f of o)d.delete(f)}return n==null&&a.length===0&&(d=new Set),{...t,items:a,selectedKeys:d}})},removeSelectedItems(){i(o=>{if(o.selectedKeys==="all")return{...o,items:[],selectedKeys:new Set};let t=o.selectedKeys,r=o.items.filter(a=>!t.has(e(a)));return{...o,items:r,selectedKeys:new Set}})},move(o,t){i(r=>{let a=r.items.findIndex(s=>e(s)===o);if(a===-1)return r;let d=r.items.slice(),[f]=d.splice(a,1);return d.splice(t,0,f),{...r,items:d}})},moveBefore(o,t){i(r=>{let a=r.items.findIndex(s=>e(s)===o);if(a===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(s=>r.items.findIndex(u=>e(u)===s)).sort((s,u)=>s-u);return q(r,f,a)})},moveAfter(o,t){i(r=>{let a=r.items.findIndex(s=>e(s)===o);if(a===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(s=>r.items.findIndex(u=>e(u)===s)).sort((s,u)=>s-u);return q(r,f,a+1)})},update(o,t){i(r=>{let a=r.items.findIndex(d=>e(d)===o);return a===-1?r:{...r,items:[...r.items.slice(0,a),t,...r.items.slice(a+1)]}})}}}function I(l,i,...n){return{...l,items:[...l.items.slice(0,i),...n,...l.items.slice(i)]}}function q(l,i,n){n-=i.filter(t=>t<n).length;let e=i.map(t=>({from:t,to:n++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let a=t;a<e.length;a++)e[a].from>r&&e[a].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let a=e.length-1;a>t;a--){let d=e[a];d.from<r.to?r.to++:d.from++}}let o=l.items.slice();for(let t of e){let[r]=o.splice(t.from,1);o.splice(t.to,0,r)}return{...l,items:o}}const Fe=p.createContext(null);function Ne(l,i){return[l,i]=xe(l,i,Fe),c.createElement($e,{content:c.createElement(ye,l)},n=>c.createElement(Ge,{props:l,collection:n,gridListRef:i}))}function Ge({props:l,collection:i,gridListRef:n}){let{dragAndDropHooks:e,keyboardNavigationBehavior:o="arrow",layout:t="stack"}=l,{CollectionRoot:r,isVirtualized:a,layoutDelegate:d,dropTargetDelegate:f}=p.useContext(V),s=Te({...l,collection:i,children:void 0,layoutDelegate:d}),u=He({usage:"search",sensitivity:"base"}),{disabledBehavior:C,disabledKeys:g}=s.selectionManager,{direction:S}=Be(),R=p.useMemo(()=>new O({collection:i,collator:u,ref:n,disabledKeys:g,disabledBehavior:C,layoutDelegate:d,layout:t,direction:S}),[i,n,t,g,C,d,u,S]),{gridProps:T}=Ee({...l,keyboardDelegate:R,keyboardNavigationBehavior:t==="grid"?"tab":o,isVirtualized:a},s,n),v=s.selectionManager,h=!!(e!=null&&e.useDraggableCollectionState),x=!!(e!=null&&e.useDroppableCollectionState),$=p.useRef(h),m=p.useRef(x);p.useEffect(()=>{$.current!==h&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),m.current!==x&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[h,x]);let P,y,D,w=!1,k=null,_=p.useRef(null);if(h&&e){P=e.useDraggableCollectionState({collection:i,selectionManager:v,preview:e.renderDragPreview?_:void 0}),e.useDraggableCollection({},P,n);let E=e.DragPreview;k=e.renderDragPreview?c.createElement(E,{ref:_},e.renderDragPreview):null}if(x&&e){y=e.useDroppableCollectionState({collection:i,selectionManager:v});let E=new O({collection:i,disabledKeys:v.disabledKeys,disabledBehavior:v.disabledBehavior,ref:n}),de=e.dropTargetDelegate||f||new e.ListDropTargetDelegate(i,n,{layout:t,direction:S});D=e.useDroppableCollection({keyboardDelegate:E,dropTargetDelegate:de},y,n),w=y.isDropTarget({type:"root"})}let{focusProps:le,isFocused:F,isFocusVisible:N}=te(),G={isDropTarget:w,isEmpty:s.collection.size===0,isFocused:F,isFocusVisible:N,layout:t,state:s},se=j({className:l.className,style:l.style,defaultClassName:"react-aria-GridList",values:G}),z=null,ne=null;if(s.collection.size===0&&l.renderEmptyState){let E=l.renderEmptyState(G);z=c.createElement("div",{role:"row",style:{display:"contents"}},c.createElement("div",{role:"gridcell",style:{display:"contents"}},E))}return c.createElement(Re,null,c.createElement("div",{...oe(l),...se,...re(T,le,D==null?void 0:D.collectionProps,ne),ref:n,slot:l.slot||void 0,onScroll:l.onScroll,"data-drop-target":w||void 0,"data-empty":s.collection.size===0||void 0,"data-focused":F||void 0,"data-focus-visible":N||void 0,"data-layout":t},c.createElement(ie,{values:[[L,s],[A,{dragAndDropHooks:e,dragState:P,dropState:y}],[De,{render:Oe}]]},x&&c.createElement(Je,null),c.createElement(r,{collection:i,scrollRef:n,persistedKeys:he(v,e,y),renderDropIndicator:Pe(e,y)})),z,k))}const ze=p.forwardRef(Ne),We=be("item",function(i,n,e){let o=p.useContext(L),{dragAndDropHooks:t,dragState:r,dropState:a}=p.useContext(A),d=ee(n),{isVirtualized:f}=p.useContext(V),{rowProps:s,gridCellProps:u,descriptionProps:C,...g}=ke({node:e,shouldSelectOnPressUp:!!r,isVirtualized:f},o,d),{hoverProps:S,isHovered:R}=ve({isDisabled:!g.allowsSelection&&!g.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:T,focusProps:v}=te(),{checkboxProps:h}=je({key:e.key},o),x=o.selectionManager.disabledBehavior==="all"&&g.isDisabled?{isDisabled:!0}:{},$=null;r&&t&&($=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let m=null,P=p.useRef(null),{visuallyHiddenProps:y}=M();a&&t&&(m=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},a,P));let D=r&&r.isDragging(e.key),w=j({...i,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...g,isHovered:R,isFocusVisible:T,selectionMode:o.selectionManager.selectionMode,selectionBehavior:o.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:D,isDropTarget:m==null?void 0:m.isDropTarget}}),k=p.useRef(null);return p.useEffect(()=>{r&&!k.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),p.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),c.createElement(c.Fragment,null,m&&!m.isHidden&&c.createElement("div",{role:"row",style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...y,...m==null?void 0:m.dropIndicatorProps,ref:P}))),c.createElement("div",{...re(oe(i),s,v,S,$==null?void 0:$.dragProps),...w,ref:d,"data-selected":g.isSelected||void 0,"data-disabled":g.isDisabled||void 0,"data-hovered":R||void 0,"data-focused":g.isFocused||void 0,"data-focus-visible":T||void 0,"data-pressed":g.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":D||void 0,"data-drop-target":(m==null?void 0:m.isDropTarget)||void 0,"data-selection-mode":o.selectionManager.selectionMode==="none"?void 0:o.selectionManager.selectionMode},c.createElement("div",{...u,style:{display:"contents"}},c.createElement(ie,{values:[[me,{slots:{selection:h}}],[ce,{slots:{[W]:x,drag:{...$==null?void 0:$.dragButtonProps,ref:k,style:{pointerEvents:"none"}}}}],[we,{slots:{[W]:{},description:C}}],[V,ge],[L,null]]},w.children))))});function Oe(l,i){i=ee(i);let{dragAndDropHooks:n,dropState:e}=p.useContext(A),o=p.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:a}=n.useDropIndicator(l,e,o);return r?null:c.createElement(Ue,{...l,dropIndicatorProps:t,isDropTarget:a,buttonRef:o,ref:i})}function qe(l,i){let{dropIndicatorProps:n,isDropTarget:e,buttonRef:o,...t}=l,{visuallyHiddenProps:r}=M(),a=j({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return c.createElement("div",{...a,role:"row",ref:i,"data-drop-target":e||void 0},c.createElement("div",{role:"gridcell"},c.createElement("div",{...r,role:"button",...n,ref:o}),a.children))}const Ue=p.forwardRef(qe);function Je(){let{dragAndDropHooks:l,dropState:i}=p.useContext(A),n=p.useRef(null),{dropIndicatorProps:e}=l.useDropIndicator({target:{type:"root"}},i,n),o=i.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=M();return!o&&e["aria-hidden"]?null:c.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...t,...e,ref:n})))}const Qe='"../../../theme/src/lib/tokens.css"',Xe='"Inter", sans-serif',Ye="#000000",Ze="#b31b1b",et="(max-width: 767px)",tt="#bfbfbf",rt="#e6e6e6",ot="#f2f2f2",it="_multiSelect_74wfw_4",at="_button_74wfw_11",lt="_popover_74wfw_51",st="_icon_74wfw_58",nt="_listBoxItem_74wfw_64",K={tokens:Qe,display:Xe,black:Ye,signalRed130:Ze,smBreakpoint:et,gray50:tt,gray20:rt,backgroundSecondary:ot,multiSelect:it,button:at,popover:lt,icon:st,listBoxItem:nt},dt=({label:l,description:i,items:n,onSelectionChange:e,selectedKeys:o,defaultSelectedKeys:t})=>{const r=c.useRef(null),[a,d]=c.useState(void 0),f=Me({initialItems:n,initialSelectedKeys:t||[]});return c.useEffect(()=>{const s=()=>{r.current&&d(r.current.offsetWidth-2)};return s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]),c.useEffect(()=>{e&&e(new Set(f.selectedKeys))},[f.selectedKeys,e]),c.useEffect(()=>{o&&f.setSelectedKeys(new Set(o))},[o]),b.jsxs("div",{className:K.multiSelect,children:[b.jsx(Ae,{label:l,description:i,children:b.jsxs(pe,{children:[b.jsxs(fe,{className:K.button,ref:r,children:["Välj",b.jsx("div",{className:K.icon,"aria-hidden":"true",children:b.jsx(Le,{size:20})})]}),b.jsx(ue,{className:K.popover,style:{width:a},offset:0,children:b.jsx(ze,{"aria-label":l,selectionMode:"multiple",selectedKeys:f.selectedKeys,onSelectionChange:f.setSelectedKeys,children:f.items.map(s=>b.jsxs(We,{id:s.id,textValue:s.name,className:K.listBoxItem,children:[b.jsx(Ve,{slot:"selection"}),s.name]},s.id))})})]})}),b.jsx(Ie,{"aria-label":"Valda",onRemove:s=>f.remove(...s),children:Array.from(f.selectedKeys).map(s=>{const u=f.getItem(s);return u?b.jsx(Ke,{id:u.id,textValue:u.name,children:u.name},u.id):null})})]})},Zt={component:dt,title:"Components/MultiSelect"},ct=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],ae=ct.map(l=>({name:l,id:l.toLocaleLowerCase()})),H={args:{label:"Etikett",description:"Valfri hjälptext",items:ae}},B={args:{label:"Etikett",description:"Blackberry är förvalt",items:ae,defaultSelectedKeys:["blackberry"]}};var U,J,Q;H.parameters={...H.parameters,docs:{...(U=H.parameters)==null?void 0:U.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    items: options
  }
}`,...(Q=(J=H.parameters)==null?void 0:J.docs)==null?void 0:Q.source}}};var X,Y,Z;B.parameters={...B.parameters,docs:{...(X=B.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry']
  }
}`,...(Z=(Y=B.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};const er=["Primary","DefaultSelectedKeys"];export{B as DefaultSelectedKeys,H as Primary,er as __namedExportsOrder,Zt as default};
