import{j as v}from"./jsx-runtime-CfatFE5O.js";import{$ as he,a as Se}from"./Button-DRyTw_69.js";import{h as me,d as ke,e as be,f as z,b as ge,n as $e,y as G,z as _,c as Pe}from"./useFocusable-CUvAewCR.js";import{$ as Ee,a as we}from"./Dialog-Bk-R8JAE.js";import{a as Ie}from"./Form-Bnef0d36.js";import{$ as Ke}from"./RSPContexts-Djf1EgA4.js";import{$ as Be,a as F,b as Te,c as Ce,d as Re}from"./Collection-D2MgYaM2.js";import{$ as V,a as X,b as Ae,c as He,d as Me}from"./DragAndDrop-ieluuKp3.js";import{$ as N}from"./ListBox-D6lH0XnD.js";import{a as Le}from"./Text-CUSXFwf2.js";import{r as p,R as c}from"./index-ClcD9ViR.js";import{$ as je,b as Ve,c as _e,a as Fe,T as Ne}from"./Tag-B50OkdoP.js";import{$ as ze}from"./useGridSelectionCheckbox-BfiAwPan.js";import{a as Ge}from"./FocusScope-Do-PkUts.js";import{$ as W}from"./VisuallyHidden-CU0vF0eT.js";import{$ as We}from"./useListState-B3RSIWo1.js";import{$ as Oe}from"./useCollator-ZDMRt11h.js";import{$ as Ue}from"./context-C9cAOQ0o.js";import{I as qe}from"./TextField-Bs-AwA5r.js";import"./CheckboxGroup-DYI8EjPY.js";import{C as Je}from"./Checkbox-B-6-YZVg.js";import{C as Qe}from"./chevron-down-CVNiYbvV.js";import"./Hidden-CB9z-rbJ.js";import"./index-ZuzByk-F.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./clsx-B-dksMZM.js";import"./PressResponder-BlG14Tb7.js";import"./useControlledState-DFHhQ_7Z.js";import"./useLocalizedStringFormatter-Dv05nzCb.js";import"./index-DvHoLfqc.js";import"./scrollIntoView-CFanVOW_.js";import"./SelectionManager-Bf1YJvgz.js";import"./useDescription-D06dHw1z.js";import"./useHighlightSelectionDescription-Dr-imSqZ.js";import"./useUpdateEffect-DMLA2Avq.js";import"./useHasTabbableChild-CbzbS3aq.js";import"./ButtonGroup-Duds0FV0.js";import"./x-BaIpobvV.js";import"./createLucideIcon-DQK9Z80p.js";import"./Group-DqznbdRl.js";function Xe(s,i){let{key:l}=s;const{checkboxProps:e}=ze(s,i);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${je(i,l)}`}}}function Ye(s){let{initialItems:i=[],initialSelectedKeys:l,getKey:e=f=>{var n;return(n=f.id)!==null&&n!==void 0?n:f.key},filter:o,initialFilterText:t=""}=s,[r,a]=p.useState({items:i,selectedKeys:l==="all"?"all":new Set(l||[]),filterText:t}),d=p.useMemo(()=>o?r.items.filter(f=>o(f,r.filterText)):r.items,[r.items,r.filterText,o]);return{...r,items:d,...Ze({getKey:e},a),getItem(f){return r.items.find(n=>e(n)===f)}}}function Ze(s,i){let{cursor:l,getKey:e}=s;return{setSelectedKeys(o){i(t=>({...t,selectedKeys:o}))},setFilterText(o){i(t=>({...t,filterText:o}))},insert(o,...t){i(r=>B(r,o,...t))},insertBefore(o,...t){i(r=>{let a=r.items.findIndex(d=>(e==null?void 0:e(d))===o);if(a===-1)if(r.items.length===0)a=0;else return r;return B(r,a,...t)})},insertAfter(o,...t){i(r=>{let a=r.items.findIndex(d=>(e==null?void 0:e(d))===o);if(a===-1)if(r.items.length===0)a=0;else return r;return B(r,a+1,...t)})},prepend(...o){i(t=>B(t,0,...o))},append(...o){i(t=>B(t,t.items.length,...o))},remove(...o){i(t=>{let r=new Set(o),a=t.items.filter(f=>!r.has(e(f))),d="all";if(t.selectedKeys!=="all"){d=new Set(t.selectedKeys);for(let f of o)d.delete(f)}return l==null&&a.length===0&&(d=new Set),{...t,items:a,selectedKeys:d}})},removeSelectedItems(){i(o=>{if(o.selectedKeys==="all")return{...o,items:[],selectedKeys:new Set};let t=o.selectedKeys,r=o.items.filter(a=>!t.has(e(a)));return{...o,items:r,selectedKeys:new Set}})},move(o,t){i(r=>{let a=r.items.findIndex(n=>e(n)===o);if(a===-1)return r;let d=r.items.slice(),[f]=d.splice(a,1);return d.splice(t,0,f),{...r,items:d}})},moveBefore(o,t){i(r=>{let a=r.items.findIndex(n=>e(n)===o);if(a===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(n=>r.items.findIndex(g=>e(g)===n)).sort((n,g)=>n-g);return Y(r,f,a)})},moveAfter(o,t){i(r=>{let a=r.items.findIndex(n=>e(n)===o);if(a===-1)return r;let f=(Array.isArray(t)?t:[...t]).map(n=>r.items.findIndex(g=>e(g)===n)).sort((n,g)=>n-g);return Y(r,f,a+1)})},update(o,t){i(r=>{let a=r.items.findIndex(d=>e(d)===o);return a===-1?r:{...r,items:[...r.items.slice(0,a),t,...r.items.slice(a+1)]}})}}}function B(s,i,...l){return{...s,items:[...s.items.slice(0,i),...l,...s.items.slice(i)]}}function Y(s,i,l){l-=i.filter(t=>t<l).length;let e=i.map(t=>({from:t,to:l++}));for(let t=0;t<e.length;t++){let r=e[t].from;for(let a=t;a<e.length;a++)e[a].from>r&&e[a].from--}for(let t=0;t<e.length;t++){let r=e[t];for(let a=e.length-1;a>t;a--){let d=e[a];d.from<r.to?r.to++:d.from++}}let o=s.items.slice();for(let t of e){let[r]=o.splice(t.from,1);o.splice(t.to,0,r)}return{...s,items:o}}const et=p.createContext(null);function tt(s,i){return[s,i]=Pe(s,i,et),c.createElement(Ce,{content:c.createElement(Re,s)},l=>c.createElement(rt,{props:s,collection:l,gridListRef:i}))}function rt({props:s,collection:i,gridListRef:l}){let{dragAndDropHooks:e,keyboardNavigationBehavior:o="arrow",layout:t="stack"}=s,{CollectionRoot:r,isVirtualized:a,layoutDelegate:d,dropTargetDelegate:f}=p.useContext(F),n=We({...s,collection:i,children:void 0,layoutDelegate:d}),g=Oe({usage:"search",sensitivity:"base"}),{disabledBehavior:b,disabledKeys:y}=n.selectionManager,{direction:u}=Ue(),m=p.useMemo(()=>new X({collection:i,collator:g,ref:l,disabledKeys:y,disabledBehavior:b,layoutDelegate:d,layout:t,direction:u}),[i,l,t,y,b,d,g,u]),{gridProps:R}=_e({...s,keyboardDelegate:m,keyboardNavigationBehavior:t==="grid"?"tab":o,isVirtualized:a},n,l),h=n.selectionManager,P=!!(e!=null&&e.useDraggableCollectionState),S=!!(e!=null&&e.useDroppableCollectionState),x=p.useRef(P),$=p.useRef(S);p.useEffect(()=>{x.current!==P&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),$.current!==S&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[P,S]);let E,D,k,w=!1,I=null,O=p.useRef(null);if(P&&e){E=e.useDraggableCollectionState({collection:i,selectionManager:h,preview:e.renderDragPreview?O:void 0}),e.useDraggableCollection({},E,l);let K=e.DragPreview;I=e.renderDragPreview?c.createElement(K,{ref:O},e.renderDragPreview):null}if(S&&e){D=e.useDroppableCollectionState({collection:i,selectionManager:h});let K=new X({collection:i,disabledKeys:h.disabledKeys,disabledBehavior:h.disabledBehavior,ref:l}),De=e.dropTargetDelegate||f||new e.ListDropTargetDelegate(i,l,{layout:t,direction:u});k=e.useDroppableCollection({keyboardDelegate:K,dropTargetDelegate:De},D,l),w=D.isDropTarget({type:"root"})}let{focusProps:ye,isFocused:U,isFocusVisible:q}=be(),J={isDropTarget:w,isEmpty:n.collection.size===0,isFocused:U,isFocusVisible:q,layout:t,state:n},ve=z({className:s.className,style:s.style,defaultClassName:"react-aria-GridList",values:J}),Q=null,xe=null;if(n.collection.size===0&&s.renderEmptyState){let K=s.renderEmptyState(J);Q=c.createElement("div",{role:"row",style:{display:"contents"}},c.createElement("div",{role:"gridcell",style:{display:"contents"}},K))}return c.createElement(Ge,null,c.createElement("div",{...$e(s),...ve,...ge(R,ye,k==null?void 0:k.collectionProps,xe),ref:l,slot:s.slot||void 0,onScroll:s.onScroll,"data-drop-target":w||void 0,"data-empty":n.collection.size===0||void 0,"data-focused":U||void 0,"data-focus-visible":q||void 0,"data-layout":t},c.createElement(G,{values:[[N,n],[V,{dragAndDropHooks:e,dragState:E,dropState:D}],[Ae,{render:it}]]},S&&c.createElement(nt,null),c.createElement(r,{collection:i,scrollRef:l,persistedKeys:He(h,e,D),renderDropIndicator:Me(e,D)})),Q,I))}const ot=p.forwardRef(tt),at=Be("item",function(i,l,e){let o=p.useContext(N),{dragAndDropHooks:t,dragState:r,dropState:a}=p.useContext(V),d=me(l),{isVirtualized:f}=p.useContext(F),{rowProps:n,gridCellProps:g,descriptionProps:b,...y}=Ve({node:e,shouldSelectOnPressUp:!!r,isVirtualized:f},o,d),{hoverProps:u,isHovered:m}=ke({isDisabled:!y.allowsSelection&&!y.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:R,focusProps:h}=be(),{checkboxProps:P}=Xe({key:e.key},o),S=o.selectionManager.disabledBehavior==="all"&&y.isDisabled?{isDisabled:!0}:{},x=null;r&&t&&(x=t.useDraggableItem({key:e.key,hasDragButton:!0},r));let $=null,E=p.useRef(null),{visuallyHiddenProps:D}=W();a&&t&&($=t.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},a,E));let k=r&&r.isDragging(e.key),w=z({...i,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...y,isHovered:m,isFocusVisible:R,selectionMode:o.selectionManager.selectionMode,selectionBehavior:o.selectionManager.selectionBehavior,allowsDragging:!!r,isDragging:k,isDropTarget:$==null?void 0:$.isDropTarget}}),I=p.useRef(null);return p.useEffect(()=>{r&&!I.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),p.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),c.createElement(c.Fragment,null,$&&!$.isHidden&&c.createElement("div",{role:"row",style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...D,...$==null?void 0:$.dropIndicatorProps,ref:E}))),c.createElement("div",{...ge($e(i),n,h,u,x==null?void 0:x.dragProps),...w,ref:d,"data-selected":y.isSelected||void 0,"data-disabled":y.isDisabled||void 0,"data-hovered":m||void 0,"data-focused":y.isFocused||void 0,"data-focus-visible":R||void 0,"data-pressed":y.isPressed||void 0,"data-allows-dragging":!!r||void 0,"data-dragging":k||void 0,"data-drop-target":($==null?void 0:$.isDropTarget)||void 0,"data-selection-mode":o.selectionManager.selectionMode==="none"?void 0:o.selectionManager.selectionMode},c.createElement("div",{...g,style:{display:"contents"}},c.createElement(G,{values:[[Ke,{slots:{[_]:{},selection:P}}],[he,{slots:{[_]:S,drag:{...x==null?void 0:x.dragButtonProps,ref:I,style:{pointerEvents:"none"}}}}],[Le,{slots:{[_]:{},description:b}}],[F,Te],[N,null]]},w.children))))});function it(s,i){i=me(i);let{dragAndDropHooks:l,dropState:e}=p.useContext(V),o=p.useRef(null),{dropIndicatorProps:t,isHidden:r,isDropTarget:a}=l.useDropIndicator(s,e,o);return r?null:c.createElement(lt,{...s,dropIndicatorProps:t,isDropTarget:a,buttonRef:o,ref:i})}function st(s,i){let{dropIndicatorProps:l,isDropTarget:e,buttonRef:o,...t}=s,{visuallyHiddenProps:r}=W(),a=z({...t,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return c.createElement("div",{...a,role:"row",ref:i,"data-drop-target":e||void 0},c.createElement("div",{role:"gridcell"},c.createElement("div",{...r,role:"button",...l,ref:o}),a.children))}const lt=p.forwardRef(st);function nt(){let{dragAndDropHooks:s,dropState:i}=p.useContext(V),l=p.useRef(null),{dropIndicatorProps:e}=s.useDropIndicator({target:{type:"root"}},i,l),o=i.isDropTarget({type:"root"}),{visuallyHiddenProps:t}=W();return!o&&e["aria-hidden"]?null:c.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},c.createElement("div",{role:"gridcell"},c.createElement("div",{role:"button",...t,...e,ref:l})))}const dt='"../../../theme/src/lib/tokens.css"',ct='"Inter", sans-serif',ft="#000000",pt="#b31b1b",ut="(max-width: 767px)",mt="#bfbfbf",bt="#e6e6e6",gt="#f2f2f2",$t="_button_1sedg_4",yt="_icon_1sedg_19",vt="_multiSelect_1sedg_44",xt="_popover_1sedg_60",Dt="_listBoxItem_1sedg_73",T={tokens:dt,display:ct,black:ft,signalRed130:pt,smBreakpoint:ut,gray50:mt,gray20:bt,backgroundSecondary:gt,button:$t,icon:yt,multiSelect:vt,popover:xt,listBoxItem:Dt},ht=({label:s,description:i,items:l,onSelectionChange:e,selectedKeys:o,defaultSelectedKeys:t,isDisabled:r,isInvalid:a,errorMessage:d})=>{const f=c.useRef(null),[n,g]=c.useState(void 0),b=Ye({initialItems:l,initialSelectedKeys:t});c.useEffect(()=>{const u=()=>{f.current&&g(f.current.offsetWidth-2)};return u(),window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]),c.useEffect(()=>{e&&e(new Set(b.selectedKeys))},[b.selectedKeys,e]),c.useEffect(()=>{o&&b.setSelectedKeys(new Set(o))},[o]);const y=b.selectedKeys==="all"?new Set(b.items.map(u=>u.id)):b.selectedKeys;return v.jsx("div",{className:T.multiSelect,"data-disabled":r,"data-invalid":a,children:v.jsxs(G,{values:[[Ie,{isInvalid:a||!1,validationErrors:[],validationDetails:{customError:a||!1,badInput:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!1,valueMissing:!1}}]],children:[v.jsx(qe,{label:s,description:i,errorMessage:d,children:v.jsxs(Ee,{children:[v.jsxs(Se,{className:T.button,ref:f,isDisabled:r,children:["Välj",v.jsx("div",{className:T.icon,"aria-hidden":"true",children:v.jsx(Qe,{size:20})})]}),v.jsx(we,{className:T.popover,style:{width:n},offset:0,UNSTABLE_portalContainer:f.current||void 0,children:v.jsx(ot,{"aria-label":s,selectionMode:"multiple",selectedKeys:b.selectedKeys,onSelectionChange:b.setSelectedKeys,children:b.items.map(u=>v.jsxs(at,{id:u.id,textValue:u.name,className:T.listBoxItem,children:[v.jsx(Je,{slot:"selection"}),u.name]},u.id))})})]})}),v.jsx(Fe,{"aria-label":"Valda",onRemove:u=>{b.setSelectedKeys(new Set(Array.from(b.selectedKeys).filter(m=>!u.has(m))))},children:Array.from(y).map(u=>{const m=b.getItem(u);return v.jsx(Ne,{id:m==null?void 0:m.id,textValue:m==null?void 0:m.name,isDisabled:r,dismissable:!0,children:m==null?void 0:m.name},m==null?void 0:m.id)})})]})})},cr={component:ht,title:"Components/MultiSelect",tags:["autodocs"]},St=["Apple","Banana","Kiwi","Elderflower","Nectarine","Watermelon","Pineapple","Apricot","Cloudberry","Mango","Strawberry","Blueberry","Raspberry","Blackberry","Cherry","Peach","Plum","Grape","Orange","Lemon","Lime","Coconut","Fig","Papaya","Guava","Pomegranate","Dragonfruit","Starfruit","Passionfruit"],C=St.map(s=>({name:s,id:s.toLocaleLowerCase()})),A={args:{label:"Etikett",description:"Valfri hjälptext",items:C}},H={args:{label:"Etikett",description:"Blackberry är förvalt",items:C,defaultSelectedKeys:["blackberry"]}},M={args:{label:"Etikett",description:"Alla val är förvalda",items:C,defaultSelectedKeys:"all"}},L={args:{label:"Etikett",description:"Blackberry är förvalt",items:C,defaultSelectedKeys:["blackberry"],isDisabled:!0}},j={args:{label:"Etikett",description:"Blackberry är förvalt",items:C,defaultSelectedKeys:["blackberry"],isInvalid:!0,errorMessage:"Du får inte välja Blackberry"}};var Z,ee,te;A.parameters={...A.parameters,docs:{...(Z=A.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Valfri hjälptext',
    items: options
  }
}`,...(te=(ee=A.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var re,oe,ae;H.parameters={...H.parameters,docs:{...(re=H.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry']
  }
}`,...(ae=(oe=H.parameters)==null?void 0:oe.docs)==null?void 0:ae.source}}};var ie,se,le;M.parameters={...M.parameters,docs:{...(ie=M.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Alla val är förvalda',
    items: options,
    defaultSelectedKeys: 'all'
  }
}`,...(le=(se=M.parameters)==null?void 0:se.docs)==null?void 0:le.source}}};var ne,de,ce;L.parameters={...L.parameters,docs:{...(ne=L.parameters)==null?void 0:ne.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isDisabled: true
  }
}`,...(ce=(de=L.parameters)==null?void 0:de.docs)==null?void 0:ce.source}}};var fe,pe,ue;j.parameters={...j.parameters,docs:{...(fe=j.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    label: 'Etikett',
    description: 'Blackberry är förvalt',
    items: options,
    defaultSelectedKeys: ['blackberry'],
    isInvalid: true,
    errorMessage: 'Du får inte välja Blackberry'
  }
}`,...(ue=(pe=j.parameters)==null?void 0:pe.docs)==null?void 0:ue.source}}};const fr=["Primary","DefaultSelectedKeys","AllKeysSelected","Disabled","Invalid"];export{M as AllKeysSelected,H as DefaultSelectedKeys,L as Disabled,j as Invalid,A as Primary,fr as __namedExportsOrder,cr as default};
