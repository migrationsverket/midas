import{$}from"./getScrollParent-CvodOSaS.js";import{g as d,d as b}from"./utils-D2qQONNw.js";import{r as o,e as f}from"./iframe-B4tPl1wR.js";function I(r,e){let{collection:t,onLoadMore:n,scrollOffset:l=1}=r,c=o.useRef(null),i=d(u=>{for(let a of u)a.isIntersecting&&n&&n()});b(()=>(e.current&&(c.current=new IntersectionObserver(i,{root:$(e==null?void 0:e.current),rootMargin:`0px ${100*l}% ${100*l}% ${100*l}%`}),c.current.observe(e.current)),()=>{c.current&&c.current.disconnect()}),[t,i,e,l])}const y=o.createContext({}),s=o.createContext(null),v=o.forwardRef(function(e,t){let{render:n}=o.useContext(s);return f.createElement(f.Fragment,null,n(e,t))});function M(r,e){var t;let n=r==null?void 0:r.renderDropIndicator,l=r==null||(t=r.isVirtualDragging)===null||t===void 0?void 0:t.call(r),c=o.useCallback(i=>{if(l||e!=null&&e.isDropTarget(i))return n?n(i):f.createElement(v,{target:i})},[e==null?void 0:e.target,l,n]);return r!=null&&r.useDropIndicator?c:void 0}function V(r,e,t){var n,l;let c=r.focusedKey,i=null;if(!(e==null||(n=e.isVirtualDragging)===null||n===void 0)&&n.call(e)&&(t==null||(l=t.target)===null||l===void 0?void 0:l.type)==="item"){i=t.target.key;var u;t.target.dropPosition==="after"&&(i=(u=t.collection.getKeyAfter(i))!==null&&u!==void 0?u:i)}return o.useMemo(()=>new Set([c,i].filter(a=>a!=null)),[c,i])}export{y as $,s as a,M as b,V as c,I as d};
