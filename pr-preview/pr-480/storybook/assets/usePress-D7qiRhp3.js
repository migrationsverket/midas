import{u as ve,s as ye,r as G,v as $e,w as re,x as ne,k as C,y as be,z as Te,i as p,n as d,A as he,B as W,C as j,b as B,d as Pe}from"./useFocusRing-CklmaPa3.js";import{r as S,R as ie}from"./index-BbAIUH2N.js";import{f as I,b as ae,m as Ee}from"./utils-fGMpyvF6.js";import{r as me}from"./index-cpIEhwLo.js";const se=S.createContext({isNative:!0,open:Se,useHref:e=>e});function Re(e){let{children:n,navigate:i,useHref:s}=e,f=S.useMemo(()=>({isNative:!1,open:(g,v,$,b)=>{le(g,P=>{Ke(P,v)?i($,b):w(P,v)})},useHref:s||(g=>g)}),[i,s]);return ie.createElement(se.Provider,{value:f},n)}function oe(){return S.useContext(se)}function Ke(e,n){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&!n.shiftKey}function w(e,n,i=!0){var s,f;let{metaKey:g,ctrlKey:v,altKey:$,shiftKey:b}=n;ve()&&(!((f=window.event)===null||f===void 0||(s=f.type)===null||s===void 0)&&s.startsWith("key"))&&e.target==="_blank"&&(G()?g=!0:v=!0);let P=ye()&&G()&&!$e()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:g,ctrlKey:v,altKey:$,shiftKey:b}):new MouseEvent("click",{metaKey:g,ctrlKey:v,altKey:$,shiftKey:b,bubbles:!0,cancelable:!0});w.isOpening=i,re(e),e.dispatchEvent(P),w.isOpening=!1}w.isOpening=!1;function le(e,n){if(e instanceof HTMLAnchorElement)n(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),n(i),e.removeChild(i)}}function Se(e,n){le(e,i=>w(i,n))}function Fe(e){let n=oe();var i;const s=n.useHref((i=e.href)!==null&&i!==void 0?i:"");return{"data-href":e.href?s:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function Ge(e){let n=oe();var i;const s=n.useHref((i=e==null?void 0:e.href)!==null&&i!==void 0?i:"");return{href:e!=null&&e.href?s:void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}let A="default",N="",Y=new WeakMap;function q(e){if(ne()){if(A==="default"){const n=C(e);N=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}A="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let n="userSelect"in e.style?"userSelect":"webkitUserSelect";Y.set(e,e.style[n]),e.style[n]="none"}}function R(e){if(ne()){if(A!=="disabled")return;A="restoring",setTimeout(()=>{be(()=>{if(A==="restoring"){const n=C(e);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=N||""),N="",A="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&Y.has(e)){let n=Y.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=n),e.getAttribute("style")===""&&e.removeAttribute("style"),Y.delete(e)}}const fe=ie.createContext({register:()=>{}});fe.displayName="PressResponderContext";function xe(e,n){return n.get?n.get.call(e):n.value}function ue(e,n,i){if(!n.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return n.get(e)}function we(e,n){var i=ue(e,n,"get");return xe(e,i)}function ke(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oe(e,n,i){ke(e,n),n.set(e,i)}function _e(e,n,i){if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}}function J(e,n,i){var s=ue(e,n,"set");return _e(e,s,i),i}function Me(e){let n=S.useContext(fe);if(n){let{register:i,...s}=n;e=ae(s,e),i()}return Pe(n,e.ref),e}var D=new WeakMap;class X{continuePropagation(){J(this,D,!1)}get shouldStopPropagation(){return we(this,D)}constructor(n,i,s,f){Oe(this,D,{writable:!0,value:void 0}),J(this,D,!0);var g;let v=(g=f==null?void 0:f.target)!==null&&g!==void 0?g:s.currentTarget;const $=v==null?void 0:v.getBoundingClientRect();let b,P=0,T,L=null;s.clientX!=null&&s.clientY!=null&&(T=s.clientX,L=s.clientY),$&&(T!=null&&L!=null?(b=T-$.left,P=L-$.top):(b=$.width/2,P=$.height/2)),this.type=n,this.pointerType=i,this.target=s.currentTarget,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.x=b,this.y=P}}const Q=Symbol("linkClicked");function Be(e){let{onPress:n,onPressChange:i,onPressStart:s,onPressEnd:f,onPressUp:g,isDisabled:v,isPressed:$,preventFocusOnPress:b,shouldCancelOnPointerExit:P,allowTextSelectionOnPress:T,ref:L,...de}=Me(e),[pe,z]=S.useState(!1),k=S.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:x,removeAllGlobalListeners:U}=Te(),m=I((t,o)=>{let y=k.current;if(v||y.didFirePressStart)return!1;let a=!0;if(y.isTriggeringEvent=!0,s){let c=new X("pressstart",o,t);s(c),a=c.shouldStopPropagation}return i&&i(!0),y.isTriggeringEvent=!1,y.didFirePressStart=!0,z(!0),a}),E=I((t,o,y=!0)=>{let a=k.current;if(!a.didFirePressStart)return!1;a.didFirePressStart=!1,a.isTriggeringEvent=!0;let c=!0;if(f){let r=new X("pressend",o,t);f(r),c=r.shouldStopPropagation}if(i&&i(!1),z(!1),n&&y&&!v){let r=new X("press",o,t);n(r),c&&(c=r.shouldStopPropagation)}return a.isTriggeringEvent=!1,c}),O=I((t,o)=>{let y=k.current;if(v)return!1;if(g){y.isTriggeringEvent=!0;let a=new X("pressup",o,t);return g(a),y.isTriggeringEvent=!1,a.shouldStopPropagation}return!0}),h=I(t=>{let o=k.current;if(o.isPressed&&o.target){o.didFirePressStart&&o.pointerType!=null&&E(M(o.target,t),o.pointerType,!1),o.isPressed=!1,o.isOverTarget=!1,o.activePointerId=null,o.pointerType=null,U(),T||R(o.target);for(let y of o.disposables)y();o.disposables=[]}}),H=I(t=>{P&&h(t)}),ge=S.useMemo(()=>{let t=k.current,o={onKeyDown(a){if(F(a.nativeEvent,a.currentTarget)&&p(a.currentTarget,d(a.nativeEvent))){var c;te(d(a.nativeEvent),a.key)&&a.preventDefault();let r=!0;if(!t.isPressed&&!a.repeat){t.target=a.currentTarget,t.isPressed=!0,t.pointerType="keyboard",r=m(a,"keyboard");let l=a.currentTarget,u=_=>{F(_,l)&&!_.repeat&&p(l,d(_))&&t.target&&O(M(t.target,_),"keyboard")};x(C(a.currentTarget),"keyup",Ee(u,y),!0)}r&&a.stopPropagation(),a.metaKey&&G()&&((c=t.metaKeyEvents)===null||c===void 0||c.set(a.key,a.nativeEvent))}else a.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(a){if(!(a&&!p(a.currentTarget,d(a.nativeEvent)))&&a&&a.button===0&&!t.isTriggeringEvent&&!w.isOpening){let c=!0;if(v&&a.preventDefault(),!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||j(a.nativeEvent))){let r=m(a,"virtual"),l=O(a,"virtual"),u=E(a,"virtual");c=r&&l&&u}else if(t.isPressed&&t.pointerType!=="keyboard"){let r=t.pointerType||a.nativeEvent.pointerType||"virtual";c=E(M(a.currentTarget,a),r,!0),t.isOverTarget=!1,h(a)}t.ignoreEmulatedMouseEvents=!1,c&&a.stopPropagation()}}},y=a=>{var c;if(t.isPressed&&t.target&&F(a,t.target)){var r;te(d(a),a.key)&&a.preventDefault();let u=d(a);E(M(t.target,a),"keyboard",p(t.target,d(a))),U(),a.key!=="Enter"&&V(t.target)&&p(t.target,u)&&!a[Q]&&(a[Q]=!0,w(t.target,a,!1)),t.isPressed=!1,(r=t.metaKeyEvents)===null||r===void 0||r.delete(a.key)}else if(a.key==="Meta"&&(!((c=t.metaKeyEvents)===null||c===void 0)&&c.size)){var l;let u=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let _ of u.values())(l=t.target)===null||l===void 0||l.dispatchEvent(new KeyboardEvent("keyup",_))}};if(typeof PointerEvent<"u"){o.onPointerDown=r=>{if(r.button!==0||!p(r.currentTarget,d(r.nativeEvent)))return;if(he(r.nativeEvent)){t.pointerType="virtual";return}t.pointerType=r.pointerType;let l=!0;if(!t.isPressed){t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=r.pointerId,t.target=r.currentTarget,T||q(t.target),l=m(r,t.pointerType);let u=d(r.nativeEvent);"releasePointerCapture"in u&&u.releasePointerCapture(r.pointerId),x(C(r.currentTarget),"pointerup",a,!1),x(C(r.currentTarget),"pointercancel",c,!1)}l&&r.stopPropagation()},o.onMouseDown=r=>{if(p(r.currentTarget,d(r.nativeEvent))&&r.button===0){if(b){let l=W(r.target);l&&t.disposables.push(l)}r.stopPropagation()}},o.onPointerUp=r=>{!p(r.currentTarget,d(r.nativeEvent))||t.pointerType==="virtual"||r.button===0&&O(r,t.pointerType||r.pointerType)},o.onPointerEnter=r=>{r.pointerId===t.activePointerId&&t.target&&!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,m(M(t.target,r),t.pointerType))},o.onPointerLeave=r=>{r.pointerId===t.activePointerId&&t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,E(M(t.target,r),t.pointerType,!1),H(r))};let a=r=>{if(r.pointerId===t.activePointerId&&t.isPressed&&r.button===0&&t.target){if(p(t.target,d(r))&&t.pointerType!=null){let l=!1,u=setTimeout(()=>{t.isPressed&&t.target instanceof HTMLElement&&(l?h(r):(re(t.target),t.target.click()))},80);x(r.currentTarget,"click",()=>l=!0,!0),t.disposables.push(()=>clearTimeout(u))}else h(r);t.isOverTarget=!1}},c=r=>{h(r)};o.onDragStart=r=>{p(r.currentTarget,d(r.nativeEvent))&&h(r)}}else{o.onMouseDown=r=>{if(r.button!==0||!p(r.currentTarget,d(r.nativeEvent)))return;if(t.ignoreEmulatedMouseEvents){r.stopPropagation();return}if(t.isPressed=!0,t.isOverTarget=!0,t.target=r.currentTarget,t.pointerType=j(r.nativeEvent)?"virtual":"mouse",me.flushSync(()=>m(r,t.pointerType))&&r.stopPropagation(),b){let u=W(r.target);u&&t.disposables.push(u)}x(C(r.currentTarget),"mouseup",a,!1)},o.onMouseEnter=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;let l=!0;t.isPressed&&!t.ignoreEmulatedMouseEvents&&t.pointerType!=null&&(t.isOverTarget=!0,l=m(r,t.pointerType)),l&&r.stopPropagation()},o.onMouseLeave=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;let l=!0;t.isPressed&&!t.ignoreEmulatedMouseEvents&&t.pointerType!=null&&(t.isOverTarget=!1,l=E(r,t.pointerType,!1),H(r)),l&&r.stopPropagation()},o.onMouseUp=r=>{p(r.currentTarget,d(r.nativeEvent))&&!t.ignoreEmulatedMouseEvents&&r.button===0&&O(r,t.pointerType||"mouse")};let a=r=>{if(r.button===0){if(t.ignoreEmulatedMouseEvents){t.ignoreEmulatedMouseEvents=!1;return}t.target&&t.target.contains(r.target)&&t.pointerType!=null||h(r),t.isOverTarget=!1}};o.onTouchStart=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;let l=Ce(r.nativeEvent);if(!l)return;t.activePointerId=l.identifier,t.ignoreEmulatedMouseEvents=!0,t.isOverTarget=!0,t.isPressed=!0,t.target=r.currentTarget,t.pointerType="touch",T||q(t.target),m(K(t.target,r),t.pointerType)&&r.stopPropagation(),x(B(r.currentTarget),"scroll",c,!0)},o.onTouchMove=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;if(!t.isPressed){r.stopPropagation();return}let l=Z(r.nativeEvent,t.activePointerId),u=!0;l&&ee(l,r.currentTarget)?!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,u=m(K(t.target,r),t.pointerType)):t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,u=E(K(t.target,r),t.pointerType,!1),H(K(t.target,r))),u&&r.stopPropagation()},o.onTouchEnd=r=>{if(!p(r.currentTarget,d(r.nativeEvent)))return;if(!t.isPressed){r.stopPropagation();return}let l=Z(r.nativeEvent,t.activePointerId),u=!0;l&&ee(l,r.currentTarget)&&t.pointerType!=null?(O(K(t.target,r),t.pointerType),u=E(K(t.target,r),t.pointerType)):t.isOverTarget&&t.pointerType!=null&&(u=E(K(t.target,r),t.pointerType,!1)),u&&r.stopPropagation(),t.isPressed=!1,t.activePointerId=null,t.isOverTarget=!1,t.ignoreEmulatedMouseEvents=!0,t.target&&!T&&R(t.target),U()},o.onTouchCancel=r=>{p(r.currentTarget,d(r.nativeEvent))&&(r.stopPropagation(),t.isPressed&&h(K(t.target,r)))};let c=r=>{t.isPressed&&p(d(r),t.target)&&h({currentTarget:t.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};o.onDragStart=r=>{p(r.currentTarget,d(r.nativeEvent))&&h(r)}}return o},[x,v,b,U,T,h,H,E,m,O]);return S.useEffect(()=>{let t=k.current;return()=>{var o;T||R((o=t.target)!==null&&o!==void 0?o:void 0);for(let y of t.disposables)y();t.disposables=[]}},[T]),{isPressed:$||pe,pressProps:ae(de,ge)}}function V(e){return e.tagName==="A"&&e.hasAttribute("href")}function F(e,n){const{key:i,code:s}=e,f=n,g=f.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||s==="Space")&&!(f instanceof B(f).HTMLInputElement&&!ce(f,i)||f instanceof B(f).HTMLTextAreaElement||f.isContentEditable)&&!((g==="link"||!g&&V(f))&&i!=="Enter")}function Ce(e){const{targetTouches:n}=e;return n.length>0?n[0]:null}function Z(e,n){const i=e.changedTouches;for(let s=0;s<i.length;s++){const f=i[s];if(f.identifier===n)return f}return null}function K(e,n){let i=0,s=0;return n.targetTouches&&n.targetTouches.length===1&&(i=n.targetTouches[0].clientX,s=n.targetTouches[0].clientY),{currentTarget:e,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:s}}function M(e,n){let i=n.clientX,s=n.clientY;return{currentTarget:e,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:i,clientY:s}}function Ae(e){let n=0,i=0;return e.width!==void 0?n=e.width/2:e.radiusX!==void 0&&(n=e.radiusX),e.height!==void 0?i=e.height/2:e.radiusY!==void 0&&(i=e.radiusY),{top:e.clientY-i,right:e.clientX+n,bottom:e.clientY+i,left:e.clientX-n}}function Ie(e,n){return!(e.left>n.right||n.left>e.right||e.top>n.bottom||n.top>e.bottom)}function ee(e,n){let i=n.getBoundingClientRect(),s=Ae(e);return Ie(i,s)}function Le(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!V(e)}function te(e,n){return e instanceof HTMLInputElement?!ce(e,n):Le(e)}const Ue=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ce(e,n){return e.type==="checkbox"||e.type==="radio"?n===" ":Ue.has(e.type)}export{fe as $,Oe as _,Be as a,oe as b,Ge as c,Ke as d,Re as e,w as f,Fe as g};
