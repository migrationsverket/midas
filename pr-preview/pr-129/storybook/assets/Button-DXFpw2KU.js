import{l as I,k as w,c as m,m as E,$ as F,e as N,d as O,f as R,q as L}from"./useFocusable-B5I9Mbqb.js";import{r as p,R as y}from"./index-ClcD9ViR.js";import{$ as S}from"./Hidden-Gy3GO5dR.js";function V(e,t){let{elementType:n="button",isDisabled:i,onPress:a,onPressStart:r,onPressEnd:s,onPressUp:l,onPressChange:$,preventFocusOnPress:g,allowFocusWhenDisabled:h,onClick:f,href:P,target:u,rel:b,type:o="button"}=e,c;n==="button"?c={type:o,disabled:i}:c={role:"button",tabIndex:i?void 0:0,href:n==="a"&&i?void 0:P,target:n==="a"?u:void 0,type:n==="input"?o:void 0,disabled:n==="input"?i:void 0,"aria-disabled":!i||n==="input"?void 0:i,rel:n==="a"?b:void 0};let{pressProps:v,isPressed:T}=I({onPressStart:r,onPressEnd:s,onPressChange:$,onPress:a,onPressUp:l,isDisabled:i,preventFocusOnPress:g,ref:t}),{focusableProps:x}=w(e,t);h&&(x.tabIndex=i?-1:x.tabIndex);let _=m(x,v,E(e,{labelable:!0}));return{isPressed:T,buttonProps:m(c,_,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],onClick:D=>{f&&(f(D),console.warn("onClick is deprecated, please use onPress"))}})}}const A=7e3;let d=null;function C(e,t="assertive",n=A){d?d.announce(e,t,n):(d=new M,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?d.announce(e,t,n):setTimeout(()=>{d!=null&&d.isAttached()&&(d==null||d.announce(e,t,n))},100))}function G(e){d&&d.clear(e)}class M{isAttached(){var t;return(t=this.node)===null||t===void 0?void 0:t.isConnected}createLog(t){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",t),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(t,n="assertive",i=A){var a,r;if(!this.node)return;let s=document.createElement("div");typeof t=="object"?(s.setAttribute("role","img"),s.setAttribute("aria-labelledby",t["aria-labelledby"])):s.textContent=t,n==="assertive"?(a=this.assertiveLog)===null||a===void 0||a.appendChild(s):(r=this.politeLog)===null||r===void 0||r.appendChild(s),t!==""&&setTimeout(()=>{s.remove()},i)}clear(t){this.node&&((!t||t==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!t||t==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const k=p.createContext(null),H=new Set(["form","formAction","formEncType","formMethod","formNoValidate","formTarget","name","value"]),U=p.createContext({});function j(e,t){[e,t]=F(e,t,U),e=B(e);let n=e,{isPending:i}=n,{buttonProps:a,isPressed:r}=V(e,t),{focusProps:s,isFocused:l,isFocusVisible:$}=N(e),{hoverProps:g,isHovered:h}=O({...e,isDisabled:e.isDisabled||i}),f={isHovered:h,isPressed:(n.isPressed||r)&&!i,isFocused:l,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:i??!1},P=R({...e,values:f,defaultClassName:"react-aria-Button"}),u=L(a.id),b=L(),o=a["aria-labelledby"];i&&(o?o=`${o} ${b}`:a["aria-label"]&&(o=`${u} ${b}`));let c=p.useRef(i);return p.useEffect(()=>{let v={"aria-labelledby":o||u};(!c.current&&l&&i||c.current&&l&&!i)&&C(v,"assertive"),c.current=i},[i,l,o,u]),y.createElement("button",{...E(e,{propNames:H}),...m(a,s,g),...P,id:u,ref:t,"aria-labelledby":o,slot:e.slot||void 0,"aria-disabled":i?"true":a["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":f.isPressed||void 0,"data-hovered":h||void 0,"data-focused":l||void 0,"data-pending":i||void 0,"data-focus-visible":$||void 0},y.createElement(k.Provider,{value:{id:b}},P.children))}function B(e){return e.isPending&&(e.onPress=void 0,e.onPressStart=void 0,e.onPressEnd=void 0,e.onPressChange=void 0,e.onPressUp=void 0,e.onKeyDown=void 0,e.onKeyUp=void 0,e.onClick=void 0,e.href=void 0),e}const Y=S(j);export{Y as $,U as a,C as b,V as c,G as d};
